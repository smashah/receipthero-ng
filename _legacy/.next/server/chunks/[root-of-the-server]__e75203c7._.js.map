{"version":3,"sources":["../../../node_modules/.pnpm/%40upstash%2Bcore-analytics%400.0.10/node_modules/%40upstash/core-analytics/dist/index.js","../../../node_modules/.pnpm/%40upstash%2Bratelimit%402.0.6_%40upstash%2Bredis%401.35.3/node_modules/%40upstash/ratelimit/src/index.ts","../../../node_modules/.pnpm/%40upstash%2Bratelimit%402.0.6_%40upstash%2Bredis%401.35.3/node_modules/%40upstash/ratelimit/src/analytics.ts","../../../node_modules/.pnpm/%40upstash%2Bratelimit%402.0.6_%40upstash%2Bredis%401.35.3/node_modules/%40upstash/ratelimit/src/cache.ts","../../../node_modules/.pnpm/%40upstash%2Bratelimit%402.0.6_%40upstash%2Bredis%401.35.3/node_modules/%40upstash/ratelimit/src/duration.ts","../../../node_modules/.pnpm/%40upstash%2Bratelimit%402.0.6_%40upstash%2Bredis%401.35.3/node_modules/%40upstash/ratelimit/src/hash.ts","../../../node_modules/.pnpm/%40upstash%2Bratelimit%402.0.6_%40upstash%2Bredis%401.35.3/node_modules/%40upstash/ratelimit/src/lua-scripts/single.ts","../../../node_modules/.pnpm/%40upstash%2Bratelimit%402.0.6_%40upstash%2Bredis%401.35.3/node_modules/%40upstash/ratelimit/src/lua-scripts/multi.ts","../../../node_modules/.pnpm/%40upstash%2Bratelimit%402.0.6_%40upstash%2Bredis%401.35.3/node_modules/%40upstash/ratelimit/src/lua-scripts/reset.ts","../../../node_modules/.pnpm/%40upstash%2Bratelimit%402.0.6_%40upstash%2Bredis%401.35.3/node_modules/%40upstash/ratelimit/src/lua-scripts/hash.ts","../../../node_modules/.pnpm/%40upstash%2Bratelimit%402.0.6_%40upstash%2Bredis%401.35.3/node_modules/%40upstash/ratelimit/src/types.ts","../../../node_modules/.pnpm/%40upstash%2Bratelimit%402.0.6_%40upstash%2Bredis%401.35.3/node_modules/%40upstash/ratelimit/src/deny-list/scripts.ts","../../../node_modules/.pnpm/%40upstash%2Bratelimit%402.0.6_%40upstash%2Bredis%401.35.3/node_modules/%40upstash/ratelimit/src/deny-list/ip-deny-list.ts","../../../node_modules/.pnpm/%40upstash%2Bratelimit%402.0.6_%40upstash%2Bredis%401.35.3/node_modules/%40upstash/ratelimit/src/deny-list/time.ts","../../../node_modules/.pnpm/%40upstash%2Bratelimit%402.0.6_%40upstash%2Bredis%401.35.3/node_modules/%40upstash/ratelimit/src/deny-list/deny-list.ts","../../../node_modules/.pnpm/%40upstash%2Bratelimit%402.0.6_%40upstash%2Bredis%401.35.3/node_modules/%40upstash/ratelimit/src/ratelimit.ts","../../../node_modules/.pnpm/%40upstash%2Bratelimit%402.0.6_%40upstash%2Bredis%401.35.3/node_modules/%40upstash/ratelimit/src/multi.ts","../../../node_modules/.pnpm/%40upstash%2Bratelimit%402.0.6_%40upstash%2Bredis%401.35.3/node_modules/%40upstash/ratelimit/src/single.ts","../../../node_modules/.pnpm/next%4016.0.10_react-dom%4019.1.1_react%4019.1.1__react%4019.1.1/node_modules/next/dist/esm/build/templates/app-route.js","../../../node_modules/.pnpm/together-ai%400.22.0/node_modules/together-ai/internal/tslib.mjs","../../../app/api/ocr/route.ts","../../../node_modules/.pnpm/uncrypto%400.1.3/node_modules/uncrypto/dist/crypto.node.mjs","../../../node_modules/.pnpm/%40upstash%2Bredis%401.35.3/node_modules/%40upstash/redis/chunk-2BA3VA6P.mjs","../../../node_modules/.pnpm/together-ai%400.22.0/node_modules/together-ai/src/version.ts","../../../node_modules/.pnpm/together-ai%400.22.0/node_modules/together-ai/src/lib/chatCompletionUtils.ts","../../../node_modules/.pnpm/next%4016.0.10_react-dom%4019.1.1_react%4019.1.1__react%4019.1.1/node_modules/next/src/build/templates/app-route.ts","../../../node_modules/.pnpm/together-ai%400.22.0/node_modules/together-ai/src/lib/RunnableFunction.ts","../../../node_modules/.pnpm/together-ai%400.22.0/node_modules/together-ai/src/internal/utils/bytes.ts","../../../node_modules/.pnpm/together-ai%400.22.0/node_modules/together-ai/src/internal/parse.ts","../../../node_modules/.pnpm/together-ai%400.22.0/node_modules/together-ai/src/internal/utils/log.ts","../../../node_modules/.pnpm/together-ai%400.22.0/node_modules/together-ai/src/internal/utils/values.ts","../../../node_modules/.pnpm/together-ai%400.22.0/node_modules/together-ai/src/internal/to-file.ts","../../../node_modules/.pnpm/together-ai%400.22.0/node_modules/together-ai/src/resources/chat/completions.ts","../../../node_modules/.pnpm/together-ai%400.22.0/node_modules/together-ai/src/resources/chat/chat.ts","../../../node_modules/.pnpm/together-ai%400.22.0/node_modules/together-ai/src/core/error.ts","../../../node_modules/.pnpm/together-ai%400.22.0/node_modules/together-ai/src/resources/code-interpreter/sessions.ts","../../../node_modules/.pnpm/together-ai%400.22.0/node_modules/together-ai/src/resources/code-interpreter/code-interpreter.ts","../../../node_modules/.pnpm/together-ai%400.22.0/node_modules/together-ai/src/resources/completions.ts","../../../node_modules/.pnpm/together-ai%400.22.0/node_modules/together-ai/src/resources/audio/transcriptions.ts","../../../node_modules/.pnpm/together-ai%400.22.0/node_modules/together-ai/src/resources/embeddings.ts","../../../node_modules/.pnpm/together-ai%400.22.0/node_modules/together-ai/src/internal/detect-platform.ts","../../../node_modules/.pnpm/together-ai%400.22.0/node_modules/together-ai/src/resources/endpoints.ts","../../../node_modules/.pnpm/together-ai%400.22.0/node_modules/together-ai/src/resources/audio/translations.ts","../../../node_modules/.pnpm/together-ai%400.22.0/node_modules/together-ai/src/resources/files.ts","../../../node_modules/.pnpm/together-ai%400.22.0/node_modules/together-ai/src/resources/fine-tune.ts","../../../node_modules/.pnpm/together-ai%400.22.0/node_modules/together-ai/src/internal/headers.ts","../../../node_modules/.pnpm/together-ai%400.22.0/node_modules/together-ai/src/resources/hardware.ts","../../../node_modules/.pnpm/together-ai%400.22.0/node_modules/together-ai/src/resources/images.ts","../../../node_modules/.pnpm/together-ai%400.22.0/node_modules/together-ai/src/resources/jobs.ts","../../../node_modules/.pnpm/together-ai%400.22.0/node_modules/together-ai/src/resources/audio/audio.ts","../../../node_modules/.pnpm/together-ai%400.22.0/node_modules/together-ai/src/resources/models.ts","../../../node_modules/.pnpm/together-ai%400.22.0/node_modules/together-ai/src/resources/index.ts","../../../node_modules/.pnpm/together-ai%400.22.0/node_modules/together-ai/src/resources/batches.ts","../../../node_modules/.pnpm/together-ai%400.22.0/node_modules/together-ai/src/index.ts","../../../node_modules/.pnpm/together-ai%400.22.0/node_modules/together-ai/src/internal/utils/sleep.ts","../../../node_modules/.pnpm/together-ai%400.22.0/node_modules/together-ai/src/internal/errors.ts","../../../node_modules/.pnpm/together-ai%400.22.0/node_modules/together-ai/src/internal/request-options.ts","../../../node_modules/.pnpm/together-ai%400.22.0/node_modules/together-ai/src/internal/uploads.ts","../../../lib/client.ts","../../../node_modules/.pnpm/together-ai%400.22.0/node_modules/together-ai/src/core/resource.ts","../../../node_modules/.pnpm/together-ai%400.22.0/node_modules/together-ai/src/internal/shims.ts","../../../node_modules/.pnpm/together-ai%400.22.0/node_modules/together-ai/src/lib/ChatCompletionStream.ts","../../../node_modules/.pnpm/together-ai%400.22.0/node_modules/together-ai/src/lib/AbstractChatCompletionRunner.ts","../../../node_modules/.pnpm/together-ai%400.22.0/node_modules/together-ai/src/internal/decoders/line.ts","../../../lib/types.ts","../../../node_modules/.pnpm/together-ai%400.22.0/node_modules/together-ai/src/core/streaming.ts","../../../node_modules/.pnpm/together-ai%400.22.0/node_modules/together-ai/src/client.ts","../../../node_modules/.pnpm/together-ai%400.22.0/node_modules/together-ai/src/internal/utils/uuid.ts","../../../node_modules/.pnpm/%40upstash%2Bredis%401.35.3/node_modules/%40upstash/redis/nodejs.mjs","../../../node_modules/.pnpm/together-ai%400.22.0/node_modules/together-ai/src/core/api-promise.ts","../../../node_modules/.pnpm/together-ai%400.22.0/node_modules/together-ai/src/internal/utils/path.ts","../../../node_modules/.pnpm/together-ai%400.22.0/node_modules/together-ai/src/internal/utils/env.ts"],"sourcesContent":["\"use strict\";var g=Object.defineProperty;var k=Object.getOwnPropertyDescriptor;var _=Object.getOwnPropertyNames;var y=Object.prototype.hasOwnProperty;var w=(l,e)=>{for(var t in e)g(l,t,{get:e[t],enumerable:!0})},A=(l,e,t,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of _(e))!y.call(l,s)&&s!==t&&g(l,s,{get:()=>e[s],enumerable:!(i=k(e,s))||i.enumerable});return l};var x=l=>A(g({},\"__esModule\",{value:!0}),l);var S={};w(S,{Analytics:()=>b});module.exports=x(S);var p=`\nlocal key = KEYS[1]\nlocal field = ARGV[1]\n\nlocal data = redis.call(\"ZRANGE\", key, 0, -1, \"WITHSCORES\")\nlocal count = {}\n\nfor i = 1, #data, 2 do\n  local json_str = data[i]\n  local score = tonumber(data[i + 1])\n  local obj = cjson.decode(json_str)\n\n  local fieldValue = obj[field]\n\n  if count[fieldValue] == nil then\n    count[fieldValue] = score\n  else\n    count[fieldValue] = count[fieldValue] + score\n  end\nend\n\nlocal result = {}\nfor k, v in pairs(count) do\n  table.insert(result, {k, v})\nend\n\nreturn result\n`,f=`\nlocal prefix = KEYS[1]\nlocal first_timestamp = tonumber(ARGV[1]) -- First timestamp to check\nlocal increment = tonumber(ARGV[2])       -- Increment between each timestamp\nlocal num_timestamps = tonumber(ARGV[3])  -- Number of timestampts to check (24 for a day and 24 * 7 for a week)\nlocal num_elements = tonumber(ARGV[4])    -- Number of elements to fetch in each category\nlocal check_at_most = tonumber(ARGV[5])   -- Number of elements to check at most.\n\nlocal keys = {}\nfor i = 1, num_timestamps do\n  local timestamp = first_timestamp - (i - 1) * increment\n  table.insert(keys, prefix .. \":\" .. timestamp)\nend\n\n-- get the union of the groups\nlocal zunion_params = {\"ZUNION\", num_timestamps, unpack(keys)}\ntable.insert(zunion_params, \"WITHSCORES\")\nlocal result = redis.call(unpack(zunion_params))\n\n-- select num_elements many items\nlocal true_group = {}\nlocal false_group = {}\nlocal denied_group = {}\nlocal true_count = 0\nlocal false_count = 0\nlocal denied_count = 0\nlocal i = #result - 1\n\n-- index to stop at after going through \"checkAtMost\" many items:\nlocal cutoff_index = #result - 2 * check_at_most\n\n-- iterate over the results\nwhile (true_count + false_count + denied_count) < (num_elements * 3) and 1 <= i and i >= cutoff_index do\n  local score = tonumber(result[i + 1])\n  if score > 0 then\n    local element = result[i]\n    if string.find(element, \"success\\\\\":true\") and true_count < num_elements then\n      table.insert(true_group, {score, element})\n      true_count = true_count + 1\n    elseif string.find(element, \"success\\\\\":false\") and false_count < num_elements then\n      table.insert(false_group, {score, element})\n      false_count = false_count + 1\n    elseif string.find(element, \"success\\\\\":\\\\\"denied\") and denied_count < num_elements then\n      table.insert(denied_group, {score, element})\n      denied_count = denied_count + 1\n    end\n  end\n  i = i - 2\nend\n\nreturn {true_group, false_group, denied_group}\n`,h=`\nlocal prefix = KEYS[1]\nlocal first_timestamp = tonumber(ARGV[1])\nlocal increment = tonumber(ARGV[2])\nlocal num_timestamps = tonumber(ARGV[3])\n\nlocal keys = {}\nfor i = 1, num_timestamps do\n  local timestamp = first_timestamp - (i - 1) * increment\n  table.insert(keys, prefix .. \":\" .. timestamp)\nend\n\n-- get the union of the groups\nlocal zunion_params = {\"ZUNION\", num_timestamps, unpack(keys)}\ntable.insert(zunion_params, \"WITHSCORES\")\nlocal result = redis.call(unpack(zunion_params))\n\nreturn result\n`;var b=class{redis;prefix;bucketSize;constructor(e){this.redis=e.redis,this.prefix=e.prefix??\"@upstash/analytics\",this.bucketSize=this.parseWindow(e.window)}validateTableName(e){if(!/^[a-zA-Z0-9_-]+$/.test(e))throw new Error(`Invalid table name: ${e}. Table names can only contain letters, numbers, dashes and underscores.`)}parseWindow(e){if(typeof e==\"number\"){if(e<=0)throw new Error(`Invalid window: ${e}`);return e}let t=/^(\\d+)([smhd])$/;if(!t.test(e))throw new Error(`Invalid window: ${e}`);let[,i,s]=e.match(t),n=parseInt(i);switch(s){case\"s\":return n*1e3;case\"m\":return n*1e3*60;case\"h\":return n*1e3*60*60;case\"d\":return n*1e3*60*60*24;default:throw new Error(`Invalid window unit: ${s}`)}}getBucket(e){let t=e??Date.now();return Math.floor(t/this.bucketSize)*this.bucketSize}async ingest(e,...t){this.validateTableName(e),await Promise.all(t.map(async i=>{let s=this.getBucket(i.time),n=[this.prefix,e,s].join(\":\");await this.redis.zincrby(n,1,JSON.stringify({...i,time:void 0}))}))}formatBucketAggregate(e,t,i){let s={};return e.forEach(([n,r])=>{t==\"success\"&&(n=n===1?\"true\":n===null?\"false\":n),s[t]=s[t]||{},s[t][(n??\"null\").toString()]=r}),{time:i,...s}}async aggregateBucket(e,t,i){this.validateTableName(e);let s=this.getBucket(i),n=[this.prefix,e,s].join(\":\"),r=await this.redis.eval(p,[n],[t]);return this.formatBucketAggregate(r,t,s)}async aggregateBuckets(e,t,i,s){this.validateTableName(e);let n=this.getBucket(s),r=[];for(let o=0;o<i;o+=1)r.push(this.aggregateBucket(e,t,n)),n=n-this.bucketSize;return Promise.all(r)}async aggregateBucketsWithPipeline(e,t,i,s,n){this.validateTableName(e),n=n??48;let r=this.getBucket(s),o=[],c=this.redis.pipeline(),u=[];for(let a=1;a<=i;a+=1){let d=[this.prefix,e,r].join(\":\");c.eval(p,[d],[t]),o.push(r),r=r-this.bucketSize,(a%n==0||a==i)&&(u.push(c.exec()),c=this.redis.pipeline())}return(await Promise.all(u)).flat().map((a,d)=>this.formatBucketAggregate(a,t,o[d]))}async getAllowedBlocked(e,t,i){this.validateTableName(e);let s=[this.prefix,e].join(\":\"),n=this.getBucket(i),r=await this.redis.eval(h,[s],[n,this.bucketSize,t]),o={};for(let c=0;c<r.length;c+=2){let u=r[c],m=u.identifier,a=+r[c+1];o[m]||(o[m]={success:0,blocked:0}),o[m][u.success?\"success\":\"blocked\"]=a}return o}async getMostAllowedBlocked(e,t,i,s,n){this.validateTableName(e);let r=[this.prefix,e].join(\":\"),o=this.getBucket(s),c=n??i*5,[u,m,a]=await this.redis.eval(f,[r],[o,this.bucketSize,t,i,c]);return{allowed:this.toDicts(u),ratelimited:this.toDicts(m),denied:this.toDicts(a)}}toDicts(e){let t=[];for(let i=0;i<e.length;i+=1){let s=+e[i][0],n=e[i][1];t.push({identifier:n.identifier,count:s})}return t}};0&&(module.exports={Analytics});\n","\n\n\n\n\n\n\n\n\n\n\n\nexport {Analytics, type AnalyticsConfig} from \"./analytics\";\nexport {MultiRegionRatelimit, type MultiRegionRatelimitConfig} from \"./multi\";\nexport {RegionRatelimit as Ratelimit, type RegionRatelimitConfig as RatelimitConfig} from \"./single\";\nexport {type Algorithm} from \"./types\";\nexport * as IpDenyList from \"./deny-list/ip-deny-list\";\nexport {type Duration} from \"./duration\";","import type { Aggregate } from \"@upstash/core-analytics\";\nimport { Analytics as CoreAnalytics } from \"@upstash/core-analytics\";\nimport type { Redis } from \"./types\";\n\nexport type Geo = {\n  country?: string;\n  city?: string;\n  region?: string;\n  ip?: string;\n};\n\n/**\n * denotes the success field in the analytics submission.\n * Set to true when ratelimit check passes. False when request is ratelimited.\n * Set to \"denied\" when some request value is in deny list.\n */\nexport type EventSuccess = boolean | \"denied\"\n\nexport type Event = Geo & {\n  identifier: string;\n  time: number;\n  success: EventSuccess;\n};\n\nexport type AnalyticsConfig = {\n  redis: Redis;\n  prefix?: string;\n};\n\n/**\n * The Analytics package is experimental and can change at any time.\n */\nexport class Analytics {\n  private readonly analytics: CoreAnalytics;\n  private readonly table = \"events\";\n\n  constructor(config: AnalyticsConfig) {\n    this.analytics = new CoreAnalytics({\n      // @ts-expect-error we need to fix the types in core-analytics, it should only require the methods it needs, not the whole sdk\n      redis: config.redis,\n      window: \"1h\",\n      prefix: config.prefix ?? \"@upstash/ratelimit\",\n      retention: \"90d\",\n    });\n  }\n\n  /**\n   * Try to extract the geo information from the request\n   *\n   * This handles Vercel's `req.geo` and  and Cloudflare's `request.cf` properties\n   * @param req\n   * @returns\n   */\n  public extractGeo(req: { geo?: Geo; cf?: Geo }): Geo {\n    if (req.geo !== undefined) {\n      return req.geo;\n    }\n    if (req.cf !== undefined) {\n      return req.cf;\n    }\n\n    return {};\n  }\n\n  public async record(event: Event): Promise<void> {\n    await this.analytics.ingest(this.table, event);\n  }\n\n  public async series<TFilter extends keyof Omit<Event, \"time\">>(\n    filter: TFilter,\n    cutoff: number,\n  ): Promise<Aggregate[]> {\n    const timestampCount = Math.min(\n      (\n        this.analytics.getBucket(Date.now())\n        - this.analytics.getBucket(cutoff)\n      ) / (60 * 60 * 1000),\n      256\n    )\n    return this.analytics.aggregateBucketsWithPipeline(this.table, filter, timestampCount)\n  }\n\n  public async getUsage(cutoff = 0): Promise<Record<string, { success: number; blocked: number }>> {\n    \n    const timestampCount = Math.min(\n      (\n        this.analytics.getBucket(Date.now())\n        - this.analytics.getBucket(cutoff)\n      ) / (60 * 60 * 1000),\n      256\n    )\n    const records = await this.analytics.getAllowedBlocked(this.table, timestampCount)\n    return records;\n  }\n\n  public async getUsageOverTime<TFilter extends keyof Omit<Event, \"time\">>(\n    timestampCount: number, groupby: TFilter\n  ): Promise<Aggregate[]> {\n    const result = await this.analytics.aggregateBucketsWithPipeline(this.table, groupby, timestampCount)\n    return result\n  }\n\n  public async getMostAllowedBlocked(timestampCount: number, getTop?: number, checkAtMost?: number) {\n    getTop = getTop ?? 5\n    const timestamp = undefined // let the analytics handle getting the timestamp\n    return this.analytics.getMostAllowedBlocked(this.table, timestampCount, getTop, timestamp, checkAtMost)\n  }\n}\n","import type { EphemeralCache } from \"./types\";\n\nexport class Cache implements EphemeralCache {\n  /**\n   * Stores identifier -> reset (in milliseconds)\n   */\n  private readonly cache: Map<string, number>;\n\n  constructor(cache: Map<string, number>) {\n    this.cache = cache;\n  }\n\n  public isBlocked(identifier: string): { blocked: boolean; reset: number } {\n    if (!this.cache.has(identifier)) {\n      return { blocked: false, reset: 0 };\n    }\n    const reset = this.cache.get(identifier)!;\n    if (reset < Date.now()) {\n      this.cache.delete(identifier);\n      return { blocked: false, reset: 0 };\n    }\n\n    return { blocked: true, reset: reset };\n  }\n\n  public blockUntil(identifier: string, reset: number): void {\n    this.cache.set(identifier, reset);\n  }\n\n  public set(key: string, value: number): void {\n    this.cache.set(key, value);\n  }\n  public get(key: string): number | null {\n    return this.cache.get(key) || null;\n  }\n\n  public incr(key: string): number {\n    let value = this.cache.get(key) ?? 0;\n    value += 1;\n    this.cache.set(key, value);\n    return value;\n  }\n\n  public pop(key: string): void {\n    this.cache.delete(key)\n  }\n\n  public empty(): void {\n    this.cache.clear()\n  }\n\n  public size(): number {\n    return this.cache.size;\n  }\n}\n","type Unit = \"ms\" | \"s\" | \"m\" | \"h\" | \"d\";\nexport type Duration = `${number} ${Unit}` | `${number}${Unit}`;\n\n/**\n * Convert a human readable duration to milliseconds\n */\nexport function ms(d: Duration): number {\n  const match = d.match(/^(\\d+)\\s?(ms|s|m|h|d)$/);\n  if (!match) {\n    throw new Error(`Unable to parse window size: ${d}`);\n  }\n  const time = Number.parseInt(match[1]);\n  const unit = match[2] as Unit;\n\n  switch (unit) {\n    case \"ms\": {\n      return time;\n    }\n    case \"s\": {\n      return time * 1000;\n    }\n    case \"m\": {\n      return time * 1000 * 60;\n    }\n    case \"h\": {\n      return time * 1000 * 60 * 60;\n    }\n    case \"d\": {\n      return time * 1000 * 60 * 60 * 24;\n    }\n\n    default: {\n      throw new Error(`Unable to parse window size: ${d}`);\n    }\n  }\n}\n","import type { ScriptInfo } from \"./lua-scripts/hash\";\nimport type { RegionContext } from \"./types\";\n\n/**\n * Runs the specified script with EVALSHA using the scriptHash parameter.\n * \n * If the EVALSHA fails, loads the script to redis and runs again with the\n * hash returned from Redis.\n * \n * @param ctx Regional or multi region context\n * @param script ScriptInfo of script to run. Contains the script and its hash\n * @param keys eval keys\n * @param args eval args\n */\nexport const safeEval = async (\n  ctx: RegionContext,\n  script: ScriptInfo,\n  keys: any[],\n  args: any[],\n) => {\n  try {\n    return await ctx.redis.evalsha(script.hash, keys, args)\n  } catch (error) {\n    if (`${error}`.includes(\"NOSCRIPT\")) {\n      return await ctx.redis.eval(script.script, keys, args)\n    }\n    throw error;\n  }\n}","export const fixedWindowLimitScript = `\n  local key           = KEYS[1]\n  local window        = ARGV[1]\n  local incrementBy   = ARGV[2] -- increment rate per request at a given value, default is 1\n\n  local r = redis.call(\"INCRBY\", key, incrementBy)\n  if r == tonumber(incrementBy) then\n  -- The first time this key is set, the value will be equal to incrementBy.\n  -- So we only need the expire command once\n  redis.call(\"PEXPIRE\", key, window)\n  end\n\n  return r\n`;\n\nexport const fixedWindowRemainingTokensScript = `\n      local key = KEYS[1]\n      local tokens = 0\n\n      local value = redis.call('GET', key)\n      if value then\n          tokens = value\n      end\n      return tokens\n    `;\n\nexport const slidingWindowLimitScript = `\n  local currentKey  = KEYS[1]           -- identifier including prefixes\n  local previousKey = KEYS[2]           -- key of the previous bucket\n  local tokens      = tonumber(ARGV[1]) -- tokens per window\n  local now         = ARGV[2]           -- current timestamp in milliseconds\n  local window      = ARGV[3]           -- interval in milliseconds\n  local incrementBy = ARGV[4]           -- increment rate per request at a given value, default is 1\n\n  local requestsInCurrentWindow = redis.call(\"GET\", currentKey)\n  if requestsInCurrentWindow == false then\n    requestsInCurrentWindow = 0\n  end\n\n  local requestsInPreviousWindow = redis.call(\"GET\", previousKey)\n  if requestsInPreviousWindow == false then\n    requestsInPreviousWindow = 0\n  end\n  local percentageInCurrent = ( now % window ) / window\n  -- weighted requests to consider from the previous window\n  requestsInPreviousWindow = math.floor(( 1 - percentageInCurrent ) * requestsInPreviousWindow)\n  if requestsInPreviousWindow + requestsInCurrentWindow >= tokens then\n    return -1\n  end\n\n  local newValue = redis.call(\"INCRBY\", currentKey, incrementBy)\n  if newValue == tonumber(incrementBy) then\n    -- The first time this key is set, the value will be equal to incrementBy.\n    -- So we only need the expire command once\n    redis.call(\"PEXPIRE\", currentKey, window * 2 + 1000) -- Enough time to overlap with a new window + 1 second\n  end\n  return tokens - ( newValue + requestsInPreviousWindow )\n`;\n\nexport const slidingWindowRemainingTokensScript = `\n  local currentKey  = KEYS[1]           -- identifier including prefixes\n  local previousKey = KEYS[2]           -- key of the previous bucket\n  local now         = ARGV[1]           -- current timestamp in milliseconds\n  local window      = ARGV[2]           -- interval in milliseconds\n\n  local requestsInCurrentWindow = redis.call(\"GET\", currentKey)\n  if requestsInCurrentWindow == false then\n    requestsInCurrentWindow = 0\n  end\n\n  local requestsInPreviousWindow = redis.call(\"GET\", previousKey)\n  if requestsInPreviousWindow == false then\n    requestsInPreviousWindow = 0\n  end\n\n  local percentageInCurrent = ( now % window ) / window\n  -- weighted requests to consider from the previous window\n  requestsInPreviousWindow = math.floor(( 1 - percentageInCurrent ) * requestsInPreviousWindow)\n\n  return requestsInPreviousWindow + requestsInCurrentWindow\n`;\n\nexport const tokenBucketLimitScript = `\n  local key         = KEYS[1]           -- identifier including prefixes\n  local maxTokens   = tonumber(ARGV[1]) -- maximum number of tokens\n  local interval    = tonumber(ARGV[2]) -- size of the window in milliseconds\n  local refillRate  = tonumber(ARGV[3]) -- how many tokens are refilled after each interval\n  local now         = tonumber(ARGV[4]) -- current timestamp in milliseconds\n  local incrementBy = tonumber(ARGV[5]) -- how many tokens to consume, default is 1\n        \n  local bucket = redis.call(\"HMGET\", key, \"refilledAt\", \"tokens\")\n        \n  local refilledAt\n  local tokens\n\n  if bucket[1] == false then\n    refilledAt = now\n    tokens = maxTokens\n  else\n    refilledAt = tonumber(bucket[1])\n    tokens = tonumber(bucket[2])\n  end\n        \n  if now >= refilledAt + interval then\n    local numRefills = math.floor((now - refilledAt) / interval)\n    tokens = math.min(maxTokens, tokens + numRefills * refillRate)\n\n    refilledAt = refilledAt + numRefills * interval\n  end\n\n  if tokens == 0 then\n    return {-1, refilledAt + interval}\n  end\n\n  local remaining = tokens - incrementBy\n  local expireAt = math.ceil(((maxTokens - remaining) / refillRate)) * interval\n        \n  redis.call(\"HSET\", key, \"refilledAt\", refilledAt, \"tokens\", remaining)\n  redis.call(\"PEXPIRE\", key, expireAt)\n  return {remaining, refilledAt + interval}\n`;\n\nexport const tokenBucketIdentifierNotFound = -1\n\nexport const tokenBucketRemainingTokensScript = `\n  local key         = KEYS[1]\n  local maxTokens   = tonumber(ARGV[1])\n        \n  local bucket = redis.call(\"HMGET\", key, \"refilledAt\", \"tokens\")\n\n  if bucket[1] == false then\n    return {maxTokens, ${tokenBucketIdentifierNotFound}}\n  end\n        \n  return {tonumber(bucket[2]), tonumber(bucket[1])}\n`;\n\nexport const cachedFixedWindowLimitScript = `\n  local key     = KEYS[1]\n  local window  = ARGV[1]\n  local incrementBy   = ARGV[2] -- increment rate per request at a given value, default is 1\n\n  local r = redis.call(\"INCRBY\", key, incrementBy)\n  if r == incrementBy then\n  -- The first time this key is set, the value will be equal to incrementBy.\n  -- So we only need the expire command once\n  redis.call(\"PEXPIRE\", key, window)\n  end\n      \n  return r\n`;\n\nexport const cachedFixedWindowRemainingTokenScript = `\n  local key = KEYS[1]\n  local tokens = 0\n\n  local value = redis.call('GET', key)\n  if value then\n      tokens = value\n  end\n  return tokens\n`;\n","export const fixedWindowLimitScript = `\n\tlocal key           = KEYS[1]\n\tlocal id            = ARGV[1]\n\tlocal window        = ARGV[2]\n\tlocal incrementBy   = tonumber(ARGV[3])\n\n\tredis.call(\"HSET\", key, id, incrementBy)\n\tlocal fields = redis.call(\"HGETALL\", key)\n\tif #fields == 2 and tonumber(fields[2])==incrementBy then\n\t-- The first time this key is set, and the value will be equal to incrementBy.\n\t-- So we only need the expire command once\n\t  redis.call(\"PEXPIRE\", key, window)\n\tend\n\n\treturn fields\n`;\nexport const fixedWindowRemainingTokensScript = `\n      local key = KEYS[1]\n      local tokens = 0\n\n      local fields = redis.call(\"HGETALL\", key)\n\n      return fields\n    `;\n\nexport const slidingWindowLimitScript = `\n\tlocal currentKey    = KEYS[1]           -- identifier including prefixes\n\tlocal previousKey   = KEYS[2]           -- key of the previous bucket\n\tlocal tokens        = tonumber(ARGV[1]) -- tokens per window\n\tlocal now           = ARGV[2]           -- current timestamp in milliseconds\n\tlocal window        = ARGV[3]           -- interval in milliseconds\n\tlocal requestId     = ARGV[4]           -- uuid for this request\n\tlocal incrementBy   = tonumber(ARGV[5]) -- custom rate, default is  1\n\n\tlocal currentFields = redis.call(\"HGETALL\", currentKey)\n\tlocal requestsInCurrentWindow = 0\n\tfor i = 2, #currentFields, 2 do\n\trequestsInCurrentWindow = requestsInCurrentWindow + tonumber(currentFields[i])\n\tend\n\n\tlocal previousFields = redis.call(\"HGETALL\", previousKey)\n\tlocal requestsInPreviousWindow = 0\n\tfor i = 2, #previousFields, 2 do\n\trequestsInPreviousWindow = requestsInPreviousWindow + tonumber(previousFields[i])\n\tend\n\n\tlocal percentageInCurrent = ( now % window) / window\n\tif requestsInPreviousWindow * (1 - percentageInCurrent ) + requestsInCurrentWindow >= tokens then\n\t  return {currentFields, previousFields, false}\n\tend\n\n\tredis.call(\"HSET\", currentKey, requestId, incrementBy)\n\n\tif requestsInCurrentWindow == 0 then \n\t  -- The first time this key is set, the value will be equal to incrementBy.\n\t  -- So we only need the expire command once\n\t  redis.call(\"PEXPIRE\", currentKey, window * 2 + 1000) -- Enough time to overlap with a new window + 1 second\n\tend\n\treturn {currentFields, previousFields, true}\n`;\n\nexport const slidingWindowRemainingTokensScript = `\n\tlocal currentKey    = KEYS[1]           -- identifier including prefixes\n\tlocal previousKey   = KEYS[2]           -- key of the previous bucket\n\tlocal now         \t= ARGV[1]           -- current timestamp in milliseconds\n  \tlocal window      \t= ARGV[2]           -- interval in milliseconds\n\n\tlocal currentFields = redis.call(\"HGETALL\", currentKey)\n\tlocal requestsInCurrentWindow = 0\n\tfor i = 2, #currentFields, 2 do\n\trequestsInCurrentWindow = requestsInCurrentWindow + tonumber(currentFields[i])\n\tend\n\n\tlocal previousFields = redis.call(\"HGETALL\", previousKey)\n\tlocal requestsInPreviousWindow = 0\n\tfor i = 2, #previousFields, 2 do\n\trequestsInPreviousWindow = requestsInPreviousWindow + tonumber(previousFields[i])\n\tend\n\n\tlocal percentageInCurrent = ( now % window) / window\n  \trequestsInPreviousWindow = math.floor(( 1 - percentageInCurrent ) * requestsInPreviousWindow)\n\t\n\treturn requestsInCurrentWindow + requestsInPreviousWindow\n`;\n","export const resetScript = `\n      local pattern = KEYS[1]\n\n      -- Initialize cursor to start from 0\n      local cursor = \"0\"\n\n      repeat\n          -- Scan for keys matching the pattern\n          local scan_result = redis.call('SCAN', cursor, 'MATCH', pattern)\n\n          -- Extract cursor for the next iteration\n          cursor = scan_result[1]\n\n          -- Extract keys from the scan result\n          local keys = scan_result[2]\n\n          for i=1, #keys do\n          redis.call('DEL', keys[i])\n          end\n\n      -- Continue scanning until cursor is 0 (end of keyspace)\n      until cursor == \"0\"\n    `;\n","import * as Single from \"./single\"\nimport * as Multi from \"./multi\"\nimport { resetScript } from \"./reset\"\n\nexport type ScriptInfo = {\n  script: string,\n  hash: string\n}\n\ntype Algorithm = {\n  limit: ScriptInfo,\n  getRemaining: ScriptInfo,\n}\n\ntype AlgorithmKind = \n  | \"fixedWindow\"\n  | \"slidingWindow\"\n  | \"tokenBucket\"\n  | \"cachedFixedWindow\"\n\nexport const SCRIPTS: {\n  singleRegion: Record<AlgorithmKind, Algorithm>,\n  multiRegion: Record<Exclude<AlgorithmKind, \"tokenBucket\" | \"cachedFixedWindow\">, Algorithm>,\n} = {\n  singleRegion: {\n    fixedWindow: {\n      limit: {\n        script: Single.fixedWindowLimitScript,\n        hash: \"b13943e359636db027ad280f1def143f02158c13\"\n      },\n      getRemaining: {\n        script: Single.fixedWindowRemainingTokensScript,\n        hash: \"8c4c341934502aee132643ffbe58ead3450e5208\"\n      },\n    },\n    slidingWindow: {\n      limit: {\n        script: Single.slidingWindowLimitScript,\n        hash: \"e1391e429b699c780eb0480350cd5b7280fd9213\"\n      },\n      getRemaining: {\n        script: Single.slidingWindowRemainingTokensScript,\n        hash: \"65a73ac5a05bf9712903bc304b77268980c1c417\"\n      },\n    },\n    tokenBucket: {\n      limit: {\n        script: Single.tokenBucketLimitScript,\n        hash: \"5bece90aeef8189a8cfd28995b479529e270b3c6\"\n      },\n      getRemaining: {\n        script: Single.tokenBucketRemainingTokensScript,\n        hash: \"a15be2bb1db2a15f7c82db06146f9d08983900d0\"\n      },\n    },\n    cachedFixedWindow: {\n      limit: {\n        script: Single.cachedFixedWindowLimitScript,\n        hash: \"c26b12703dd137939b9a69a3a9b18e906a2d940f\"\n      },\n      getRemaining: {\n        script: Single.cachedFixedWindowRemainingTokenScript,\n        hash: \"8e8f222ccae68b595ee6e3f3bf2199629a62b91a\"\n      },\n    }\n  },\n  multiRegion: {\n    fixedWindow: {\n      limit: {\n        script: Multi.fixedWindowLimitScript,\n        hash: \"a8c14f3835aa87bd70e5e2116081b81664abcf5c\"\n      },\n      getRemaining: {\n        script: Multi.fixedWindowRemainingTokensScript,\n        hash: \"8ab8322d0ed5fe5ac8eb08f0c2e4557f1b4816fd\"\n      },\n    },\n    slidingWindow: {\n      limit: {\n        script: Multi.slidingWindowLimitScript,\n        hash: \"cb4fdc2575056df7c6d422764df0de3a08d6753b\"\n      },\n      getRemaining: {\n        script: Multi.slidingWindowRemainingTokensScript,\n        hash: \"558c9306b7ec54abb50747fe0b17e5d44bd24868\"\n      },\n    },\n  }\n}\n\n/** COMMON */\nexport const RESET_SCRIPT: ScriptInfo = {\n  script: resetScript,\n  hash: \"54bd274ddc59fb3be0f42deee2f64322a10e2b50\"\n}","import type { Redis as RedisCore } from \"@upstash/redis\";\nimport type { Geo } from \"./analytics\";\n\n/**\n * EphemeralCache is used to block certain identifiers right away in case they have already exceeded the ratelimit.\n */\nexport type EphemeralCache = {\n  isBlocked: (identifier: string) => { blocked: boolean; reset: number };\n  blockUntil: (identifier: string, reset: number) => void;\n\n  set: (key: string, value: number) => void;\n  get: (key: string) => number | null;\n\n  incr: (key: string) => number;\n\n  pop: (key: string) => void;\n  empty: () => void;\n\n  size: () => number;\n}\n\nexport type RegionContext = {\n  redis: Redis;\n  cache?: EphemeralCache,\n};\nexport type MultiRegionContext = { regionContexts: Omit<RegionContext[], \"cache\">; cache?: EphemeralCache };\n\nexport type RatelimitResponseType = \"timeout\" | \"cacheBlock\" | \"denyList\"\n\nexport type Context = RegionContext | MultiRegionContext;\nexport type RatelimitResponse = {\n  /**\n   * Whether the request may pass(true) or exceeded the limit(false)\n   */\n  success: boolean;\n  /**\n   * Maximum number of requests allowed within a window.\n   */\n  limit: number;\n  /**\n   * How many requests the user has left within the current window.\n   */\n  remaining: number;\n  /**\n   * Unix timestamp in milliseconds when the limits are reset.\n   */\n  reset: number;\n\n  /**\n   * For the MultiRegion setup we do some synchronizing in the background, after returning the current limit.\n   * Or when analytics is enabled, we send the analytics asynchronously after returning the limit.\n   * In most case you can simply ignore this.\n   *\n   * On Vercel Edge or Cloudflare workers, you need to explicitly handle the pending Promise like this:\n   *\n   * ```ts\n   * const { pending } = await ratelimit.limit(\"id\")\n   * context.waitUntil(pending)\n   * ```\n   *\n   * See `waitUntil` documentation in\n   * [Cloudflare](https://developers.cloudflare.com/workers/runtime-apis/handlers/fetch/#contextwaituntil)\n   * and [Vercel](https://vercel.com/docs/functions/edge-middleware/middleware-api#waituntil)\n   * for more details.\n   * ```\n   */\n  pending: Promise<unknown>;\n\n  /**\n   * Reason behind the result in `success` field.\n   * - Is set to \"timeout\" when request times out\n   * - Is set to \"cacheBlock\" when an identifier is blocked through cache without calling redis because it was\n   *    rate limited previously.\n   * - Is set to \"denyList\" when identifier or one of ip/user-agent/country parameters is in deny list. To enable\n   *    deny list, see `enableProtection` parameter. To edit the deny list, see the Upstash Ratelimit Dashboard\n   *    at https://console.upstash.com/ratelimit.\n   * - Is set to undefined if rate limit check had to use Redis. This happens in cases when `success` field in\n   *    the response is true. It can also happen the first time sucecss is false.\n   */\n  reason?: RatelimitResponseType;\n\n  /**\n   * The value which was in the deny list if reason: \"denyList\"\n   */\n  deniedValue?: DeniedValue\n};\n\nexport type Algorithm<TContext> = () => {\n  limit: (\n    ctx: TContext,\n    identifier: string,\n    rate?: number,\n    opts?: {\n      cache?: EphemeralCache;\n    },\n  ) => Promise<RatelimitResponse>;\n  getRemaining: (ctx: TContext, identifier: string) => Promise<{\n    remaining: number,\n    reset: number\n  }>;\n  resetTokens: (ctx: TContext, identifier: string) => Promise<void>;\n};\n\nexport type IsDenied = 0 | 1;\n\nexport type DeniedValue = string | undefined;\nexport type DenyListResponse = { deniedValue: DeniedValue, invalidIpDenyList: boolean }\n\nexport const DenyListExtension = \"denyList\" as const\nexport const IpDenyListKey = \"ipDenyList\" as const\nexport const IpDenyListStatusKey = \"ipDenyListStatus\" as const\n\nexport type LimitPayload = [RatelimitResponse, DenyListResponse];\nexport type LimitOptions = {\n  geo?: Geo,\n  rate?: number,\n  ip?: string,\n  userAgent?: string,\n  country?: string\n}\n\nexport type Redis = RedisCore\n","export const checkDenyListScript = `\n  -- Checks if values provideed in ARGV are present in the deny lists.\n  -- This is done using the allDenyListsKey below.\n\n  -- Additionally, checks the status of the ip deny list using the\n  -- ipDenyListStatusKey below. Here are the possible states of the\n  -- ipDenyListStatusKey key:\n  -- * status == -1: set to \"disabled\" with no TTL\n  -- * status == -2: not set, meaning that is was set before but expired\n  -- * status  >  0: set to \"valid\", with a TTL\n  --\n  -- In the case of status == -2, we set the status to \"pending\" with\n  -- 30 second ttl. During this time, the process which got status == -2\n  -- will update the ip deny list.\n\n  local allDenyListsKey     = KEYS[1]\n  local ipDenyListStatusKey = KEYS[2]\n\n  local results = redis.call('SMISMEMBER', allDenyListsKey, unpack(ARGV))\n  local status  = redis.call('TTL', ipDenyListStatusKey)\n  if status == -2 then\n    redis.call('SETEX', ipDenyListStatusKey, 30, \"pending\")\n  end\n\n  return { results, status }\n`","import type { Redis } from \"../types\";\nimport { DenyListExtension, IpDenyListKey, IpDenyListStatusKey } from \"../types\"\nimport { getIpListTTL } from \"./time\"\n\nconst baseUrl = \"https://raw.githubusercontent.com/stamparm/ipsum/master/levels\"\n\nexport class ThresholdError extends Error {\n  constructor(threshold: number) {\n    super(`Allowed threshold values are from 1 to 8, 1 and 8 included. Received: ${threshold}`);\n    this.name = \"ThresholdError\";\n  }\n}\n\n/**\n * Fetches the ips from the ipsum.txt at github\n * \n * In the repo we are using, 30+ ip lists are aggregated. The results are\n * stores in text files from 1 to 8.\n * https://github.com/stamparm/ipsum/tree/master/levels\n * \n * X.txt file holds ips which are in at least X of the lists.\n *\n * @param threshold ips with less than or equal to the threshold are not included\n * @returns list of ips\n */\nconst getIpDenyList = async (threshold: number) => {\n  if (typeof threshold !== \"number\" || threshold < 1 || threshold > 8) {\n    throw new ThresholdError(threshold)\n  }\n\n  try {\n    // Fetch data from the URL\n    const response = await fetch(`${baseUrl}/${threshold}.txt`)\n    if (!response.ok) {\n      throw new Error(`Error fetching data: ${response.statusText}`)\n    }\n    const data = await response.text()\n\n    // Process the data\n    const lines = data.split(\"\\n\")\n    return lines.filter((value) => value.length > 0) // remove empty values\n  } catch (error) {\n    throw new Error(`Failed to fetch ip deny list: ${error}`)\n  }\n}\n\n/**\n * Gets the list of ips from the github source which are not in the\n * deny list already\n * \n * First, gets the ip list from github using the threshold. Then, calls redis with\n * a transaction which does the following:\n * - subtract the current ip deny list from all\n * - delete current ip deny list\n * - recreate ip deny list with the ips from github. Ips already in the users own lists\n *   are excluded.\n * - status key is set to valid with ttl until next 2 AM UTC, which is a bit later than\n *   when the list is updated on github.\n *\n * @param redis redis instance\n * @param prefix ratelimit prefix\n * @param threshold ips with less than or equal to the threshold are not included\n * @param ttl time to live in milliseconds for the status flag. Optional. If not\n *  passed, ttl is infferred from current time.\n * @returns list of ips which are not in the deny list\n */\nexport const updateIpDenyList = async (\n  redis: Redis,\n  prefix: string,\n  threshold: number,\n  ttl?: number\n) => {\n  const allIps = await getIpDenyList(threshold)\n\n  const allDenyLists = [prefix, DenyListExtension, \"all\"].join(\":\")\n  const ipDenyList = [prefix, DenyListExtension, IpDenyListKey].join(\":\")\n  const statusKey = [prefix, IpDenyListStatusKey].join(\":\")\n\n  const transaction = redis.multi()\n\n  // remove the old ip deny list from the all set\n  transaction.sdiffstore(allDenyLists, allDenyLists, ipDenyList)\n\n  // delete the old ip deny list and create new one\n  transaction.del(ipDenyList)\n\n  transaction.sadd(ipDenyList, allIps.at(0), ...allIps.slice(1))\n\n  // make all deny list and ip deny list disjoint by removing duplicate\n  // ones from ip deny list\n  transaction.sdiffstore(ipDenyList, ipDenyList, allDenyLists)\n\n  // add remaining ips to all list\n  transaction.sunionstore(allDenyLists, allDenyLists, ipDenyList)\n\n  // set status key with ttl\n  transaction.set(statusKey, \"valid\", {px: ttl ?? getIpListTTL()})\n\n  return await transaction.exec()\n}\n\n/**\n * Disables the ip deny list by removing the ip deny list from the all\n * set and removing the ip deny list. Also sets the status key to disabled\n * with no ttl.\n * \n * @param redis redis instance\n * @param prefix ratelimit prefix\n * @returns \n */\nexport const disableIpDenyList = async (redis: Redis, prefix: string) => {\n  const allDenyListsKey = [prefix, DenyListExtension, \"all\"].join(\":\")\n  const ipDenyListKey = [prefix, DenyListExtension, IpDenyListKey].join(\":\")\n  const statusKey = [prefix, IpDenyListStatusKey].join(\":\")\n\n  const transaction = redis.multi()\n\n  // remove the old ip deny list from the all set\n  transaction.sdiffstore(allDenyListsKey, allDenyListsKey, ipDenyListKey)\n\n  // delete the old ip deny list\n  transaction.del(ipDenyListKey)\n\n  // set to disabled\n  // this way, the TTL command in checkDenyListScript will return -1.\n  transaction.set(statusKey, \"disabled\")\n\n  return await transaction.exec()\n}\n","\n// Number of milliseconds in one hour\nconst MILLISECONDS_IN_HOUR = 60 * 60 * 1000;\n\n// Number of milliseconds in one day\nconst MILLISECONDS_IN_DAY = 24 * MILLISECONDS_IN_HOUR;\n\n// Number of milliseconds from the current time to 2 AM UTC\nconst MILLISECONDS_TO_2AM = 2 * MILLISECONDS_IN_HOUR;\n\nexport const getIpListTTL = (time?: number) => {\n  const now = time || Date.now();\n\n  // Time since the last 2 AM UTC\n  const timeSinceLast2AM = (now - MILLISECONDS_TO_2AM) % MILLISECONDS_IN_DAY;\n\n  // Remaining time until the next 2 AM UTC\n  return MILLISECONDS_IN_DAY - timeSinceLast2AM;\n}\n  ","import type { DeniedValue, DenyListResponse, LimitPayload} from \"../types\";\nimport { DenyListExtension, IpDenyListStatusKey } from \"../types\"\nimport type { RatelimitResponse, Redis } from \"../types\"\nimport { Cache } from \"../cache\";\nimport { checkDenyListScript } from \"./scripts\";\nimport { updateIpDenyList } from \"./ip-deny-list\";\n\n\nconst denyListCache = new Cache(new Map());\n\n/**\n * Checks items in members list and returns the first denied member\n * in denyListCache if there are any.\n * \n * @param members list of values to check against the cache\n * @returns a member from the cache. If there is none, returns undefined\n */\nexport const checkDenyListCache = (members: string[]): DeniedValue => {\n  return members.find(\n    member => denyListCache.isBlocked(member).blocked\n  );\n}\n\n/**\n * Blocks a member for 1 minute.\n * \n * If there are more than 1000 elements in the cache, empties\n * it so that the cache doesn't grow in size indefinetely.\n * \n * @param member member to block\n */\nconst blockMember = (member: string) => {\n  if (denyListCache.size() > 1000) denyListCache.empty();\n  denyListCache.blockUntil(member, Date.now() + 60_000);\n}\n\n/**\n * Checks if identifier or any of the values are in any of\n * the denied lists in Redis.\n * \n * If some value is in a deny list, we block the identifier for a minute.\n * \n * @param redis redis client\n * @param prefix ratelimit prefix\n * @param members List of values (identifier, ip, user agent, country)\n * @returns true if a member is in deny list at Redis\n */\nexport const checkDenyList = async (\n  redis: Redis,\n  prefix: string,\n  members: string[]\n): Promise<DenyListResponse> => {\n  const [ deniedValues, ipDenyListStatus ] = await redis.eval(\n    checkDenyListScript,\n    [\n      [prefix, DenyListExtension, \"all\"].join(\":\"),\n      [prefix, IpDenyListStatusKey].join(\":\"),\n    ],\n    members\n  ) as [boolean[], number];\n\n  let deniedValue: DeniedValue = undefined;\n  deniedValues.map((memberDenied, index) => {\n    if (memberDenied) {\n      blockMember(members[index])\n      deniedValue = members[index]\n    }\n  })\n\n  return {\n    deniedValue,\n    invalidIpDenyList: ipDenyListStatus === -2\n  };\n};\n\n/**\n * Overrides the rate limit response if deny list\n * response indicates that value is in deny list.\n * \n * @param ratelimitResponse \n * @param denyListResponse \n * @returns \n */\nexport const resolveLimitPayload = (\n  redis: Redis,\n  prefix: string,\n  [ratelimitResponse, denyListResponse]: LimitPayload,\n  threshold: number\n): RatelimitResponse => {\n\n  if (denyListResponse.deniedValue) {\n    ratelimitResponse.success = false;\n    ratelimitResponse.remaining = 0;\n    ratelimitResponse.reason = \"denyList\";\n    ratelimitResponse.deniedValue = denyListResponse.deniedValue\n  }\n\n  if (denyListResponse.invalidIpDenyList) {\n    const updatePromise = updateIpDenyList(redis, prefix, threshold)\n    ratelimitResponse.pending = Promise.all([\n      ratelimitResponse.pending,\n      updatePromise\n    ])\n  }\n\n  return ratelimitResponse;\n};\n\n/**\n * \n * @returns Default response to return when some item\n *  is in deny list.\n */\nexport const defaultDeniedResponse = (deniedValue: string): RatelimitResponse => {\n  return {\n    success: false,\n    limit: 0,\n    remaining: 0,\n    reset: 0,\n    pending: Promise.resolve(),\n    reason: \"denyList\",\n    deniedValue: deniedValue\n  }\n}\n","import { Analytics } from \"./analytics\";\nimport { Cache } from \"./cache\";\nimport type { Algorithm, Context, LimitOptions, LimitPayload, RatelimitResponse, Redis } from \"./types\";\nimport { checkDenyList, checkDenyListCache, defaultDeniedResponse, resolveLimitPayload } from \"./deny-list/index\";\n\nexport class TimeoutError extends Error {\n  constructor() {\n    super(\"Timeout\");\n    this.name = \"TimeoutError\";\n  }\n}\nexport type RatelimitConfig<TContext> = {\n  /**\n   * The ratelimiter function to use.\n   *\n   * Choose one of the predefined ones or implement your own.\n   * Available algorithms are exposed via static methods:\n   * - Ratelimiter.fixedWindow\n   * - Ratelimiter.slidingWindow\n   * - Ratelimiter.tokenBucket\n   */\n\n  limiter: Algorithm<TContext>;\n\n  ctx: TContext;\n  /**\n   * All keys in redis are prefixed with this.\n   *\n   * @default `@upstash/ratelimit`\n   */\n  prefix?: string;\n\n  /**\n   * If enabled, the ratelimiter will keep a global cache of identifiers, that have\n   * exhausted their ratelimit. In serverless environments this is only possible if\n   * you create the ratelimiter instance outside of your handler function. While the\n   * function is still hot, the ratelimiter can block requests without having to\n   * request data from redis, thus saving time and money.\n   *\n   * Whenever an identifier has exceeded its limit, the ratelimiter will add it to an\n   * internal list together with its reset timestamp. If the same identifier makes a\n   * new request before it is reset, we can immediately reject it.\n   *\n   * Set to `false` to disable.\n   *\n   * If left undefined, a map is created automatically, but it can only work\n   * if the map or the  ratelimit instance is created outside your serverless function handler.\n   */\n  ephemeralCache?: Map<string, number> | false;\n\n  /**\n   * If set, the ratelimiter will allow requests to pass after this many milliseconds.\n   *\n   * Use this if you want to allow requests in case of network problems\n   *\n   * @default 5000\n   */\n  timeout?: number;\n\n  /**\n   * If enabled, the ratelimiter will store analytics data in redis, which you can check out at\n   * https://console.upstash.com/ratelimit\n   *\n   * @default false\n   */\n  analytics?: boolean;\n\n  /**\n   * Enables deny list. If set to true, requests with identifier or ip/user-agent/countrie\n   * in the deny list will be rejected automatically. To edit the deny list, check out the\n   * ratelimit dashboard at https://console.upstash.com/ratelimit\n   * \n   * @default false\n   */\n  enableProtection?: boolean\n\n  denyListThreshold?: number\n};\n\n/**\n * Ratelimiter using serverless redis from https://upstash.com/\n *\n * @example\n * ```ts\n * const { limit } = new Ratelimit({\n *    redis: Redis.fromEnv(),\n *    limiter: Ratelimit.slidingWindow(\n *      10,     // Allow 10 requests per window of 30 minutes\n *      \"30 m\", // interval of 30 minutes\n *    ),\n * })\n *\n * ```\n */\nexport abstract class Ratelimit<TContext extends Context> {\n  protected readonly limiter: Algorithm<TContext>;\n\n  protected readonly ctx: TContext;\n\n  protected readonly prefix: string;\n\n  protected readonly timeout: number;\n\n  protected readonly primaryRedis: Redis;\n\n  protected readonly analytics?: Analytics;\n\n  protected readonly enableProtection: boolean;\n\n  protected readonly denyListThreshold: number\n\n  constructor(config: RatelimitConfig<TContext>) {\n    this.ctx = config.ctx;\n    this.limiter = config.limiter;\n    this.timeout = config.timeout ?? 5000;\n    this.prefix = config.prefix ?? \"@upstash/ratelimit\";\n\n    this.enableProtection = config.enableProtection ?? false;\n    this.denyListThreshold = config.denyListThreshold ?? 6;\n\n    this.primaryRedis = (\"redis\" in this.ctx) ? this.ctx.redis : this.ctx.regionContexts[0].redis\n    this.analytics = config.analytics\n      ? new Analytics({\n        redis: this.primaryRedis,\n        prefix: this.prefix,\n      })\n      : undefined;\n\n    if (config.ephemeralCache instanceof Map) {\n      this.ctx.cache = new Cache(config.ephemeralCache);\n    } else if (config.ephemeralCache === undefined) {\n      this.ctx.cache = new Cache(new Map());\n    }\n  }\n\n  /**\n   * Determine if a request should pass or be rejected based on the identifier and previously chosen ratelimit.\n   *\n   * Use this if you want to reject all requests that you can not handle right now.\n   *\n   * @example\n   * ```ts\n   *  const ratelimit = new Ratelimit({\n   *    redis: Redis.fromEnv(),\n   *    limiter: Ratelimit.slidingWindow(10, \"10 s\")\n   *  })\n   *\n   *  const { success } = await ratelimit.limit(id)\n   *  if (!success){\n   *    return \"Nope\"\n   *  }\n   *  return \"Yes\"\n   * ```\n   *\n   * @param req.rate - The rate at which tokens will be added or consumed from the token bucket. A higher rate allows for more requests to be processed. Defaults to 1 token per interval if not specified.\n   *\n   * Usage with `req.rate`\n   * @example\n   * ```ts\n   *  const ratelimit = new Ratelimit({\n   *    redis: Redis.fromEnv(),\n   *    limiter: Ratelimit.slidingWindow(100, \"10 s\")\n   *  })\n   *\n   *  const { success } = await ratelimit.limit(id, {rate: 10})\n   *  if (!success){\n   *    return \"Nope\"\n   *  }\n   *  return \"Yes\"\n   * ```\n   */\n  public limit = async (\n    identifier: string,\n    req?: LimitOptions,\n  ): Promise<RatelimitResponse> => {\n\n    let timeoutId: any = null;\n    try {\n      const response = this.getRatelimitResponse(identifier, req);\n      const { responseArray, newTimeoutId } = this.applyTimeout(response);\n      timeoutId = newTimeoutId;\n\n      const timedResponse = await Promise.race(responseArray);\n      const finalResponse = this.submitAnalytics(timedResponse, identifier, req);\n      return finalResponse;\n    } finally {\n      if (timeoutId) {\n        clearTimeout(timeoutId);\n      }\n    }\n  };\n\n  /**\n   * Block until the request may pass or timeout is reached.\n   *\n   * This method returns a promise that resolves as soon as the request may be processed\n   * or after the timeout has been reached.\n   *\n   * Use this if you want to delay the request until it is ready to get processed.\n   *\n   * @example\n   * ```ts\n   *  const ratelimit = new Ratelimit({\n   *    redis: Redis.fromEnv(),\n   *    limiter: Ratelimit.slidingWindow(10, \"10 s\")\n   *  })\n   *\n   *  const { success } = await ratelimit.blockUntilReady(id, 60_000)\n   *  if (!success){\n   *    return \"Nope\"\n   *  }\n   *  return \"Yes\"\n   * ```\n   */\n  public blockUntilReady = async (\n    /**\n     * An identifier per user or api.\n     * Choose a userID, or api token, or ip address.\n     *\n     * If you want to limit your api across all users, you can set a constant string.\n     */\n    identifier: string,\n    /**\n     * Maximum duration to wait in milliseconds.\n     * After this time the request will be denied.\n     */\n    timeout: number,\n  ): Promise<RatelimitResponse> => {\n    if (timeout <= 0) {\n      throw new Error(\"timeout must be positive\");\n    }\n    let res: RatelimitResponse;\n\n    const deadline = Date.now() + timeout;\n    while (true) {\n      res = await this.limit(identifier);\n      if (res.success) {\n        break;\n      }\n      if (res.reset === 0) {\n        throw new Error(\"This should not happen\");\n      }\n\n      const wait = Math.min(res.reset, deadline) - Date.now();\n      await new Promise((r) => setTimeout(r, wait));\n\n      if (Date.now() > deadline) {\n        break;\n      }\n    }\n    return res!;\n  };\n\n  public resetUsedTokens = async (identifier: string) => {\n    const pattern = [this.prefix, identifier].join(\":\");\n    await this.limiter().resetTokens(this.ctx, pattern);\n  };\n\n  /**\n   * Returns the remaining token count together with a reset timestamps\n   * \n   * @param identifier identifir to check\n   * @returns object with `remaining` and reset fields. `remaining` denotes\n   *          the remaining tokens and reset denotes the timestamp when the\n   *          tokens reset.\n   */\n  public getRemaining = async (identifier: string): Promise<{\n    remaining: number;\n    reset: number;\n  }> => {\n    const pattern = [this.prefix, identifier].join(\":\");\n\n    return await this.limiter().getRemaining(this.ctx, pattern);\n  };\n\n  /**\n   * Checks if the identifier or the values in req are in the deny list cache.\n   * If so, returns the default denied response.\n   * \n   * Otherwise, calls redis to check the rate limit and deny list. Returns after\n   * resolving the result. Resolving is overriding the rate limit result if\n   * the some value is in deny list.\n   * \n   * @param identifier identifier to block\n   * @param req options with ip, user agent, country, rate and geo info\n   * @returns rate limit response\n   */\n  private getRatelimitResponse = async (\n    identifier: string,\n    req?: LimitOptions\n  ): Promise<RatelimitResponse> => {\n    const key = this.getKey(identifier);\n    const definedMembers = this.getDefinedMembers(identifier, req);\n\n    const deniedValue = checkDenyListCache(definedMembers)\n\n    const result: LimitPayload = deniedValue ? [defaultDeniedResponse(deniedValue), { deniedValue, invalidIpDenyList: false }] : (await Promise.all([\n      this.limiter().limit(this.ctx, key, req?.rate),\n      this.enableProtection\n        ? checkDenyList(this.primaryRedis, this.prefix, definedMembers)\n        : { deniedValue: undefined, invalidIpDenyList: false }\n    ]));\n\n    return resolveLimitPayload(this.primaryRedis, this.prefix, result, this.denyListThreshold)\n  };\n\n  /**\n   * Creates an array with the original response promise and a timeout promise\n   * if this.timeout > 0.\n   * \n   * @param response Ratelimit response promise\n   * @returns array with the response and timeout promise. also includes the timeout id\n   */\n  private applyTimeout = (response: Promise<RatelimitResponse>) => {\n    let newTimeoutId: any = null;\n    const responseArray: Array<Promise<RatelimitResponse>> = [response];\n\n    if (this.timeout > 0) {\n      const timeoutResponse = new Promise<RatelimitResponse>((resolve) => {\n        newTimeoutId = setTimeout(() => {\n          resolve({\n            success: true,\n            limit: 0,\n            remaining: 0,\n            reset: 0,\n            pending: Promise.resolve(),\n            reason: \"timeout\"\n          });\n        }, this.timeout);\n      })\n      responseArray.push(timeoutResponse);\n    }\n\n    return {\n      responseArray,\n      newTimeoutId,\n    }\n  }\n\n  /**\n   * submits analytics if this.analytics is set\n   * \n   * @param ratelimitResponse final rate limit response\n   * @param identifier identifier to submit\n   * @param req limit options\n   * @returns rate limit response after updating the .pending field\n   */\n  private submitAnalytics = (\n    ratelimitResponse: RatelimitResponse,\n    identifier: string,\n    req?: Pick<LimitOptions, \"geo\">,\n  ) => {\n    if (this.analytics) {\n      try {\n        const geo = req ? this.analytics.extractGeo(req) : undefined;\n        const analyticsP = this.analytics\n          .record({\n            identifier: ratelimitResponse.reason === \"denyList\" // if in denyList, use denied value as identifier\n              ? ratelimitResponse.deniedValue!\n              : identifier,\n            time: Date.now(),\n            success: ratelimitResponse.reason === \"denyList\" // if in denyList, label success as \"denied\"\n              ? \"denied\"\n              : ratelimitResponse.success,\n            ...geo,\n          })\n          .catch((error) => {\n            let errorMessage = \"Failed to record analytics\"\n            if (`${error}`.includes(\"WRONGTYPE\")) {\n              errorMessage = `\n    Failed to record analytics. See the information below:\n\n    This can occur when you uprade to Ratelimit version 1.1.2\n    or later from an earlier version.\n\n    This occurs simply because the way we store analytics data\n    has changed. To avoid getting this error, disable analytics\n    for *an hour*, then simply enable it back.\\n\n    `\n            }\n            console.warn(errorMessage, error);\n          });\n        ratelimitResponse.pending = Promise.all([ratelimitResponse.pending, analyticsP]);\n      } catch (error) {\n        console.warn(\"Failed to record analytics\", error);\n      };\n    };\n    return ratelimitResponse;\n  }\n\n  private getKey = (identifier: string): string => {\n    return [this.prefix, identifier].join(\":\");\n  }\n\n  /**\n   * returns a list of defined values from\n   * [identifier, req.ip, req.userAgent, req.country]\n   * \n   * @param identifier identifier\n   * @param req limit options\n   * @returns list of defined values\n   */\n  private getDefinedMembers = (\n    identifier: string,\n    req?: Pick<LimitOptions, \"ip\" | \"userAgent\" | \"country\">\n  ): string[] => {\n    const members = [identifier, req?.ip, req?.userAgent, req?.country];\n    return (members as string[]).filter(Boolean);\n  }\n}\n","import { Cache } from \"./cache\";\nimport type { Duration } from \"./duration\";\nimport { ms } from \"./duration\";\nimport { safeEval } from \"./hash\";\nimport { RESET_SCRIPT, SCRIPTS } from \"./lua-scripts/hash\";\n\n\nimport { Ratelimit } from \"./ratelimit\";\nimport type { Algorithm, MultiRegionContext } from \"./types\";\n\nimport type { Redis } from \"./types\";\n\nfunction randomId(): string {\n  let result = \"\";\n  const characters = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n  const charactersLength = characters.length;\n  for (let i = 0; i < 16; i++) {\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\n  }\n  return result;\n}\n\nexport type MultiRegionRatelimitConfig = {\n  /**\n   * Instances of `@upstash/redis`\n   * @see https://github.com/upstash/upstash-redis#quick-start\n   */\n  redis: Redis[];\n  /**\n   * The ratelimiter function to use.\n   *\n   * Choose one of the predefined ones or implement your own.\n   * Available algorithms are exposed via static methods:\n   * - MultiRegionRatelimit.fixedWindow\n   */\n  limiter: Algorithm<MultiRegionContext>;\n  /**\n   * All keys in redis are prefixed with this.\n   *\n   * @default `@upstash/ratelimit`\n   */\n  prefix?: string;\n\n  /**\n   * If enabled, the ratelimiter will keep a global cache of identifiers, that have\n   * exhausted their ratelimit. In serverless environments this is only possible if\n   * you create the ratelimiter instance outside of your handler function. While the\n   * function is still hot, the ratelimiter can block requests without having to\n   * request data from redis, thus saving time and money.\n   *\n   * Whenever an identifier has exceeded its limit, the ratelimiter will add it to an\n   * internal list together with its reset timestamp. If the same identifier makes a\n   * new request before it is reset, we can immediately reject it.\n   *\n   * Set to `false` to disable.\n   *\n   * If left undefined, a map is created automatically, but it can only work\n   * if the map or the ratelimit instance is created outside your serverless function handler.\n   */\n  ephemeralCache?: Map<string, number> | false;\n\n  /**\n   * If set, the ratelimiter will allow requests to pass after this many milliseconds.\n   *\n   * Use this if you want to allow requests in case of network problems\n   */\n  timeout?: number;\n\n  /**\n   * If enabled, the ratelimiter will store analytics data in redis, which you can check out at\n   * https://console.upstash.com/ratelimit\n   *\n   * @default false\n   */\n  analytics?: boolean;\n\n  /**\n   * If enabled, lua scripts will be sent to Redis with SCRIPT LOAD durint the first request.\n   * In the subsequent requests, hash of the script will be used to invoke it\n   * \n   * @default true\n   */\n  cacheScripts?: boolean;\n};\n\n/**\n * Ratelimiter using serverless redis from https://upstash.com/\n *\n * @example\n * ```ts\n * const { limit } = new MultiRegionRatelimit({\n *    redis: Redis.fromEnv(),\n *    limiter: MultiRegionRatelimit.fixedWindow(\n *      10,     // Allow 10 requests per window of 30 minutes\n *      \"30 m\", // interval of 30 minutes\n *    )\n * })\n *\n * ```\n */\nexport class MultiRegionRatelimit extends Ratelimit<MultiRegionContext> {\n  /**\n   * Create a new Ratelimit instance by providing a `@upstash/redis` instance and the algorithn of your choice.\n   */\n  constructor(config: MultiRegionRatelimitConfig) {\n    super({\n      prefix: config.prefix,\n      limiter: config.limiter,\n      timeout: config.timeout,\n      analytics: config.analytics,\n      ctx: {\n        regionContexts: config.redis.map(redis => ({\n          redis: redis,\n        })),\n        cache: config.ephemeralCache ? new Cache(config.ephemeralCache) : undefined,\n      },\n    });\n  }\n\n  /**\n   * Each request inside a fixed time increases a counter.\n   * Once the counter reaches the maximum allowed number, all further requests are\n   * rejected.\n   *\n   * **Pro:**\n   *\n   * - Newer requests are not starved by old ones.\n   * - Low storage cost.\n   *\n   * **Con:**\n   *\n   * A burst of requests near the boundary of a window can result in a very\n   * high request rate because two windows will be filled with requests quickly.\n   *\n   * @param tokens - How many requests a user can make in each time window.\n   * @param window - A fixed timeframe\n   */\n  static fixedWindow(\n    /**\n     * How many requests are allowed per window.\n     */\n    tokens: number,\n    /**\n     * The duration in which `tokens` requests are allowed.\n     */\n    window: Duration,\n  ): Algorithm<MultiRegionContext> {\n    const windowDuration = ms(window);\n\n    return () => ({\n      async limit(ctx: MultiRegionContext, identifier: string, rate?: number) {\n        if (ctx.cache) {\n          const { blocked, reset } = ctx.cache.isBlocked(identifier);\n          if (blocked) {\n            return {\n              success: false,\n              limit: tokens,\n              remaining: 0,\n              reset: reset,\n              pending: Promise.resolve(),\n              reason: \"cacheBlock\"\n            };\n          }\n        }\n\n        const requestId = randomId();\n        const bucket = Math.floor(Date.now() / windowDuration);\n        const key = [identifier, bucket].join(\":\");\n        const incrementBy = rate ? Math.max(1, rate) : 1;\n\n        const dbs: { redis: Redis; request: Promise<string[]> }[] = ctx.regionContexts.map((regionContext) => ({\n          redis: regionContext.redis,\n          request: safeEval(\n            regionContext,\n            SCRIPTS.multiRegion.fixedWindow.limit,\n            [key],\n            [requestId, windowDuration, incrementBy],\n          ) as Promise<string[]>,\n        }));\n\n        // The firstResponse is an array of string at every EVEN indexes and rate at which the tokens are used at every ODD indexes\n        const firstResponse = await Promise.any(dbs.map((s) => s.request));\n\n        const usedTokens = firstResponse.reduce((accTokens: number, usedToken, index) => {\n          let parsedToken = 0;\n          if (index % 2) {\n            parsedToken = Number.parseInt(usedToken);\n          }\n\n          return accTokens + parsedToken;\n        }, 0);\n\n        const remaining = tokens - usedTokens;\n\n        /**\n         * If the length between two databases does not match, we sync the two databases\n         */\n        async function sync() {\n          const individualIDs = await Promise.all(dbs.map((s) => s.request));\n\n          const allIDs = [...new Set(\n            individualIDs.flat()\n              .reduce((acc: string[], curr, index) => {\n                if (index % 2 === 0) {\n                  acc.push(curr);\n                }\n                return acc;\n              }, []),\n          ).values()];\n\n          for (const db of dbs) {\n            const usedDbTokensRequest = await db.request;\n            const usedDbTokens = usedDbTokensRequest.reduce(\n              (accTokens: number, usedToken, index) => {\n                let parsedToken = 0;\n                if (index % 2) {\n                  parsedToken = Number.parseInt(usedToken);\n                }\n\n                return accTokens + parsedToken;\n              },\n              0,\n            );\n\n            const dbIdsRequest = await db.request;\n            const dbIds = dbIdsRequest.reduce((ids: string[], currentId, index) => {\n              if (index % 2 === 0) {\n                ids.push(currentId);\n              }\n              return ids;\n            }, []);\n            /**\n             * If the bucket in this db is already full, it doesn't matter which ids it contains.\n             * So we do not have to sync.\n             */\n            if (usedDbTokens >= tokens) {\n              continue;\n            }\n            const diff = allIDs.filter((id) => !dbIds.includes(id));\n            /**\n             * Don't waste a request if there is nothing to send\n             */\n            if (diff.length === 0) {\n              continue;\n            }\n\n            for (const requestId of diff) {\n              await db.redis.hset(key, { [requestId]: incrementBy });\n            }\n          }\n        }\n\n        /**\n         * Do not await sync. This should not run in the critical path.\n         */\n\n        const success = remaining > 0;\n        const reset = (bucket + 1) * windowDuration;\n\n        if (ctx.cache && !success) {\n          ctx.cache.blockUntil(identifier, reset);\n        }\n        return {\n          success,\n          limit: tokens,\n          remaining,\n          reset,\n          pending: sync(),\n        };\n      },\n      async getRemaining(ctx: MultiRegionContext, identifier: string) {\n        const bucket = Math.floor(Date.now() / windowDuration);\n        const key = [identifier, bucket].join(\":\");\n\n        const dbs: { redis: Redis; request: Promise<string[]> }[] = ctx.regionContexts.map((regionContext) => ({\n          redis: regionContext.redis,\n          request: safeEval(\n            regionContext,\n            SCRIPTS.multiRegion.fixedWindow.getRemaining,\n            [key],\n            [null]\n          ) as Promise<string[]>,\n        }));\n\n        // The firstResponse is an array of string at every EVEN indexes and rate at which the tokens are used at every ODD indexes\n        const firstResponse = await Promise.any(dbs.map((s) => s.request));\n        const usedTokens = firstResponse.reduce((accTokens: number, usedToken, index) => {\n          let parsedToken = 0;\n          if (index % 2) {\n            parsedToken = Number.parseInt(usedToken);\n          }\n\n          return accTokens + parsedToken;\n        }, 0);\n\n        return {\n          remaining: Math.max(0, tokens - usedTokens),\n          reset: (bucket + 1) * windowDuration\n        };\n      },\n      async resetTokens(ctx: MultiRegionContext, identifier: string) {\n        const pattern = [identifier, \"*\"].join(\":\");\n        if (ctx.cache) {\n          ctx.cache.pop(identifier)\n        }\n\n        await Promise.all(ctx.regionContexts.map((regionContext) => {\n          safeEval(\n            regionContext,\n            RESET_SCRIPT,\n            [pattern],\n            [null]\n          );\n        }))\n      },\n    });\n  }\n\n  /**\n   * Combined approach of `slidingLogs` and `fixedWindow` with lower storage\n   * costs than `slidingLogs` and improved boundary behavior by calculating a\n   * weighted score between two windows.\n   *\n   * **Pro:**\n   *\n   * Good performance allows this to scale to very high loads.\n   *\n   * **Con:**\n   *\n   * Nothing major.\n   *\n   * @param tokens - How many requests a user can make in each time window.\n   * @param window - The duration in which the user can max X requests.\n   */\n  static slidingWindow(\n    /**\n     * How many requests are allowed per window.\n     */\n    tokens: number,\n    /**\n     * The duration in which `tokens` requests are allowed.\n     */\n    window: Duration,\n  ): Algorithm<MultiRegionContext> {\n    const windowSize = ms(window);\n\n    const windowDuration = ms(window);\n\n    return () => ({\n      async limit(ctx: MultiRegionContext, identifier: string, rate?: number) {\n        if (ctx.cache) {\n          const { blocked, reset } = ctx.cache.isBlocked(identifier);\n          if (blocked) {\n            return {\n              success: false,\n              limit: tokens,\n              remaining: 0,\n              reset: reset,\n              pending: Promise.resolve(),\n              reason: \"cacheBlock\"\n            };\n          }\n        }\n\n        const requestId = randomId();\n        const now = Date.now();\n\n        const currentWindow = Math.floor(now / windowSize);\n        const currentKey = [identifier, currentWindow].join(\":\");\n        const previousWindow = currentWindow - 1;\n        const previousKey = [identifier, previousWindow].join(\":\");\n        const incrementBy = rate ? Math.max(1, rate) : 1;\n\n        const dbs = ctx.regionContexts.map((regionContext) => ({\n          redis: regionContext.redis,\n          request: safeEval(\n            regionContext,\n            SCRIPTS.multiRegion.slidingWindow.limit,\n            [currentKey, previousKey],\n            [tokens, now, windowDuration, requestId, incrementBy],\n            // lua seems to return `1` for true and `null` for false\n          ) as Promise<[string[], string[], 1 | null]>,\n        }));\n\n        const percentageInCurrent = (now % windowDuration) / windowDuration;\n        const [current, previous, success] = await Promise.any(dbs.map((s) => s.request));\n\n        // in the case of success, the new request is not included in the current array.\n        // add it manually\n        if (success) {\n          current.push(requestId, incrementBy.toString())\n        }\n\n        const previousUsedTokens = previous.reduce((accTokens: number, usedToken, index) => {\n          let parsedToken = 0;\n          if (index % 2) {\n            parsedToken = Number.parseInt(usedToken);\n          }\n\n          return accTokens + parsedToken;\n        }, 0);\n\n        const currentUsedTokens = current.reduce((accTokens: number, usedToken, index) => {\n          let parsedToken = 0;\n          if (index % 2) {\n            parsedToken = Number.parseInt(usedToken);\n          }\n\n          return accTokens + parsedToken;\n        }, 0);\n\n        const previousPartialUsed = Math.ceil(previousUsedTokens * (1 - percentageInCurrent));\n\n        const usedTokens = previousPartialUsed + currentUsedTokens;\n\n        const remaining = tokens - usedTokens;\n\n        /**\n         * If a database differs from the consensus, we sync it\n         */\n        async function sync() {\n          const res = await Promise.all(dbs.map((s) => s.request));\n\n          const allCurrentIds = [...new Set(\n            res\n              .flatMap(([current]) => current)\n              .reduce((acc: string[], curr, index) => {\n                if (index % 2 === 0) {\n                  acc.push(curr);\n                }\n                return acc;\n              }, []),\n          ).values()];\n\n          for (const db of dbs) {\n            const [current, _previous, _success] = await db.request;\n            const dbIds = current.reduce((ids: string[], currentId, index) => {\n              if (index % 2 === 0) {\n                ids.push(currentId);\n              }\n              return ids;\n            }, []);\n\n            const usedDbTokens = current.reduce((accTokens: number, usedToken, index) => {\n              let parsedToken = 0;\n              if (index % 2) {\n                parsedToken = Number.parseInt(usedToken);\n              }\n\n              return accTokens + parsedToken;\n            }, 0);\n            /**\n             * If the bucket in this db is already full, it doesn't matter which ids it contains.\n             * So we do not have to sync.\n             */\n            if (usedDbTokens >= tokens) {\n              continue;\n            }\n            const diff = allCurrentIds.filter((id) => !dbIds.includes(id));\n            /**\n             * Don't waste a request if there is nothing to send\n             */\n            if (diff.length === 0) {\n              continue;\n            }\n\n            for (const requestId of diff) {\n              await db.redis.hset(currentKey, { [requestId]: incrementBy });\n            }\n          }\n        }\n\n        // const success = remaining >= 0;\n        const reset = (currentWindow + 1) * windowDuration;\n        if (ctx.cache && !success) {\n          ctx.cache.blockUntil(identifier, reset);\n        }\n        return {\n          success: Boolean(success),\n          limit: tokens,\n          remaining: Math.max(0, remaining),\n          reset,\n          pending: sync(),\n        };\n      },\n      async getRemaining(ctx: MultiRegionContext, identifier: string) {\n        const now = Date.now();\n\n        const currentWindow = Math.floor(now / windowSize);\n        const currentKey = [identifier, currentWindow].join(\":\");\n        const previousWindow = currentWindow - 1;\n        const previousKey = [identifier, previousWindow].join(\":\");\n\n        const dbs = ctx.regionContexts.map((regionContext) => ({\n          redis: regionContext.redis,\n          request: safeEval(\n            regionContext,\n            SCRIPTS.multiRegion.slidingWindow.getRemaining,\n            [currentKey, previousKey],\n            [now, windowSize],\n            // lua seems to return `1` for true and `null` for false\n          ) as Promise<number>,\n        }));\n\n        const usedTokens = await Promise.any(dbs.map((s) => s.request));\n        return {\n          remaining: Math.max(0, tokens - usedTokens),\n          reset: (currentWindow + 1) * windowSize\n        };\n      },\n      async resetTokens(ctx: MultiRegionContext, identifier: string) {\n        const pattern = [identifier, \"*\"].join(\":\");\n        if (ctx.cache) {\n          ctx.cache.pop(identifier)\n        }\n\n\n        await Promise.all(ctx.regionContexts.map((regionContext) => {\n          safeEval(\n            regionContext,\n            RESET_SCRIPT,\n            [pattern],\n            [null]\n          );\n        }))\n      },\n    });\n  }\n}\n","import type { Duration } from \"./duration\";\nimport { ms } from \"./duration\";\nimport { safeEval } from \"./hash\";\nimport { RESET_SCRIPT, SCRIPTS } from \"./lua-scripts/hash\";\nimport { tokenBucketIdentifierNotFound } from \"./lua-scripts/single\";\n\nimport { Ratelimit } from \"./ratelimit\";\nimport type { Algorithm, RegionContext } from \"./types\";\nimport type { Redis as RedisCore } from \"./types\";\n\n// Fix for https://github.com/upstash/ratelimit-js/issues/125\ntype Redis = Pick<RedisCore, \"get\" | \"set\">\n\nexport type RegionRatelimitConfig = {\n  /**\n   * Instance of `@upstash/redis`\n   * @see https://github.com/upstash/upstash-redis#quick-start\n   */\n  redis: Redis;\n  /**\n   * The ratelimiter function to use.\n   *\n   * Choose one of the predefined ones or implement your own.\n   * Available algorithms are exposed via static methods:\n   * - Ratelimiter.fixedWindow\n   * - Ratelimiter.slidingWindow\n   * - Ratelimiter.tokenBucket\n   */\n  limiter: Algorithm<RegionContext>;\n  /**\n   * All keys in redis are prefixed with this.\n   *\n   * @default `@upstash/ratelimit`\n   */\n  prefix?: string;\n\n  /**\n   * If enabled, the ratelimiter will keep a global cache of identifiers, that have\n   * exhausted their ratelimit. In serverless environments this is only possible if\n   * you create the ratelimiter instance outside of your handler function. While the\n   * function is still hot, the ratelimiter can block requests without having to\n   * request data from redis, thus saving time and money.\n   *\n   * Whenever an identifier has exceeded its limit, the ratelimiter will add it to an\n   * internal list together with its reset timestamp. If the same identifier makes a\n   * new request before it is reset, we can immediately reject it.\n   *\n   * Set to `false` to disable.\n   *\n   * If left undefined, a map is created automatically, but it can only work\n   * if the map or the ratelimit instance is created outside your serverless function handler.\n   */\n  ephemeralCache?: Map<string, number> | false;\n\n  /**\n   * If set, the ratelimiter will allow requests to pass after this many milliseconds.\n   *\n   * Use this if you want to allow requests in case of network problems\n   */\n  timeout?: number;\n\n  /**\n   * If enabled, the ratelimiter will store analytics data in redis, which you can check out at\n   * https://console.upstash.com/ratelimit\n   *\n   * @default false\n   */\n  analytics?: boolean;\n\n  /**\n   * @deprecated Has no affect since v2.0.3. Instead, hash values of scripts are\n   * hardcoded in the sdk and it attempts to run the script using EVALSHA (with the hash).\n   * If it fails, runs script load.\n   * \n   * Previously, if enabled, lua scripts were sent to Redis with SCRIPT LOAD durint the first request.\n   * In the subsequent requests, hash of the script would be used to invoke the scripts\n   * \n   * @default true\n   */\n  cacheScripts?: boolean;\n\n  /**\n   * @default false\n   */\n  enableProtection?: boolean\n\n  /**\n   * @default 6\n   */\n  denyListThreshold?: number\n};\n\n/**\n * Ratelimiter using serverless redis from https://upstash.com/\n *\n * @example\n * ```ts\n * const { limit } = new Ratelimit({\n *    redis: Redis.fromEnv(),\n *    limiter: Ratelimit.slidingWindow(\n *      \"30 m\", // interval of 30 minutes\n *      10,     // Allow 10 requests per window of 30 minutes\n *    )\n * })\n *\n * ```\n */\nexport class RegionRatelimit extends Ratelimit<RegionContext> {\n  /**\n   * Create a new Ratelimit instance by providing a `@upstash/redis` instance and the algorithm of your choice.\n   */\n\n  constructor(config: RegionRatelimitConfig) {\n    super({\n      prefix: config.prefix,\n      limiter: config.limiter,\n      timeout: config.timeout,\n      analytics: config.analytics,\n      ctx: {\n        redis: config.redis as RedisCore,\n      },\n      ephemeralCache: config.ephemeralCache,\n      enableProtection: config.enableProtection,\n      denyListThreshold: config.denyListThreshold\n    });\n  }\n\n  /**\n   * Each request inside a fixed time increases a counter.\n   * Once the counter reaches the maximum allowed number, all further requests are\n   * rejected.\n   *\n   * **Pro:**\n   *\n   * - Newer requests are not starved by old ones.\n   * - Low storage cost.\n   *\n   * **Con:**\n   *\n   * A burst of requests near the boundary of a window can result in a very\n   * high request rate because two windows will be filled with requests quickly.\n   *\n   * @param tokens - How many requests a user can make in each time window.\n   * @param window - A fixed timeframe\n   */\n  static fixedWindow(\n    /**\n     * How many requests are allowed per window.\n     */\n    tokens: number,\n    /**\n     * The duration in which `tokens` requests are allowed.\n     */\n    window: Duration,\n  ): Algorithm<RegionContext> {\n    const windowDuration = ms(window);\n    return () => ({\n      async limit(ctx: RegionContext, identifier: string, rate?: number) {\n        const bucket = Math.floor(Date.now() / windowDuration);\n        const key = [identifier, bucket].join(\":\");\n        if (ctx.cache) {\n          const { blocked, reset } = ctx.cache.isBlocked(identifier);\n          if (blocked) {\n            return {\n              success: false,\n              limit: tokens,\n              remaining: 0,\n              reset: reset,\n              pending: Promise.resolve(),\n              reason: \"cacheBlock\"\n            };\n          }\n        }\n\n        const incrementBy = rate ? Math.max(1, rate) : 1;\n\n        const usedTokensAfterUpdate = await safeEval(\n          ctx,\n          SCRIPTS.singleRegion.fixedWindow.limit,\n          [key],\n          [windowDuration, incrementBy],\n        ) as number;\n\n        const success = usedTokensAfterUpdate <= tokens;\n\n        const remainingTokens = Math.max(0, tokens - usedTokensAfterUpdate);\n\n        const reset = (bucket + 1) * windowDuration;\n        if (ctx.cache && !success) {\n          ctx.cache.blockUntil(identifier, reset);\n        }\n\n        return {\n          success,\n          limit: tokens,\n          remaining: remainingTokens,\n          reset,\n          pending: Promise.resolve(),\n        };\n      },\n      async getRemaining(ctx: RegionContext, identifier: string) {\n        const bucket = Math.floor(Date.now() / windowDuration);\n        const key = [identifier, bucket].join(\":\");\n\n        const usedTokens = await safeEval(\n          ctx,\n          SCRIPTS.singleRegion.fixedWindow.getRemaining,\n          [key],\n          [null],\n        ) as number;\n\n        return {\n          remaining: Math.max(0, tokens - usedTokens),\n          reset: (bucket + 1) * windowDuration\n        };\n      },\n      async resetTokens(ctx: RegionContext, identifier: string) {\n        const pattern = [identifier, \"*\"].join(\":\");\n        if (ctx.cache) {\n          ctx.cache.pop(identifier)\n        }\n\n        await safeEval(\n          ctx,\n          RESET_SCRIPT,\n          [pattern],\n          [null],\n        ) as number;\n      },\n    });\n  }\n\n  /**\n   * Combined approach of `slidingLogs` and `fixedWindow` with lower storage\n   * costs than `slidingLogs` and improved boundary behavior by calculating a\n   * weighted score between two windows.\n   *\n   * **Pro:**\n   *\n   * Good performance allows this to scale to very high loads.\n   *\n   * **Con:**\n   *\n   * Nothing major.\n   *\n   * @param tokens - How many requests a user can make in each time window.\n   * @param window - The duration in which the user can max X requests.\n   */\n  static slidingWindow(\n    /**\n     * How many requests are allowed per window.\n     */\n    tokens: number,\n    /**\n     * The duration in which `tokens` requests are allowed.\n     */\n    window: Duration,\n  ): Algorithm<RegionContext> {\n    const windowSize = ms(window);\n    return () => ({\n      async limit(ctx: RegionContext, identifier: string, rate?: number) {\n        const now = Date.now();\n\n        const currentWindow = Math.floor(now / windowSize);\n        const currentKey = [identifier, currentWindow].join(\":\");\n        const previousWindow = currentWindow - 1;\n        const previousKey = [identifier, previousWindow].join(\":\");\n\n        if (ctx.cache) {\n          const { blocked, reset } = ctx.cache.isBlocked(identifier);\n          if (blocked) {\n            return {\n              success: false,\n              limit: tokens,\n              remaining: 0,\n              reset: reset,\n              pending: Promise.resolve(),\n              reason: \"cacheBlock\"\n            };\n          }\n        }\n\n        const incrementBy = rate ? Math.max(1, rate) : 1;\n\n        const remainingTokens = await safeEval(\n          ctx,\n          SCRIPTS.singleRegion.slidingWindow.limit,\n          [currentKey, previousKey],\n          [tokens, now, windowSize, incrementBy],\n        ) as number;\n\n        const success = remainingTokens >= 0;\n\n        const reset = (currentWindow + 1) * windowSize;\n        if (ctx.cache && !success) {\n          ctx.cache.blockUntil(identifier, reset);\n        }\n        return {\n          success,\n          limit: tokens,\n          remaining: Math.max(0, remainingTokens),\n          reset,\n          pending: Promise.resolve(),\n        };\n      },\n      async getRemaining(ctx: RegionContext, identifier: string) {\n        const now = Date.now();\n        const currentWindow = Math.floor(now / windowSize);\n        const currentKey = [identifier, currentWindow].join(\":\");\n        const previousWindow = currentWindow - 1;\n        const previousKey = [identifier, previousWindow].join(\":\");\n\n        const usedTokens = await safeEval(\n          ctx,\n          SCRIPTS.singleRegion.slidingWindow.getRemaining,\n          [currentKey, previousKey],\n          [now, windowSize],\n        ) as number;\n\n        return {\n          remaining: Math.max(0, tokens - usedTokens),\n          reset: (currentWindow + 1) * windowSize\n        }\n      },\n      async resetTokens(ctx: RegionContext, identifier: string) {\n        const pattern = [identifier, \"*\"].join(\":\");\n        if (ctx.cache) {\n          ctx.cache.pop(identifier)\n        }\n\n        await safeEval(\n          ctx,\n          RESET_SCRIPT,\n          [pattern],\n          [null],\n        ) as number;\n      },\n    });\n  }\n\n  /**\n   * You have a bucket filled with `{maxTokens}` tokens that refills constantly\n   * at `{refillRate}` per `{interval}`.\n   * Every request will remove one token from the bucket and if there is no\n   * token to take, the request is rejected.\n   *\n   * **Pro:**\n   *\n   * - Bursts of requests are smoothed out and you can process them at a constant\n   * rate.\n   * - Allows to set a higher initial burst limit by setting `maxTokens` higher\n   * than `refillRate`\n   */\n  static tokenBucket(\n    /**\n     * How many tokens are refilled per `interval`\n     *\n     * An interval of `10s` and refillRate of 5 will cause a new token to be added every 2 seconds.\n     */\n    refillRate: number,\n    /**\n     * The interval for the `refillRate`\n     */\n    interval: Duration,\n    /**\n     * Maximum number of tokens.\n     * A newly created bucket starts with this many tokens.\n     * Useful to allow higher burst limits.\n     */\n    maxTokens: number,\n  ): Algorithm<RegionContext> {\n    const intervalDuration = ms(interval);\n    return () => ({\n      async limit(ctx: RegionContext, identifier: string, rate?: number) {\n        if (ctx.cache) {\n          const { blocked, reset } = ctx.cache.isBlocked(identifier);\n          if (blocked) {\n            return {\n              success: false,\n              limit: maxTokens,\n              remaining: 0,\n              reset: reset,\n              pending: Promise.resolve(),\n              reason: \"cacheBlock\"\n            };\n          }\n        }\n\n        const now = Date.now();\n\n        const incrementBy = rate ? Math.max(1, rate) : 1;\n\n        const [remaining, reset] = await safeEval(\n          ctx,\n          SCRIPTS.singleRegion.tokenBucket.limit,\n          [identifier],\n          [maxTokens, intervalDuration, refillRate, now, incrementBy],\n        ) as [number, number];\n\n        const success = remaining >= 0;\n        if (ctx.cache && !success) {\n          ctx.cache.blockUntil(identifier, reset);\n        }\n\n        return {\n          success,\n          limit: maxTokens,\n          remaining,\n          reset,\n          pending: Promise.resolve(),\n        };\n      },\n      async getRemaining(ctx: RegionContext, identifier: string) {\n\n        const [remainingTokens, refilledAt] = await safeEval(\n          ctx,\n          SCRIPTS.singleRegion.tokenBucket.getRemaining,\n          [identifier],\n          [maxTokens],\n        ) as [number, number];\n\n        const freshRefillAt = Date.now() + intervalDuration\n        const identifierRefillsAt = refilledAt + intervalDuration\n\n        return {\n          remaining: remainingTokens,\n          reset: refilledAt === tokenBucketIdentifierNotFound ? freshRefillAt : identifierRefillsAt\n        };\n      },\n      async resetTokens(ctx: RegionContext, identifier: string) {\n        const pattern = identifier;\n        if (ctx.cache) {\n          ctx.cache.pop(identifier)\n        }\n\n        await safeEval(\n          ctx,\n          RESET_SCRIPT,\n          [pattern],\n          [null],\n        ) as number;\n      },\n    });\n  }\n  /**\n   * cachedFixedWindow first uses the local cache to decide if a request may pass and then updates\n   * it asynchronously.\n   * This is experimental and not yet recommended for production use.\n   *\n   * @experimental\n   *\n   * Each request inside a fixed time increases a counter.\n   * Once the counter reaches the maximum allowed number, all further requests are\n   * rejected.\n   *\n   * **Pro:**\n   *\n   * - Newer requests are not starved by old ones.\n   * - Low storage cost.\n   *\n   * **Con:**\n   *\n   * A burst of requests near the boundary of a window can result in a very\n   * high request rate because two windows will be filled with requests quickly.\n   *\n   * @param tokens - How many requests a user can make in each time window.\n   * @param window - A fixed timeframe\n   */\n  static cachedFixedWindow(\n    /**\n     * How many requests are allowed per window.\n     */\n    tokens: number,\n    /**\n     * The duration in which `tokens` requests are allowed.\n     */\n    window: Duration,\n  ): Algorithm<RegionContext> {\n    const windowDuration = ms(window);\n\n    return () => ({\n      async limit(ctx: RegionContext, identifier: string, rate?: number) {\n        if (!ctx.cache) {\n          throw new Error(\"This algorithm requires a cache\");\n        }\n        const bucket = Math.floor(Date.now() / windowDuration);\n        const key = [identifier, bucket].join(\":\");\n        const reset = (bucket + 1) * windowDuration;\n        const incrementBy = rate ? Math.max(1, rate) : 1;\n\n        const hit = typeof ctx.cache.get(key) === \"number\";\n        if (hit) {\n          const cachedTokensAfterUpdate = ctx.cache.incr(key);\n          const success = cachedTokensAfterUpdate < tokens;\n\n          const pending = success\n            ? safeEval(\n              ctx,\n              SCRIPTS.singleRegion.cachedFixedWindow.limit,\n              [key],\n              [windowDuration, incrementBy]\n            )\n            : Promise.resolve();\n\n          return {\n            success,\n            limit: tokens,\n            remaining: tokens - cachedTokensAfterUpdate,\n            reset: reset,\n            pending,\n          };\n        }\n\n        const usedTokensAfterUpdate = await safeEval(\n          ctx,\n          SCRIPTS.singleRegion.cachedFixedWindow.limit,\n          [key],\n          [windowDuration, incrementBy]\n        ) as number;\n        ctx.cache.set(key, usedTokensAfterUpdate);\n        const remaining = tokens - usedTokensAfterUpdate;\n\n        return {\n          success: remaining >= 0,\n          limit: tokens,\n          remaining,\n          reset: reset,\n          pending: Promise.resolve(),\n        };\n      },\n      async getRemaining(ctx: RegionContext, identifier: string) {\n        if (!ctx.cache) {\n          throw new Error(\"This algorithm requires a cache\");\n        }\n\n        const bucket = Math.floor(Date.now() / windowDuration);\n        const key = [identifier, bucket].join(\":\");\n\n        const hit = typeof ctx.cache.get(key) === \"number\";\n        if (hit) {\n          const cachedUsedTokens = ctx.cache.get(key) ?? 0;\n          return {\n            remaining: Math.max(0, tokens - cachedUsedTokens),\n            reset: (bucket + 1) * windowDuration\n          };\n        }\n\n        const usedTokens = await safeEval(\n          ctx,\n          SCRIPTS.singleRegion.cachedFixedWindow.getRemaining,\n          [key],\n          [null],\n        ) as number;\n        return {\n          remaining: Math.max(0, tokens - usedTokens),\n          reset: (bucket + 1) * windowDuration\n        };\n      },\n      async resetTokens(ctx: RegionContext, identifier: string) {\n        // Empty the cache\n        if (!ctx.cache) {\n          throw new Error(\"This algorithm requires a cache\");\n        }\n\n        const bucket = Math.floor(Date.now() / windowDuration);\n        const key = [identifier, bucket].join(\":\");\n        ctx.cache.pop(key)\n\n        const pattern = [identifier, \"*\"].join(\":\");\n\n        await safeEval(\n          ctx,\n          RESET_SCRIPT,\n          [pattern],\n          [null],\n        ) as number;\n      },\n    });\n  }\n}\n","import { AppRouteRouteModule } from \"next/dist/esm/server/route-modules/app-route/module.compiled\";\nimport { RouteKind } from \"next/dist/esm/server/route-kind\";\nimport { patchFetch as _patchFetch } from \"next/dist/esm/server/lib/patch-fetch\";\nimport { addRequestMeta, getRequestMeta } from \"next/dist/esm/server/request-meta\";\nimport { getTracer, SpanKind } from \"next/dist/esm/server/lib/trace/tracer\";\nimport { setReferenceManifestsSingleton } from \"next/dist/esm/server/app-render/encryption-utils\";\nimport { createServerModuleMap } from \"next/dist/esm/server/app-render/action-utils\";\nimport { normalizeAppPath } from \"next/dist/esm/shared/lib/router/utils/app-paths\";\nimport { NodeNextRequest, NodeNextResponse } from \"next/dist/esm/server/base-http/node\";\nimport { NextRequestAdapter, signalFromNodeResponse } from \"next/dist/esm/server/web/spec-extension/adapters/next-request\";\nimport { BaseServerSpan } from \"next/dist/esm/server/lib/trace/constants\";\nimport { getRevalidateReason } from \"next/dist/esm/server/instrumentation/utils\";\nimport { sendResponse } from \"next/dist/esm/server/send-response\";\nimport { fromNodeOutgoingHttpHeaders, toNodeOutgoingHttpHeaders } from \"next/dist/esm/server/web/utils\";\nimport { getCacheControlHeader } from \"next/dist/esm/server/lib/cache-control\";\nimport { INFINITE_CACHE, NEXT_CACHE_TAGS_HEADER } from \"next/dist/esm/lib/constants\";\nimport { NoFallbackError } from \"next/dist/esm/shared/lib/no-fallback-error.external\";\nimport { CachedRouteKind } from \"next/dist/esm/server/response-cache\";\nimport * as userland from \"INNER_APP_ROUTE\";\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"standalone\"\nconst routeModule = new AppRouteRouteModule({\n    definition: {\n        kind: RouteKind.APP_ROUTE,\n        page: \"/api/ocr/route\",\n        pathname: \"/api/ocr\",\n        filename: \"route\",\n        bundlePath: \"\"\n    },\n    distDir: process.env.__NEXT_RELATIVE_DIST_DIR || '',\n    relativeProjectDir: process.env.__NEXT_RELATIVE_PROJECT_DIR || '',\n    resolvedPagePath: \"[project]/app/api/ocr/route.ts\",\n    nextConfigOutput,\n    userland\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return _patchFetch({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\nexport { routeModule, workAsyncStorage, workUnitAsyncStorage, serverHooks, patchFetch,  };\nexport async function handler(req, res, ctx) {\n    if (routeModule.isDev) {\n        addRequestMeta(req, 'devRequestTimingInternalsEnd', process.hrtime.bigint());\n    }\n    let srcPage = \"/api/ocr/route\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (process.env.TURBOPACK) {\n        srcPage = srcPage.replace(/\\/index$/, '') || '/';\n    } else if (srcPage === '/index') {\n        // we always normalize /index specifically\n        srcPage = '/';\n    }\n    const multiZoneDraftMode = process.env.__NEXT_MULTI_ZONE_DRAFT_MODE;\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage,\n        multiZoneDraftMode\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return null;\n    }\n    const { buildId, params, nextConfig, parsedUrl, isDraftMode, prerenderManifest, routerServerContext, isOnDemandRevalidate, revalidateOnlyGenerated, resolvedPathname, clientReferenceManifest, serverActionsManifest } = prepareResult;\n    const normalizedSrcPage = normalizeAppPath(srcPage);\n    let isIsr = Boolean(prerenderManifest.dynamicRoutes[normalizedSrcPage] || prerenderManifest.routes[resolvedPathname]);\n    const render404 = async ()=>{\n        // TODO: should route-module itself handle rendering the 404\n        if (routerServerContext == null ? void 0 : routerServerContext.render404) {\n            await routerServerContext.render404(req, res, parsedUrl, false);\n        } else {\n            res.end('This page could not be found');\n        }\n        return null;\n    };\n    if (isIsr && !isDraftMode) {\n        const isPrerendered = Boolean(prerenderManifest.routes[resolvedPathname]);\n        const prerenderInfo = prerenderManifest.dynamicRoutes[normalizedSrcPage];\n        if (prerenderInfo) {\n            if (prerenderInfo.fallback === false && !isPrerendered) {\n                if (nextConfig.experimental.adapterPath) {\n                    return await render404();\n                }\n                throw new NoFallbackError();\n            }\n        }\n    }\n    let cacheKey = null;\n    if (isIsr && !routeModule.isDev && !isDraftMode) {\n        cacheKey = resolvedPathname;\n        // ensure /index and / is normalized to one key\n        cacheKey = cacheKey === '/index' ? '/' : cacheKey;\n    }\n    const supportsDynamicResponse = // If we're in development, we always support dynamic HTML\n    routeModule.isDev === true || // If this is not SSG or does not have static paths, then it supports\n    // dynamic HTML.\n    !isIsr;\n    // This is a revalidation request if the request is for a static\n    // page and it is not being resumed from a postponed render and\n    // it is not a dynamic RSC request then it is a revalidation\n    // request.\n    const isStaticGeneration = isIsr && !supportsDynamicResponse;\n    // Before rendering (which initializes component tree modules), we have to\n    // set the reference manifests to our global store so Server Action's\n    // encryption util can access to them at the top level of the page module.\n    if (serverActionsManifest && clientReferenceManifest) {\n        setReferenceManifestsSingleton({\n            page: srcPage,\n            clientReferenceManifest,\n            serverActionsManifest,\n            serverModuleMap: createServerModuleMap({\n                serverActionsManifest\n            })\n        });\n    }\n    const method = req.method || 'GET';\n    const tracer = getTracer();\n    const activeSpan = tracer.getActiveScopeSpan();\n    const context = {\n        params,\n        prerenderManifest,\n        renderOpts: {\n            experimental: {\n                authInterrupts: Boolean(nextConfig.experimental.authInterrupts)\n            },\n            cacheComponents: Boolean(nextConfig.cacheComponents),\n            supportsDynamicResponse,\n            incrementalCache: getRequestMeta(req, 'incrementalCache'),\n            cacheLifeProfiles: nextConfig.cacheLife,\n            waitUntil: ctx.waitUntil,\n            onClose: (cb)=>{\n                res.on('close', cb);\n            },\n            onAfterTaskError: undefined,\n            onInstrumentationRequestError: (error, _request, errorContext)=>routeModule.onRequestError(req, error, errorContext, routerServerContext)\n        },\n        sharedContext: {\n            buildId\n        }\n    };\n    const nodeNextReq = new NodeNextRequest(req);\n    const nodeNextRes = new NodeNextResponse(res);\n    const nextReq = NextRequestAdapter.fromNodeNextRequest(nodeNextReq, signalFromNodeResponse(res));\n    try {\n        const invokeRouteModule = async (span)=>{\n            return routeModule.handle(nextReq, context).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${srcPage}`);\n                }\n            });\n        };\n        const isMinimalMode = Boolean(process.env.MINIMAL_MODE || getRequestMeta(req, 'minimalMode'));\n        const handleResponse = async (currentSpan)=>{\n            var _cacheEntry_value;\n            const responseGenerator = async ({ previousCacheEntry })=>{\n                try {\n                    if (!isMinimalMode && isOnDemandRevalidate && revalidateOnlyGenerated && !previousCacheEntry) {\n                        res.statusCode = 404;\n                        // on-demand revalidate always sets this header\n                        res.setHeader('x-nextjs-cache', 'REVALIDATED');\n                        res.end('This page could not be found');\n                        return null;\n                    }\n                    const response = await invokeRouteModule(currentSpan);\n                    req.fetchMetrics = context.renderOpts.fetchMetrics;\n                    let pendingWaitUntil = context.renderOpts.pendingWaitUntil;\n                    // Attempt using provided waitUntil if available\n                    // if it's not we fallback to sendResponse's handling\n                    if (pendingWaitUntil) {\n                        if (ctx.waitUntil) {\n                            ctx.waitUntil(pendingWaitUntil);\n                            pendingWaitUntil = undefined;\n                        }\n                    }\n                    const cacheTags = context.renderOpts.collectedTags;\n                    // If the request is for a static response, we can cache it so long\n                    // as it's not edge.\n                    if (isIsr) {\n                        const blob = await response.blob();\n                        // Copy the headers from the response.\n                        const headers = toNodeOutgoingHttpHeaders(response.headers);\n                        if (cacheTags) {\n                            headers[NEXT_CACHE_TAGS_HEADER] = cacheTags;\n                        }\n                        if (!headers['content-type'] && blob.type) {\n                            headers['content-type'] = blob.type;\n                        }\n                        const revalidate = typeof context.renderOpts.collectedRevalidate === 'undefined' || context.renderOpts.collectedRevalidate >= INFINITE_CACHE ? false : context.renderOpts.collectedRevalidate;\n                        const expire = typeof context.renderOpts.collectedExpire === 'undefined' || context.renderOpts.collectedExpire >= INFINITE_CACHE ? undefined : context.renderOpts.collectedExpire;\n                        // Create the cache entry for the response.\n                        const cacheEntry = {\n                            value: {\n                                kind: CachedRouteKind.APP_ROUTE,\n                                status: response.status,\n                                body: Buffer.from(await blob.arrayBuffer()),\n                                headers\n                            },\n                            cacheControl: {\n                                revalidate,\n                                expire\n                            }\n                        };\n                        return cacheEntry;\n                    } else {\n                        // send response without caching if not ISR\n                        await sendResponse(nodeNextReq, nodeNextRes, response, context.renderOpts.pendingWaitUntil);\n                        return null;\n                    }\n                } catch (err) {\n                    // if this is a background revalidate we need to report\n                    // the request error here as it won't be bubbled\n                    if (previousCacheEntry == null ? void 0 : previousCacheEntry.isStale) {\n                        await routeModule.onRequestError(req, err, {\n                            routerKind: 'App Router',\n                            routePath: srcPage,\n                            routeType: 'route',\n                            revalidateReason: getRevalidateReason({\n                                isStaticGeneration,\n                                isOnDemandRevalidate\n                            })\n                        }, routerServerContext);\n                    }\n                    throw err;\n                }\n            };\n            const cacheEntry = await routeModule.handleResponse({\n                req,\n                nextConfig,\n                cacheKey,\n                routeKind: RouteKind.APP_ROUTE,\n                isFallback: false,\n                prerenderManifest,\n                isRoutePPREnabled: false,\n                isOnDemandRevalidate,\n                revalidateOnlyGenerated,\n                responseGenerator,\n                waitUntil: ctx.waitUntil,\n                isMinimalMode\n            });\n            // we don't create a cacheEntry for ISR\n            if (!isIsr) {\n                return null;\n            }\n            if ((cacheEntry == null ? void 0 : (_cacheEntry_value = cacheEntry.value) == null ? void 0 : _cacheEntry_value.kind) !== CachedRouteKind.APP_ROUTE) {\n                var _cacheEntry_value1;\n                throw Object.defineProperty(new Error(`Invariant: app-route received invalid cache entry ${cacheEntry == null ? void 0 : (_cacheEntry_value1 = cacheEntry.value) == null ? void 0 : _cacheEntry_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E701\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            if (!isMinimalMode) {\n                res.setHeader('x-nextjs-cache', isOnDemandRevalidate ? 'REVALIDATED' : cacheEntry.isMiss ? 'MISS' : cacheEntry.isStale ? 'STALE' : 'HIT');\n            }\n            // Draft mode should never be cached\n            if (isDraftMode) {\n                res.setHeader('Cache-Control', 'private, no-cache, no-store, max-age=0, must-revalidate');\n            }\n            const headers = fromNodeOutgoingHttpHeaders(cacheEntry.value.headers);\n            if (!(isMinimalMode && isIsr)) {\n                headers.delete(NEXT_CACHE_TAGS_HEADER);\n            }\n            // If cache control is already set on the response we don't\n            // override it to allow users to customize it via next.config\n            if (cacheEntry.cacheControl && !res.getHeader('Cache-Control') && !headers.get('Cache-Control')) {\n                headers.set('Cache-Control', getCacheControlHeader(cacheEntry.cacheControl));\n            }\n            await sendResponse(nodeNextReq, nodeNextRes, // @ts-expect-error - Argument of type 'Buffer<ArrayBufferLike>' is not assignable to parameter of type 'BodyInit | null | undefined'.\n            new Response(cacheEntry.value.body, {\n                headers,\n                status: cacheEntry.value.status || 200\n            }));\n            return null;\n        };\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await handleResponse(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${srcPage}`,\n                    kind: SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, handleResponse));\n        }\n    } catch (err) {\n        if (!(err instanceof NoFallbackError)) {\n            await routeModule.onRequestError(req, err, {\n                routerKind: 'App Router',\n                routePath: normalizedSrcPage,\n                routeType: 'route',\n                revalidateReason: getRevalidateReason({\n                    isStaticGeneration,\n                    isOnDemandRevalidate\n                })\n            });\n        }\n        // rethrow so that we can handle serving error page\n        // If this is during static generation, throw the error again.\n        if (isIsr) throw err;\n        // Otherwise, send a 500 response.\n        await sendResponse(nodeNextReq, nodeNextRes, new Response(null, {\n            status: 500\n        }));\n        return null;\n    }\n}\n\n//# sourceMappingURL=app-route.js.map\n","function __classPrivateFieldSet(receiver, state, value, kind, f) {\n    if (kind === \"m\")\n        throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f)\n        throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver))\n        throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return kind === \"a\" ? f.call(receiver, value) : f ? (f.value = value) : state.set(receiver, value), value;\n}\nfunction __classPrivateFieldGet(receiver, state, kind, f) {\n    if (kind === \"a\" && !f)\n        throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver))\n        throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\nexport { __classPrivateFieldSet, __classPrivateFieldGet };\n","import { NextResponse } from 'next/server';\nimport { togetheraiClient } from '@/lib/client';\nimport { z } from 'zod';\nimport { ProcessedReceiptSchema } from '@/lib/types';\nimport { Ratelimit } from '@upstash/ratelimit';\nimport { Redis } from '@upstash/redis';\n\nconst hasUpstash =\n  process.env.UPSTASH_REDIS_REST_URL && process.env.UPSTASH_REDIS_REST_TOKEN;\n\nconst redis = hasUpstash\n  ? new Redis({\n      url: process.env.UPSTASH_REDIS_REST_URL!,\n      token: process.env.UPSTASH_REDIS_REST_TOKEN!,\n    })\n  : null;\n\nconst ratelimit =\n  hasUpstash && redis\n    ? new Ratelimit({\n        redis,\n        limiter: Ratelimit.slidingWindow(30, '1 d'),\n        analytics: true,\n      })\n    : null;\n\nexport async function POST(request: Request) {\n  try {\n    const { base64Image } = await request.json();\n\n    if (!base64Image || typeof base64Image !== 'string') {\n      return NextResponse.json(\n        { error: 'Missing required field: base64Image' },\n        { status: 400 }\n      );\n    }\n\n    if (ratelimit) {\n      // Rate limiting: 30 receipts per day per IP\n      const ip =\n        request.headers.get('x-forwarded-for')?.split(',')[0] ||\n        request.headers.get('x-real-ip') ||\n        'unknown';\n      const { success } = await ratelimit.limit(ip);\n\n      if (!success) {\n        return NextResponse.json(\n          {\n            error: 'Rate limit exceeded',\n            details:\n              \"You've reached the daily limit of 30 receipts. Contact @nutlope on X/Twitter for higher limits.\",\n          },\n          { status: 429 }\n        );\n      }\n    }\n\n    const receiptSchema = z.object({\n      receipts: z.array(ProcessedReceiptSchema),\n    });\n    const jsonSchema = z.toJSONSchema(receiptSchema);\n\n    const response = await togetheraiClient.chat.completions.create({\n      model: 'meta-llama/Llama-4-Maverick-17B-128E-Instruct-FP8',\n      messages: [\n        {\n          role: 'system',\n          content: `You are an expert at extracting receipt data. Extract all receipts from the image as a JSON object matching the schema.\n\nCRITICAL FORMATTING REQUIREMENTS:\n- Date MUST be in YYYY-MM-DD format (e.g., \"2024-01-15\", not \"01/15/2024\" or \"Jan 15, 2024\")\n- Convert any date format to YYYY-MM-DD\n- If date is ambiguous, use the most recent logical date\n\nCURRENCY EXTRACTION:\n- ALWAYS include a currency field in the response\n- Extract the currency code (e.g., \"USD\", \"EUR\", \"AED\", \"GBP\", \"CAD\", etc.) from currency symbols or explicit mentions\n- Common currency symbols: $ = USD,  = EUR,  = GBP, AED = AED (or .), etc.\n- If no currency symbol is visible on the receipt, use \"USD\" as the default\n- Currency field should be the 3-letter currency code (ISO 4217 format)\n\nCATEGORIZATION RULES:\n- Grocery stores (Walmart, Target, Kroger, Safeway, Whole Foods, Trader Joe's, Costco, Sam's Club, Aldi, Publix, Wegmans): \"groceries\"\n- Restaurants/Fast food (McDonald's, Starbucks, Chipotle, Taco Bell, Subway, etc.): \"dining\"\n- Gas stations (Shell, Exxon, Chevron, BP, Speedway, etc.): \"gas\"\n- Pharmacies (CVS, Walgreens, Rite Aid, etc.): \"healthcare\"\n- Department stores (Macy's, Kohl's, JCPenney, etc.): \"shopping\"\n- Electronics (Best Buy, Apple Store, etc.): \"electronics\"\n- Home improvement (Home Depot, Lowe's, etc.): \"home\"\n- Clothing (Gap, Old Navy, H&M, etc.): \"clothing\"\n- Online services (Amazon, eBay, etc.): \"shopping\"\n- Utilities (electric, gas, water, internet): \"utilities\"\n- Entertainment (movies, concerts, etc.): \"entertainment\"\n- Travel (hotels, airlines, etc.): \"travel\"\n- Other: Use your best judgment to categorize appropriately\n\nPAYMENT METHODS: Common values include \"cash\", \"credit\", \"debit\", \"check\", \"gift card\", \"digital wallet\"\n\nExtract all visible receipt data accurately. If information is not visible, use reasonable defaults or omit if not applicable. Respond only with valid JSON.`,\n        },\n        {\n          role: 'user',\n          content: [\n            {\n              type: 'text',\n              text: 'Extract receipt data from this image following the formatting and categorization rules.',\n            },\n            {\n              type: 'image_url',\n              image_url: { url: `data:image/jpeg;base64,${base64Image}` },\n            },\n          ],\n        },\n      ],\n      response_format: { type: 'json_object', schema: jsonSchema },\n    });\n\n    const content = response?.choices?.[0]?.message?.content;\n\n    if (!content) {\n      return NextResponse.json(\n        { error: 'OCR extraction failed: empty response' },\n        { status: 502 }\n      );\n    }\n\n    let parsedJson: unknown;\n    try {\n      parsedJson = JSON.parse(content);\n    } catch (e) {\n      return NextResponse.json(\n        { error: 'Invalid JSON from model' },\n        { status: 502 }\n      );\n    }\n\n    const validated = receiptSchema.safeParse(parsedJson);\n    if (!validated.success) {\n      console.error('OCR validation failed:', validated.error.message);\n      console.error('Raw response:', parsedJson);\n      return NextResponse.json(\n        { error: 'Validation failed', details: validated.error.message },\n        { status: 422 }\n      );\n    }\n\n    return NextResponse.json({ receipts: validated.data.receipts });\n  } catch (error) {\n    console.error('/api/ocr error', error);\n    return NextResponse.json(\n      { error: 'Internal error while performing OCR' },\n      { status: 500 }\n    );\n  }\n}\n","import nodeCrypto from 'node:crypto';\n\nconst subtle = nodeCrypto.webcrypto?.subtle || {};\nconst randomUUID = () => {\n  return nodeCrypto.randomUUID();\n};\nconst getRandomValues = (array) => {\n  return nodeCrypto.webcrypto.getRandomValues(array);\n};\nconst _crypto = {\n  randomUUID,\n  getRandomValues,\n  subtle\n};\n\nexport { _crypto as default, getRandomValues, randomUUID, subtle };\n","var __defProp = Object.defineProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\n\n// pkg/error.ts\nvar error_exports = {};\n__export(error_exports, {\n  UpstashError: () => UpstashError,\n  UrlError: () => UrlError\n});\nvar UpstashError = class extends Error {\n  constructor(message) {\n    super(message);\n    this.name = \"UpstashError\";\n  }\n};\nvar UrlError = class extends Error {\n  constructor(url) {\n    super(\n      `Upstash Redis client was passed an invalid URL. You should pass a URL starting with https. Received: \"${url}\". `\n    );\n    this.name = \"UrlError\";\n  }\n};\n\n// pkg/util.ts\nfunction parseRecursive(obj) {\n  const parsed = Array.isArray(obj) ? obj.map((o) => {\n    try {\n      return parseRecursive(o);\n    } catch {\n      return o;\n    }\n  }) : JSON.parse(obj);\n  if (typeof parsed === \"number\" && parsed.toString() !== obj) {\n    return obj;\n  }\n  return parsed;\n}\nfunction parseResponse(result) {\n  try {\n    return parseRecursive(result);\n  } catch {\n    return result;\n  }\n}\nfunction deserializeScanResponse(result) {\n  return [result[0], ...parseResponse(result.slice(1))];\n}\nfunction deserializeScanWithTypesResponse(result) {\n  const [cursor, keys] = result;\n  const parsedKeys = [];\n  for (let i = 0; i < keys.length; i += 2) {\n    parsedKeys.push({ key: keys[i], type: keys[i + 1] });\n  }\n  return [cursor, parsedKeys];\n}\nfunction mergeHeaders(...headers) {\n  const merged = {};\n  for (const header of headers) {\n    if (!header) continue;\n    for (const [key, value] of Object.entries(header)) {\n      if (value !== void 0 && value !== null) {\n        merged[key] = value;\n      }\n    }\n  }\n  return merged;\n}\n\n// pkg/http.ts\nvar HttpClient = class {\n  baseUrl;\n  headers;\n  options;\n  readYourWrites;\n  upstashSyncToken = \"\";\n  hasCredentials;\n  retry;\n  constructor(config) {\n    this.options = {\n      backend: config.options?.backend,\n      agent: config.agent,\n      responseEncoding: config.responseEncoding ?? \"base64\",\n      // default to base64\n      cache: config.cache,\n      signal: config.signal,\n      keepAlive: config.keepAlive ?? true\n    };\n    this.upstashSyncToken = \"\";\n    this.readYourWrites = config.readYourWrites ?? true;\n    this.baseUrl = (config.baseUrl || \"\").replace(/\\/$/, \"\");\n    const urlRegex = /^https?:\\/\\/[^\\s#$./?].\\S*$/;\n    if (this.baseUrl && !urlRegex.test(this.baseUrl)) {\n      throw new UrlError(this.baseUrl);\n    }\n    this.headers = {\n      \"Content-Type\": \"application/json\",\n      ...config.headers\n    };\n    this.hasCredentials = Boolean(this.baseUrl && this.headers.authorization.split(\" \")[1]);\n    if (this.options.responseEncoding === \"base64\") {\n      this.headers[\"Upstash-Encoding\"] = \"base64\";\n    }\n    this.retry = typeof config.retry === \"boolean\" && !config.retry ? {\n      attempts: 1,\n      backoff: () => 0\n    } : {\n      attempts: config.retry?.retries ?? 5,\n      backoff: config.retry?.backoff ?? ((retryCount) => Math.exp(retryCount) * 50)\n    };\n  }\n  mergeTelemetry(telemetry) {\n    this.headers = merge(this.headers, \"Upstash-Telemetry-Runtime\", telemetry.runtime);\n    this.headers = merge(this.headers, \"Upstash-Telemetry-Platform\", telemetry.platform);\n    this.headers = merge(this.headers, \"Upstash-Telemetry-Sdk\", telemetry.sdk);\n  }\n  async request(req) {\n    const requestHeaders = mergeHeaders(this.headers, req.headers ?? {});\n    const requestUrl = [this.baseUrl, ...req.path ?? []].join(\"/\");\n    const isEventStream = requestHeaders.Accept === \"text/event-stream\";\n    const signal = req.signal ?? this.options.signal;\n    const isSignalFunction = typeof signal === \"function\";\n    const requestOptions = {\n      //@ts-expect-error this should throw due to bun regression\n      cache: this.options.cache,\n      method: \"POST\",\n      headers: requestHeaders,\n      body: JSON.stringify(req.body),\n      keepalive: this.options.keepAlive,\n      agent: this.options.agent,\n      signal: isSignalFunction ? signal() : signal,\n      /**\n       * Fastly specific\n       */\n      backend: this.options.backend\n    };\n    if (!this.hasCredentials) {\n      console.warn(\n        \"[Upstash Redis] Redis client was initialized without url or token. Failed to execute command.\"\n      );\n    }\n    if (this.readYourWrites) {\n      const newHeader = this.upstashSyncToken;\n      this.headers[\"upstash-sync-token\"] = newHeader;\n    }\n    let res = null;\n    let error = null;\n    for (let i = 0; i <= this.retry.attempts; i++) {\n      try {\n        res = await fetch(requestUrl, requestOptions);\n        break;\n      } catch (error_) {\n        if (requestOptions.signal?.aborted && isSignalFunction) {\n          throw error_;\n        } else if (requestOptions.signal?.aborted) {\n          const myBlob = new Blob([\n            JSON.stringify({ result: requestOptions.signal.reason ?? \"Aborted\" })\n          ]);\n          const myOptions = {\n            status: 200,\n            statusText: requestOptions.signal.reason ?? \"Aborted\"\n          };\n          res = new Response(myBlob, myOptions);\n          break;\n        }\n        error = error_;\n        if (i < this.retry.attempts) {\n          await new Promise((r) => setTimeout(r, this.retry.backoff(i)));\n        }\n      }\n    }\n    if (!res) {\n      throw error ?? new Error(\"Exhausted all retries\");\n    }\n    if (!res.ok) {\n      const body2 = await res.json();\n      throw new UpstashError(`${body2.error}, command was: ${JSON.stringify(req.body)}`);\n    }\n    if (this.readYourWrites) {\n      const headers = res.headers;\n      this.upstashSyncToken = headers.get(\"upstash-sync-token\") ?? \"\";\n    }\n    if (isEventStream && req && req.onMessage && res.body) {\n      const reader = res.body.getReader();\n      const decoder = new TextDecoder();\n      (async () => {\n        try {\n          while (true) {\n            const { value, done } = await reader.read();\n            if (done) break;\n            const chunk = decoder.decode(value);\n            const lines = chunk.split(\"\\n\");\n            for (const line of lines) {\n              if (line.startsWith(\"data: \")) {\n                const data = line.slice(6);\n                req.onMessage?.(data);\n              }\n            }\n          }\n        } catch (error2) {\n          if (error2 instanceof Error && error2.name === \"AbortError\") {\n          } else {\n            console.error(\"Stream reading error:\", error2);\n          }\n        } finally {\n          try {\n            await reader.cancel();\n          } catch {\n          }\n        }\n      })();\n      return { result: 1 };\n    }\n    const body = await res.json();\n    if (this.readYourWrites) {\n      const headers = res.headers;\n      this.upstashSyncToken = headers.get(\"upstash-sync-token\") ?? \"\";\n    }\n    if (this.options.responseEncoding === \"base64\") {\n      if (Array.isArray(body)) {\n        return body.map(({ result: result2, error: error2 }) => ({\n          result: decode(result2),\n          error: error2\n        }));\n      }\n      const result = decode(body.result);\n      return { result, error: body.error };\n    }\n    return body;\n  }\n};\nfunction base64decode(b64) {\n  let dec = \"\";\n  try {\n    const binString = atob(b64);\n    const size = binString.length;\n    const bytes = new Uint8Array(size);\n    for (let i = 0; i < size; i++) {\n      bytes[i] = binString.charCodeAt(i);\n    }\n    dec = new TextDecoder().decode(bytes);\n  } catch {\n    dec = b64;\n  }\n  return dec;\n}\nfunction decode(raw) {\n  let result = void 0;\n  switch (typeof raw) {\n    case \"undefined\": {\n      return raw;\n    }\n    case \"number\": {\n      result = raw;\n      break;\n    }\n    case \"object\": {\n      if (Array.isArray(raw)) {\n        result = raw.map(\n          (v) => typeof v === \"string\" ? base64decode(v) : Array.isArray(v) ? v.map((element) => decode(element)) : v\n        );\n      } else {\n        result = null;\n      }\n      break;\n    }\n    case \"string\": {\n      result = raw === \"OK\" ? \"OK\" : base64decode(raw);\n      break;\n    }\n    default: {\n      break;\n    }\n  }\n  return result;\n}\nfunction merge(obj, key, value) {\n  if (!value) {\n    return obj;\n  }\n  obj[key] = obj[key] ? [obj[key], value].join(\",\") : value;\n  return obj;\n}\n\n// pkg/commands/command.ts\nvar defaultSerializer = (c) => {\n  switch (typeof c) {\n    case \"string\":\n    case \"number\":\n    case \"boolean\": {\n      return c;\n    }\n    default: {\n      return JSON.stringify(c);\n    }\n  }\n};\nvar Command = class {\n  command;\n  serialize;\n  deserialize;\n  headers;\n  path;\n  onMessage;\n  isStreaming;\n  signal;\n  /**\n   * Create a new command instance.\n   *\n   * You can define a custom `deserialize` function. By default we try to deserialize as json.\n   */\n  constructor(command, opts) {\n    this.serialize = defaultSerializer;\n    this.deserialize = opts?.automaticDeserialization === void 0 || opts.automaticDeserialization ? opts?.deserialize ?? parseResponse : (x) => x;\n    this.command = command.map((c) => this.serialize(c));\n    this.headers = opts?.headers;\n    this.path = opts?.path;\n    this.onMessage = opts?.streamOptions?.onMessage;\n    this.isStreaming = opts?.streamOptions?.isStreaming ?? false;\n    this.signal = opts?.streamOptions?.signal;\n    if (opts?.latencyLogging) {\n      const originalExec = this.exec.bind(this);\n      this.exec = async (client) => {\n        const start = performance.now();\n        const result = await originalExec(client);\n        const end = performance.now();\n        const loggerResult = (end - start).toFixed(2);\n        console.log(\n          `Latency for \\x1B[38;2;19;185;39m${this.command[0].toString().toUpperCase()}\\x1B[0m: \\x1B[38;2;0;255;255m${loggerResult} ms\\x1B[0m`\n        );\n        return result;\n      };\n    }\n  }\n  /**\n   * Execute the command using a client.\n   */\n  async exec(client) {\n    const { result, error } = await client.request({\n      body: this.command,\n      path: this.path,\n      upstashSyncToken: client.upstashSyncToken,\n      headers: this.headers,\n      onMessage: this.onMessage,\n      isStreaming: this.isStreaming,\n      signal: this.signal\n    });\n    if (error) {\n      throw new UpstashError(error);\n    }\n    if (result === void 0) {\n      throw new TypeError(\"Request did not return a result\");\n    }\n    return this.deserialize(result);\n  }\n};\n\n// pkg/commands/hrandfield.ts\nfunction deserialize(result) {\n  if (result.length === 0) {\n    return null;\n  }\n  const obj = {};\n  for (let i = 0; i < result.length; i += 2) {\n    const key = result[i];\n    const value = result[i + 1];\n    try {\n      obj[key] = JSON.parse(value);\n    } catch {\n      obj[key] = value;\n    }\n  }\n  return obj;\n}\nvar HRandFieldCommand = class extends Command {\n  constructor(cmd, opts) {\n    const command = [\"hrandfield\", cmd[0]];\n    if (typeof cmd[1] === \"number\") {\n      command.push(cmd[1]);\n    }\n    if (cmd[2]) {\n      command.push(\"WITHVALUES\");\n    }\n    super(command, {\n      // @ts-expect-error to silence compiler\n      deserialize: cmd[2] ? (result) => deserialize(result) : opts?.deserialize,\n      ...opts\n    });\n  }\n};\n\n// pkg/commands/append.ts\nvar AppendCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"append\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/bitcount.ts\nvar BitCountCommand = class extends Command {\n  constructor([key, start, end], opts) {\n    const command = [\"bitcount\", key];\n    if (typeof start === \"number\") {\n      command.push(start);\n    }\n    if (typeof end === \"number\") {\n      command.push(end);\n    }\n    super(command, opts);\n  }\n};\n\n// pkg/commands/bitfield.ts\nvar BitFieldCommand = class {\n  constructor(args, client, opts, execOperation = (command) => command.exec(this.client)) {\n    this.client = client;\n    this.opts = opts;\n    this.execOperation = execOperation;\n    this.command = [\"bitfield\", ...args];\n  }\n  command;\n  chain(...args) {\n    this.command.push(...args);\n    return this;\n  }\n  get(...args) {\n    return this.chain(\"get\", ...args);\n  }\n  set(...args) {\n    return this.chain(\"set\", ...args);\n  }\n  incrby(...args) {\n    return this.chain(\"incrby\", ...args);\n  }\n  overflow(overflow) {\n    return this.chain(\"overflow\", overflow);\n  }\n  exec() {\n    const command = new Command(this.command, this.opts);\n    return this.execOperation(command);\n  }\n};\n\n// pkg/commands/bitop.ts\nvar BitOpCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"bitop\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/bitpos.ts\nvar BitPosCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"bitpos\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/copy.ts\nvar CopyCommand = class extends Command {\n  constructor([key, destinationKey, opts], commandOptions) {\n    super([\"COPY\", key, destinationKey, ...opts?.replace ? [\"REPLACE\"] : []], {\n      ...commandOptions,\n      deserialize(result) {\n        if (result > 0) {\n          return \"COPIED\";\n        }\n        return \"NOT_COPIED\";\n      }\n    });\n  }\n};\n\n// pkg/commands/dbsize.ts\nvar DBSizeCommand = class extends Command {\n  constructor(opts) {\n    super([\"dbsize\"], opts);\n  }\n};\n\n// pkg/commands/decr.ts\nvar DecrCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"decr\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/decrby.ts\nvar DecrByCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"decrby\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/del.ts\nvar DelCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"del\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/echo.ts\nvar EchoCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"echo\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/evalRo.ts\nvar EvalROCommand = class extends Command {\n  constructor([script, keys, args], opts) {\n    super([\"eval_ro\", script, keys.length, ...keys, ...args ?? []], opts);\n  }\n};\n\n// pkg/commands/eval.ts\nvar EvalCommand = class extends Command {\n  constructor([script, keys, args], opts) {\n    super([\"eval\", script, keys.length, ...keys, ...args ?? []], opts);\n  }\n};\n\n// pkg/commands/evalshaRo.ts\nvar EvalshaROCommand = class extends Command {\n  constructor([sha, keys, args], opts) {\n    super([\"evalsha_ro\", sha, keys.length, ...keys, ...args ?? []], opts);\n  }\n};\n\n// pkg/commands/evalsha.ts\nvar EvalshaCommand = class extends Command {\n  constructor([sha, keys, args], opts) {\n    super([\"evalsha\", sha, keys.length, ...keys, ...args ?? []], opts);\n  }\n};\n\n// pkg/commands/exec.ts\nvar ExecCommand = class extends Command {\n  constructor(cmd, opts) {\n    const normalizedCmd = cmd.map((arg) => typeof arg === \"string\" ? arg : String(arg));\n    super(normalizedCmd, opts);\n  }\n};\n\n// pkg/commands/exists.ts\nvar ExistsCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"exists\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/expire.ts\nvar ExpireCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"expire\", ...cmd.filter(Boolean)], opts);\n  }\n};\n\n// pkg/commands/expireat.ts\nvar ExpireAtCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"expireat\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/flushall.ts\nvar FlushAllCommand = class extends Command {\n  constructor(args, opts) {\n    const command = [\"flushall\"];\n    if (args && args.length > 0 && args[0].async) {\n      command.push(\"async\");\n    }\n    super(command, opts);\n  }\n};\n\n// pkg/commands/flushdb.ts\nvar FlushDBCommand = class extends Command {\n  constructor([opts], cmdOpts) {\n    const command = [\"flushdb\"];\n    if (opts?.async) {\n      command.push(\"async\");\n    }\n    super(command, cmdOpts);\n  }\n};\n\n// pkg/commands/geo_add.ts\nvar GeoAddCommand = class extends Command {\n  constructor([key, arg1, ...arg2], opts) {\n    const command = [\"geoadd\", key];\n    if (\"nx\" in arg1 && arg1.nx) {\n      command.push(\"nx\");\n    } else if (\"xx\" in arg1 && arg1.xx) {\n      command.push(\"xx\");\n    }\n    if (\"ch\" in arg1 && arg1.ch) {\n      command.push(\"ch\");\n    }\n    if (\"latitude\" in arg1 && arg1.latitude) {\n      command.push(arg1.longitude, arg1.latitude, arg1.member);\n    }\n    command.push(\n      ...arg2.flatMap(({ latitude, longitude, member }) => [longitude, latitude, member])\n    );\n    super(command, opts);\n  }\n};\n\n// pkg/commands/geo_dist.ts\nvar GeoDistCommand = class extends Command {\n  constructor([key, member1, member2, unit = \"M\"], opts) {\n    super([\"GEODIST\", key, member1, member2, unit], opts);\n  }\n};\n\n// pkg/commands/geo_hash.ts\nvar GeoHashCommand = class extends Command {\n  constructor(cmd, opts) {\n    const [key] = cmd;\n    const members = Array.isArray(cmd[1]) ? cmd[1] : cmd.slice(1);\n    super([\"GEOHASH\", key, ...members], opts);\n  }\n};\n\n// pkg/commands/geo_pos.ts\nvar GeoPosCommand = class extends Command {\n  constructor(cmd, opts) {\n    const [key] = cmd;\n    const members = Array.isArray(cmd[1]) ? cmd[1] : cmd.slice(1);\n    super([\"GEOPOS\", key, ...members], {\n      deserialize: (result) => transform(result),\n      ...opts\n    });\n  }\n};\nfunction transform(result) {\n  const final = [];\n  for (const pos of result) {\n    if (!pos?.[0] || !pos?.[1]) {\n      continue;\n    }\n    final.push({ lng: Number.parseFloat(pos[0]), lat: Number.parseFloat(pos[1]) });\n  }\n  return final;\n}\n\n// pkg/commands/geo_search.ts\nvar GeoSearchCommand = class extends Command {\n  constructor([key, centerPoint, shape, order, opts], commandOptions) {\n    const command = [\"GEOSEARCH\", key];\n    if (centerPoint.type === \"FROMMEMBER\" || centerPoint.type === \"frommember\") {\n      command.push(centerPoint.type, centerPoint.member);\n    }\n    if (centerPoint.type === \"FROMLONLAT\" || centerPoint.type === \"fromlonlat\") {\n      command.push(centerPoint.type, centerPoint.coordinate.lon, centerPoint.coordinate.lat);\n    }\n    if (shape.type === \"BYRADIUS\" || shape.type === \"byradius\") {\n      command.push(shape.type, shape.radius, shape.radiusType);\n    }\n    if (shape.type === \"BYBOX\" || shape.type === \"bybox\") {\n      command.push(shape.type, shape.rect.width, shape.rect.height, shape.rectType);\n    }\n    command.push(order);\n    if (opts?.count) {\n      command.push(\"COUNT\", opts.count.limit, ...opts.count.any ? [\"ANY\"] : []);\n    }\n    const transform2 = (result) => {\n      if (!opts?.withCoord && !opts?.withDist && !opts?.withHash) {\n        return result.map((member) => {\n          try {\n            return { member: JSON.parse(member) };\n          } catch {\n            return { member };\n          }\n        });\n      }\n      return result.map((members) => {\n        let counter = 1;\n        const obj = {};\n        try {\n          obj.member = JSON.parse(members[0]);\n        } catch {\n          obj.member = members[0];\n        }\n        if (opts.withDist) {\n          obj.dist = Number.parseFloat(members[counter++]);\n        }\n        if (opts.withHash) {\n          obj.hash = members[counter++].toString();\n        }\n        if (opts.withCoord) {\n          obj.coord = {\n            long: Number.parseFloat(members[counter][0]),\n            lat: Number.parseFloat(members[counter][1])\n          };\n        }\n        return obj;\n      });\n    };\n    super(\n      [\n        ...command,\n        ...opts?.withCoord ? [\"WITHCOORD\"] : [],\n        ...opts?.withDist ? [\"WITHDIST\"] : [],\n        ...opts?.withHash ? [\"WITHHASH\"] : []\n      ],\n      {\n        deserialize: transform2,\n        ...commandOptions\n      }\n    );\n  }\n};\n\n// pkg/commands/geo_search_store.ts\nvar GeoSearchStoreCommand = class extends Command {\n  constructor([destination, key, centerPoint, shape, order, opts], commandOptions) {\n    const command = [\"GEOSEARCHSTORE\", destination, key];\n    if (centerPoint.type === \"FROMMEMBER\" || centerPoint.type === \"frommember\") {\n      command.push(centerPoint.type, centerPoint.member);\n    }\n    if (centerPoint.type === \"FROMLONLAT\" || centerPoint.type === \"fromlonlat\") {\n      command.push(centerPoint.type, centerPoint.coordinate.lon, centerPoint.coordinate.lat);\n    }\n    if (shape.type === \"BYRADIUS\" || shape.type === \"byradius\") {\n      command.push(shape.type, shape.radius, shape.radiusType);\n    }\n    if (shape.type === \"BYBOX\" || shape.type === \"bybox\") {\n      command.push(shape.type, shape.rect.width, shape.rect.height, shape.rectType);\n    }\n    command.push(order);\n    if (opts?.count) {\n      command.push(\"COUNT\", opts.count.limit, ...opts.count.any ? [\"ANY\"] : []);\n    }\n    super([...command, ...opts?.storeDist ? [\"STOREDIST\"] : []], commandOptions);\n  }\n};\n\n// pkg/commands/get.ts\nvar GetCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"get\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/getbit.ts\nvar GetBitCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"getbit\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/getdel.ts\nvar GetDelCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"getdel\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/getex.ts\nvar GetExCommand = class extends Command {\n  constructor([key, opts], cmdOpts) {\n    const command = [\"getex\", key];\n    if (opts) {\n      if (\"ex\" in opts && typeof opts.ex === \"number\") {\n        command.push(\"ex\", opts.ex);\n      } else if (\"px\" in opts && typeof opts.px === \"number\") {\n        command.push(\"px\", opts.px);\n      } else if (\"exat\" in opts && typeof opts.exat === \"number\") {\n        command.push(\"exat\", opts.exat);\n      } else if (\"pxat\" in opts && typeof opts.pxat === \"number\") {\n        command.push(\"pxat\", opts.pxat);\n      } else if (\"persist\" in opts && opts.persist) {\n        command.push(\"persist\");\n      }\n    }\n    super(command, cmdOpts);\n  }\n};\n\n// pkg/commands/getrange.ts\nvar GetRangeCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"getrange\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/getset.ts\nvar GetSetCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"getset\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/hdel.ts\nvar HDelCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"hdel\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/hexists.ts\nvar HExistsCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"hexists\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/hexpire.ts\nvar HExpireCommand = class extends Command {\n  constructor(cmd, opts) {\n    const [key, fields, seconds, option] = cmd;\n    const fieldArray = Array.isArray(fields) ? fields : [fields];\n    super(\n      [\n        \"hexpire\",\n        key,\n        seconds,\n        ...option ? [option] : [],\n        \"FIELDS\",\n        fieldArray.length,\n        ...fieldArray\n      ],\n      opts\n    );\n  }\n};\n\n// pkg/commands/hexpireat.ts\nvar HExpireAtCommand = class extends Command {\n  constructor(cmd, opts) {\n    const [key, fields, timestamp, option] = cmd;\n    const fieldArray = Array.isArray(fields) ? fields : [fields];\n    super(\n      [\n        \"hexpireat\",\n        key,\n        timestamp,\n        ...option ? [option] : [],\n        \"FIELDS\",\n        fieldArray.length,\n        ...fieldArray\n      ],\n      opts\n    );\n  }\n};\n\n// pkg/commands/hexpiretime.ts\nvar HExpireTimeCommand = class extends Command {\n  constructor(cmd, opts) {\n    const [key, fields] = cmd;\n    const fieldArray = Array.isArray(fields) ? fields : [fields];\n    super([\"hexpiretime\", key, \"FIELDS\", fieldArray.length, ...fieldArray], opts);\n  }\n};\n\n// pkg/commands/hpersist.ts\nvar HPersistCommand = class extends Command {\n  constructor(cmd, opts) {\n    const [key, fields] = cmd;\n    const fieldArray = Array.isArray(fields) ? fields : [fields];\n    super([\"hpersist\", key, \"FIELDS\", fieldArray.length, ...fieldArray], opts);\n  }\n};\n\n// pkg/commands/hpexpire.ts\nvar HPExpireCommand = class extends Command {\n  constructor(cmd, opts) {\n    const [key, fields, milliseconds, option] = cmd;\n    const fieldArray = Array.isArray(fields) ? fields : [fields];\n    super(\n      [\n        \"hpexpire\",\n        key,\n        milliseconds,\n        ...option ? [option] : [],\n        \"FIELDS\",\n        fieldArray.length,\n        ...fieldArray\n      ],\n      opts\n    );\n  }\n};\n\n// pkg/commands/hpexpireat.ts\nvar HPExpireAtCommand = class extends Command {\n  constructor(cmd, opts) {\n    const [key, fields, timestamp, option] = cmd;\n    const fieldArray = Array.isArray(fields) ? fields : [fields];\n    super(\n      [\n        \"hpexpireat\",\n        key,\n        timestamp,\n        ...option ? [option] : [],\n        \"FIELDS\",\n        fieldArray.length,\n        ...fieldArray\n      ],\n      opts\n    );\n  }\n};\n\n// pkg/commands/hpexpiretime.ts\nvar HPExpireTimeCommand = class extends Command {\n  constructor(cmd, opts) {\n    const [key, fields] = cmd;\n    const fieldArray = Array.isArray(fields) ? fields : [fields];\n    super([\"hpexpiretime\", key, \"FIELDS\", fieldArray.length, ...fieldArray], opts);\n  }\n};\n\n// pkg/commands/hpttl.ts\nvar HPTtlCommand = class extends Command {\n  constructor(cmd, opts) {\n    const [key, fields] = cmd;\n    const fieldArray = Array.isArray(fields) ? fields : [fields];\n    super([\"hpttl\", key, \"FIELDS\", fieldArray.length, ...fieldArray], opts);\n  }\n};\n\n// pkg/commands/hget.ts\nvar HGetCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"hget\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/hgetall.ts\nfunction deserialize2(result) {\n  if (result.length === 0) {\n    return null;\n  }\n  const obj = {};\n  for (let i = 0; i < result.length; i += 2) {\n    const key = result[i];\n    const value = result[i + 1];\n    try {\n      const valueIsNumberAndNotSafeInteger = !Number.isNaN(Number(value)) && !Number.isSafeInteger(Number(value));\n      obj[key] = valueIsNumberAndNotSafeInteger ? value : JSON.parse(value);\n    } catch {\n      obj[key] = value;\n    }\n  }\n  return obj;\n}\nvar HGetAllCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"hgetall\", ...cmd], {\n      deserialize: (result) => deserialize2(result),\n      ...opts\n    });\n  }\n};\n\n// pkg/commands/hincrby.ts\nvar HIncrByCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"hincrby\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/hincrbyfloat.ts\nvar HIncrByFloatCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"hincrbyfloat\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/hkeys.ts\nvar HKeysCommand = class extends Command {\n  constructor([key], opts) {\n    super([\"hkeys\", key], opts);\n  }\n};\n\n// pkg/commands/hlen.ts\nvar HLenCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"hlen\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/hmget.ts\nfunction deserialize3(fields, result) {\n  if (result.every((field) => field === null)) {\n    return null;\n  }\n  const obj = {};\n  for (const [i, field] of fields.entries()) {\n    try {\n      obj[field] = JSON.parse(result[i]);\n    } catch {\n      obj[field] = result[i];\n    }\n  }\n  return obj;\n}\nvar HMGetCommand = class extends Command {\n  constructor([key, ...fields], opts) {\n    super([\"hmget\", key, ...fields], {\n      deserialize: (result) => deserialize3(fields, result),\n      ...opts\n    });\n  }\n};\n\n// pkg/commands/hmset.ts\nvar HMSetCommand = class extends Command {\n  constructor([key, kv], opts) {\n    super([\"hmset\", key, ...Object.entries(kv).flatMap(([field, value]) => [field, value])], opts);\n  }\n};\n\n// pkg/commands/hscan.ts\nvar HScanCommand = class extends Command {\n  constructor([key, cursor, cmdOpts], opts) {\n    const command = [\"hscan\", key, cursor];\n    if (cmdOpts?.match) {\n      command.push(\"match\", cmdOpts.match);\n    }\n    if (typeof cmdOpts?.count === \"number\") {\n      command.push(\"count\", cmdOpts.count);\n    }\n    super(command, {\n      deserialize: deserializeScanResponse,\n      ...opts\n    });\n  }\n};\n\n// pkg/commands/hset.ts\nvar HSetCommand = class extends Command {\n  constructor([key, kv], opts) {\n    super([\"hset\", key, ...Object.entries(kv).flatMap(([field, value]) => [field, value])], opts);\n  }\n};\n\n// pkg/commands/hsetnx.ts\nvar HSetNXCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"hsetnx\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/hstrlen.ts\nvar HStrLenCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"hstrlen\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/httl.ts\nvar HTtlCommand = class extends Command {\n  constructor(cmd, opts) {\n    const [key, fields] = cmd;\n    const fieldArray = Array.isArray(fields) ? fields : [fields];\n    super([\"httl\", key, \"FIELDS\", fieldArray.length, ...fieldArray], opts);\n  }\n};\n\n// pkg/commands/hvals.ts\nvar HValsCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"hvals\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/incr.ts\nvar IncrCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"incr\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/incrby.ts\nvar IncrByCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"incrby\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/incrbyfloat.ts\nvar IncrByFloatCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"incrbyfloat\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/json_arrappend.ts\nvar JsonArrAppendCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"JSON.ARRAPPEND\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/json_arrindex.ts\nvar JsonArrIndexCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"JSON.ARRINDEX\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/json_arrinsert.ts\nvar JsonArrInsertCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"JSON.ARRINSERT\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/json_arrlen.ts\nvar JsonArrLenCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"JSON.ARRLEN\", cmd[0], cmd[1] ?? \"$\"], opts);\n  }\n};\n\n// pkg/commands/json_arrpop.ts\nvar JsonArrPopCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"JSON.ARRPOP\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/json_arrtrim.ts\nvar JsonArrTrimCommand = class extends Command {\n  constructor(cmd, opts) {\n    const path = cmd[1] ?? \"$\";\n    const start = cmd[2] ?? 0;\n    const stop = cmd[3] ?? 0;\n    super([\"JSON.ARRTRIM\", cmd[0], path, start, stop], opts);\n  }\n};\n\n// pkg/commands/json_clear.ts\nvar JsonClearCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"JSON.CLEAR\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/json_del.ts\nvar JsonDelCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"JSON.DEL\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/json_forget.ts\nvar JsonForgetCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"JSON.FORGET\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/json_get.ts\nvar JsonGetCommand = class extends Command {\n  constructor(cmd, opts) {\n    const command = [\"JSON.GET\"];\n    if (typeof cmd[1] === \"string\") {\n      command.push(...cmd);\n    } else {\n      command.push(cmd[0]);\n      if (cmd[1]) {\n        if (cmd[1].indent) {\n          command.push(\"INDENT\", cmd[1].indent);\n        }\n        if (cmd[1].newline) {\n          command.push(\"NEWLINE\", cmd[1].newline);\n        }\n        if (cmd[1].space) {\n          command.push(\"SPACE\", cmd[1].space);\n        }\n      }\n      command.push(...cmd.slice(2));\n    }\n    super(command, opts);\n  }\n};\n\n// pkg/commands/json_merge.ts\nvar JsonMergeCommand = class extends Command {\n  constructor(cmd, opts) {\n    const command = [\"JSON.MERGE\", ...cmd];\n    super(command, opts);\n  }\n};\n\n// pkg/commands/json_mget.ts\nvar JsonMGetCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"JSON.MGET\", ...cmd[0], cmd[1]], opts);\n  }\n};\n\n// pkg/commands/json_mset.ts\nvar JsonMSetCommand = class extends Command {\n  constructor(cmd, opts) {\n    const command = [\"JSON.MSET\"];\n    for (const c of cmd) {\n      command.push(c.key, c.path, c.value);\n    }\n    super(command, opts);\n  }\n};\n\n// pkg/commands/json_numincrby.ts\nvar JsonNumIncrByCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"JSON.NUMINCRBY\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/json_nummultby.ts\nvar JsonNumMultByCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"JSON.NUMMULTBY\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/json_objkeys.ts\nvar JsonObjKeysCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"JSON.OBJKEYS\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/json_objlen.ts\nvar JsonObjLenCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"JSON.OBJLEN\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/json_resp.ts\nvar JsonRespCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"JSON.RESP\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/json_set.ts\nvar JsonSetCommand = class extends Command {\n  constructor(cmd, opts) {\n    const command = [\"JSON.SET\", cmd[0], cmd[1], cmd[2]];\n    if (cmd[3]) {\n      if (cmd[3].nx) {\n        command.push(\"NX\");\n      } else if (cmd[3].xx) {\n        command.push(\"XX\");\n      }\n    }\n    super(command, opts);\n  }\n};\n\n// pkg/commands/json_strappend.ts\nvar JsonStrAppendCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"JSON.STRAPPEND\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/json_strlen.ts\nvar JsonStrLenCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"JSON.STRLEN\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/json_toggle.ts\nvar JsonToggleCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"JSON.TOGGLE\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/json_type.ts\nvar JsonTypeCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"JSON.TYPE\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/keys.ts\nvar KeysCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"keys\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/lindex.ts\nvar LIndexCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"lindex\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/linsert.ts\nvar LInsertCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"linsert\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/llen.ts\nvar LLenCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"llen\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/lmove.ts\nvar LMoveCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"lmove\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/lmpop.ts\nvar LmPopCommand = class extends Command {\n  constructor(cmd, opts) {\n    const [numkeys, keys, direction, count] = cmd;\n    super([\"LMPOP\", numkeys, ...keys, direction, ...count ? [\"COUNT\", count] : []], opts);\n  }\n};\n\n// pkg/commands/lpop.ts\nvar LPopCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"lpop\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/lpos.ts\nvar LPosCommand = class extends Command {\n  constructor(cmd, opts) {\n    const args = [\"lpos\", cmd[0], cmd[1]];\n    if (typeof cmd[2]?.rank === \"number\") {\n      args.push(\"rank\", cmd[2].rank);\n    }\n    if (typeof cmd[2]?.count === \"number\") {\n      args.push(\"count\", cmd[2].count);\n    }\n    if (typeof cmd[2]?.maxLen === \"number\") {\n      args.push(\"maxLen\", cmd[2].maxLen);\n    }\n    super(args, opts);\n  }\n};\n\n// pkg/commands/lpush.ts\nvar LPushCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"lpush\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/lpushx.ts\nvar LPushXCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"lpushx\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/lrange.ts\nvar LRangeCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"lrange\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/lrem.ts\nvar LRemCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"lrem\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/lset.ts\nvar LSetCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"lset\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/ltrim.ts\nvar LTrimCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"ltrim\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/mget.ts\nvar MGetCommand = class extends Command {\n  constructor(cmd, opts) {\n    const keys = Array.isArray(cmd[0]) ? cmd[0] : cmd;\n    super([\"mget\", ...keys], opts);\n  }\n};\n\n// pkg/commands/mset.ts\nvar MSetCommand = class extends Command {\n  constructor([kv], opts) {\n    super([\"mset\", ...Object.entries(kv).flatMap(([key, value]) => [key, value])], opts);\n  }\n};\n\n// pkg/commands/msetnx.ts\nvar MSetNXCommand = class extends Command {\n  constructor([kv], opts) {\n    super([\"msetnx\", ...Object.entries(kv).flat()], opts);\n  }\n};\n\n// pkg/commands/persist.ts\nvar PersistCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"persist\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/pexpire.ts\nvar PExpireCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"pexpire\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/pexpireat.ts\nvar PExpireAtCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"pexpireat\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/pfadd.ts\nvar PfAddCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"pfadd\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/pfcount.ts\nvar PfCountCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"pfcount\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/pfmerge.ts\nvar PfMergeCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"pfmerge\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/ping.ts\nvar PingCommand = class extends Command {\n  constructor(cmd, opts) {\n    const command = [\"ping\"];\n    if (cmd?.[0] !== void 0) {\n      command.push(cmd[0]);\n    }\n    super(command, opts);\n  }\n};\n\n// pkg/commands/psetex.ts\nvar PSetEXCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"psetex\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/pttl.ts\nvar PTtlCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"pttl\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/publish.ts\nvar PublishCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"publish\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/randomkey.ts\nvar RandomKeyCommand = class extends Command {\n  constructor(opts) {\n    super([\"randomkey\"], opts);\n  }\n};\n\n// pkg/commands/rename.ts\nvar RenameCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"rename\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/renamenx.ts\nvar RenameNXCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"renamenx\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/rpop.ts\nvar RPopCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"rpop\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/rpush.ts\nvar RPushCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"rpush\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/rpushx.ts\nvar RPushXCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"rpushx\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/sadd.ts\nvar SAddCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"sadd\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/scan.ts\nvar ScanCommand = class extends Command {\n  constructor([cursor, opts], cmdOpts) {\n    const command = [\"scan\", cursor];\n    if (opts?.match) {\n      command.push(\"match\", opts.match);\n    }\n    if (typeof opts?.count === \"number\") {\n      command.push(\"count\", opts.count);\n    }\n    if (opts && \"withType\" in opts && opts.withType === true) {\n      command.push(\"withtype\");\n    } else if (opts && \"type\" in opts && opts.type && opts.type.length > 0) {\n      command.push(\"type\", opts.type);\n    }\n    super(command, {\n      // @ts-expect-error ignore types here\n      deserialize: opts?.withType ? deserializeScanWithTypesResponse : deserializeScanResponse,\n      ...cmdOpts\n    });\n  }\n};\n\n// pkg/commands/scard.ts\nvar SCardCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"scard\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/script_exists.ts\nvar ScriptExistsCommand = class extends Command {\n  constructor(hashes, opts) {\n    super([\"script\", \"exists\", ...hashes], {\n      deserialize: (result) => result,\n      ...opts\n    });\n  }\n};\n\n// pkg/commands/script_flush.ts\nvar ScriptFlushCommand = class extends Command {\n  constructor([opts], cmdOpts) {\n    const cmd = [\"script\", \"flush\"];\n    if (opts?.sync) {\n      cmd.push(\"sync\");\n    } else if (opts?.async) {\n      cmd.push(\"async\");\n    }\n    super(cmd, cmdOpts);\n  }\n};\n\n// pkg/commands/script_load.ts\nvar ScriptLoadCommand = class extends Command {\n  constructor(args, opts) {\n    super([\"script\", \"load\", ...args], opts);\n  }\n};\n\n// pkg/commands/sdiff.ts\nvar SDiffCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"sdiff\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/sdiffstore.ts\nvar SDiffStoreCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"sdiffstore\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/set.ts\nvar SetCommand = class extends Command {\n  constructor([key, value, opts], cmdOpts) {\n    const command = [\"set\", key, value];\n    if (opts) {\n      if (\"nx\" in opts && opts.nx) {\n        command.push(\"nx\");\n      } else if (\"xx\" in opts && opts.xx) {\n        command.push(\"xx\");\n      }\n      if (\"get\" in opts && opts.get) {\n        command.push(\"get\");\n      }\n      if (\"ex\" in opts && typeof opts.ex === \"number\") {\n        command.push(\"ex\", opts.ex);\n      } else if (\"px\" in opts && typeof opts.px === \"number\") {\n        command.push(\"px\", opts.px);\n      } else if (\"exat\" in opts && typeof opts.exat === \"number\") {\n        command.push(\"exat\", opts.exat);\n      } else if (\"pxat\" in opts && typeof opts.pxat === \"number\") {\n        command.push(\"pxat\", opts.pxat);\n      } else if (\"keepTtl\" in opts && opts.keepTtl) {\n        command.push(\"keepTtl\");\n      }\n    }\n    super(command, cmdOpts);\n  }\n};\n\n// pkg/commands/setbit.ts\nvar SetBitCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"setbit\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/setex.ts\nvar SetExCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"setex\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/setnx.ts\nvar SetNxCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"setnx\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/setrange.ts\nvar SetRangeCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"setrange\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/sinter.ts\nvar SInterCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"sinter\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/sinterstore.ts\nvar SInterStoreCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"sinterstore\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/sismember.ts\nvar SIsMemberCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"sismember\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/smembers.ts\nvar SMembersCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"smembers\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/smismember.ts\nvar SMIsMemberCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"smismember\", cmd[0], ...cmd[1]], opts);\n  }\n};\n\n// pkg/commands/smove.ts\nvar SMoveCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"smove\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/spop.ts\nvar SPopCommand = class extends Command {\n  constructor([key, count], opts) {\n    const command = [\"spop\", key];\n    if (typeof count === \"number\") {\n      command.push(count);\n    }\n    super(command, opts);\n  }\n};\n\n// pkg/commands/srandmember.ts\nvar SRandMemberCommand = class extends Command {\n  constructor([key, count], opts) {\n    const command = [\"srandmember\", key];\n    if (typeof count === \"number\") {\n      command.push(count);\n    }\n    super(command, opts);\n  }\n};\n\n// pkg/commands/srem.ts\nvar SRemCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"srem\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/sscan.ts\nvar SScanCommand = class extends Command {\n  constructor([key, cursor, opts], cmdOpts) {\n    const command = [\"sscan\", key, cursor];\n    if (opts?.match) {\n      command.push(\"match\", opts.match);\n    }\n    if (typeof opts?.count === \"number\") {\n      command.push(\"count\", opts.count);\n    }\n    super(command, {\n      deserialize: deserializeScanResponse,\n      ...cmdOpts\n    });\n  }\n};\n\n// pkg/commands/strlen.ts\nvar StrLenCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"strlen\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/sunion.ts\nvar SUnionCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"sunion\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/sunionstore.ts\nvar SUnionStoreCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"sunionstore\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/time.ts\nvar TimeCommand = class extends Command {\n  constructor(opts) {\n    super([\"time\"], opts);\n  }\n};\n\n// pkg/commands/touch.ts\nvar TouchCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"touch\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/ttl.ts\nvar TtlCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"ttl\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/type.ts\nvar TypeCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"type\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/unlink.ts\nvar UnlinkCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"unlink\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/xack.ts\nvar XAckCommand = class extends Command {\n  constructor([key, group, id], opts) {\n    const ids = Array.isArray(id) ? [...id] : [id];\n    super([\"XACK\", key, group, ...ids], opts);\n  }\n};\n\n// pkg/commands/xadd.ts\nvar XAddCommand = class extends Command {\n  constructor([key, id, entries, opts], commandOptions) {\n    const command = [\"XADD\", key];\n    if (opts) {\n      if (opts.nomkStream) {\n        command.push(\"NOMKSTREAM\");\n      }\n      if (opts.trim) {\n        command.push(opts.trim.type, opts.trim.comparison, opts.trim.threshold);\n        if (opts.trim.limit !== void 0) {\n          command.push(\"LIMIT\", opts.trim.limit);\n        }\n      }\n    }\n    command.push(id);\n    for (const [k, v] of Object.entries(entries)) {\n      command.push(k, v);\n    }\n    super(command, commandOptions);\n  }\n};\n\n// pkg/commands/xautoclaim.ts\nvar XAutoClaim = class extends Command {\n  constructor([key, group, consumer, minIdleTime, start, options], opts) {\n    const commands = [];\n    if (options?.count) {\n      commands.push(\"COUNT\", options.count);\n    }\n    if (options?.justId) {\n      commands.push(\"JUSTID\");\n    }\n    super([\"XAUTOCLAIM\", key, group, consumer, minIdleTime, start, ...commands], opts);\n  }\n};\n\n// pkg/commands/xclaim.ts\nvar XClaimCommand = class extends Command {\n  constructor([key, group, consumer, minIdleTime, id, options], opts) {\n    const ids = Array.isArray(id) ? [...id] : [id];\n    const commands = [];\n    if (options?.idleMS) {\n      commands.push(\"IDLE\", options.idleMS);\n    }\n    if (options?.idleMS) {\n      commands.push(\"TIME\", options.timeMS);\n    }\n    if (options?.retryCount) {\n      commands.push(\"RETRYCOUNT\", options.retryCount);\n    }\n    if (options?.force) {\n      commands.push(\"FORCE\");\n    }\n    if (options?.justId) {\n      commands.push(\"JUSTID\");\n    }\n    if (options?.lastId) {\n      commands.push(\"LASTID\", options.lastId);\n    }\n    super([\"XCLAIM\", key, group, consumer, minIdleTime, ...ids, ...commands], opts);\n  }\n};\n\n// pkg/commands/xdel.ts\nvar XDelCommand = class extends Command {\n  constructor([key, ids], opts) {\n    const cmds = Array.isArray(ids) ? [...ids] : [ids];\n    super([\"XDEL\", key, ...cmds], opts);\n  }\n};\n\n// pkg/commands/xgroup.ts\nvar XGroupCommand = class extends Command {\n  constructor([key, opts], commandOptions) {\n    const command = [\"XGROUP\"];\n    switch (opts.type) {\n      case \"CREATE\": {\n        command.push(\"CREATE\", key, opts.group, opts.id);\n        if (opts.options) {\n          if (opts.options.MKSTREAM) {\n            command.push(\"MKSTREAM\");\n          }\n          if (opts.options.ENTRIESREAD !== void 0) {\n            command.push(\"ENTRIESREAD\", opts.options.ENTRIESREAD.toString());\n          }\n        }\n        break;\n      }\n      case \"CREATECONSUMER\": {\n        command.push(\"CREATECONSUMER\", key, opts.group, opts.consumer);\n        break;\n      }\n      case \"DELCONSUMER\": {\n        command.push(\"DELCONSUMER\", key, opts.group, opts.consumer);\n        break;\n      }\n      case \"DESTROY\": {\n        command.push(\"DESTROY\", key, opts.group);\n        break;\n      }\n      case \"SETID\": {\n        command.push(\"SETID\", key, opts.group, opts.id);\n        if (opts.options?.ENTRIESREAD !== void 0) {\n          command.push(\"ENTRIESREAD\", opts.options.ENTRIESREAD.toString());\n        }\n        break;\n      }\n      default: {\n        throw new Error(\"Invalid XGROUP\");\n      }\n    }\n    super(command, commandOptions);\n  }\n};\n\n// pkg/commands/xinfo.ts\nvar XInfoCommand = class extends Command {\n  constructor([key, options], opts) {\n    const cmds = [];\n    if (options.type === \"CONSUMERS\") {\n      cmds.push(\"CONSUMERS\", key, options.group);\n    } else {\n      cmds.push(\"GROUPS\", key);\n    }\n    super([\"XINFO\", ...cmds], opts);\n  }\n};\n\n// pkg/commands/xlen.ts\nvar XLenCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"XLEN\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/xpending.ts\nvar XPendingCommand = class extends Command {\n  constructor([key, group, start, end, count, options], opts) {\n    const consumers = options?.consumer === void 0 ? [] : Array.isArray(options.consumer) ? [...options.consumer] : [options.consumer];\n    super(\n      [\n        \"XPENDING\",\n        key,\n        group,\n        ...options?.idleTime ? [\"IDLE\", options.idleTime] : [],\n        start,\n        end,\n        count,\n        ...consumers\n      ],\n      opts\n    );\n  }\n};\n\n// pkg/commands/xrange.ts\nfunction deserialize4(result) {\n  const obj = {};\n  for (const e of result) {\n    for (let i = 0; i < e.length; i += 2) {\n      const streamId = e[i];\n      const entries = e[i + 1];\n      if (!(streamId in obj)) {\n        obj[streamId] = {};\n      }\n      for (let j = 0; j < entries.length; j += 2) {\n        const field = entries[j];\n        const value = entries[j + 1];\n        try {\n          obj[streamId][field] = JSON.parse(value);\n        } catch {\n          obj[streamId][field] = value;\n        }\n      }\n    }\n  }\n  return obj;\n}\nvar XRangeCommand = class extends Command {\n  constructor([key, start, end, count], opts) {\n    const command = [\"XRANGE\", key, start, end];\n    if (typeof count === \"number\") {\n      command.push(\"COUNT\", count);\n    }\n    super(command, {\n      deserialize: (result) => deserialize4(result),\n      ...opts\n    });\n  }\n};\n\n// pkg/commands/xread.ts\nvar UNBALANCED_XREAD_ERR = \"ERR Unbalanced XREAD list of streams: for each stream key an ID or '$' must be specified\";\nvar XReadCommand = class extends Command {\n  constructor([key, id, options], opts) {\n    if (Array.isArray(key) && Array.isArray(id) && key.length !== id.length) {\n      throw new Error(UNBALANCED_XREAD_ERR);\n    }\n    const commands = [];\n    if (typeof options?.count === \"number\") {\n      commands.push(\"COUNT\", options.count);\n    }\n    if (typeof options?.blockMS === \"number\") {\n      commands.push(\"BLOCK\", options.blockMS);\n    }\n    commands.push(\n      \"STREAMS\",\n      ...Array.isArray(key) ? [...key] : [key],\n      ...Array.isArray(id) ? [...id] : [id]\n    );\n    super([\"XREAD\", ...commands], opts);\n  }\n};\n\n// pkg/commands/xreadgroup.ts\nvar UNBALANCED_XREADGROUP_ERR = \"ERR Unbalanced XREADGROUP list of streams: for each stream key an ID or '$' must be specified\";\nvar XReadGroupCommand = class extends Command {\n  constructor([group, consumer, key, id, options], opts) {\n    if (Array.isArray(key) && Array.isArray(id) && key.length !== id.length) {\n      throw new Error(UNBALANCED_XREADGROUP_ERR);\n    }\n    const commands = [];\n    if (typeof options?.count === \"number\") {\n      commands.push(\"COUNT\", options.count);\n    }\n    if (typeof options?.blockMS === \"number\") {\n      commands.push(\"BLOCK\", options.blockMS);\n    }\n    if (typeof options?.NOACK === \"boolean\" && options.NOACK) {\n      commands.push(\"NOACK\");\n    }\n    commands.push(\n      \"STREAMS\",\n      ...Array.isArray(key) ? [...key] : [key],\n      ...Array.isArray(id) ? [...id] : [id]\n    );\n    super([\"XREADGROUP\", \"GROUP\", group, consumer, ...commands], opts);\n  }\n};\n\n// pkg/commands/xrevrange.ts\nvar XRevRangeCommand = class extends Command {\n  constructor([key, end, start, count], opts) {\n    const command = [\"XREVRANGE\", key, end, start];\n    if (typeof count === \"number\") {\n      command.push(\"COUNT\", count);\n    }\n    super(command, {\n      deserialize: (result) => deserialize5(result),\n      ...opts\n    });\n  }\n};\nfunction deserialize5(result) {\n  const obj = {};\n  for (const e of result) {\n    for (let i = 0; i < e.length; i += 2) {\n      const streamId = e[i];\n      const entries = e[i + 1];\n      if (!(streamId in obj)) {\n        obj[streamId] = {};\n      }\n      for (let j = 0; j < entries.length; j += 2) {\n        const field = entries[j];\n        const value = entries[j + 1];\n        try {\n          obj[streamId][field] = JSON.parse(value);\n        } catch {\n          obj[streamId][field] = value;\n        }\n      }\n    }\n  }\n  return obj;\n}\n\n// pkg/commands/xtrim.ts\nvar XTrimCommand = class extends Command {\n  constructor([key, options], opts) {\n    const { limit, strategy, threshold, exactness = \"~\" } = options;\n    super([\"XTRIM\", key, strategy, exactness, threshold, ...limit ? [\"LIMIT\", limit] : []], opts);\n  }\n};\n\n// pkg/commands/zadd.ts\nvar ZAddCommand = class extends Command {\n  constructor([key, arg1, ...arg2], opts) {\n    const command = [\"zadd\", key];\n    if (\"nx\" in arg1 && arg1.nx) {\n      command.push(\"nx\");\n    } else if (\"xx\" in arg1 && arg1.xx) {\n      command.push(\"xx\");\n    }\n    if (\"ch\" in arg1 && arg1.ch) {\n      command.push(\"ch\");\n    }\n    if (\"incr\" in arg1 && arg1.incr) {\n      command.push(\"incr\");\n    }\n    if (\"lt\" in arg1 && arg1.lt) {\n      command.push(\"lt\");\n    } else if (\"gt\" in arg1 && arg1.gt) {\n      command.push(\"gt\");\n    }\n    if (\"score\" in arg1 && \"member\" in arg1) {\n      command.push(arg1.score, arg1.member);\n    }\n    command.push(...arg2.flatMap(({ score, member }) => [score, member]));\n    super(command, opts);\n  }\n};\n\n// pkg/commands/zcard.ts\nvar ZCardCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"zcard\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/zcount.ts\nvar ZCountCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"zcount\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/zincrby.ts\nvar ZIncrByCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"zincrby\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/zinterstore.ts\nvar ZInterStoreCommand = class extends Command {\n  constructor([destination, numKeys, keyOrKeys, opts], cmdOpts) {\n    const command = [\"zinterstore\", destination, numKeys];\n    if (Array.isArray(keyOrKeys)) {\n      command.push(...keyOrKeys);\n    } else {\n      command.push(keyOrKeys);\n    }\n    if (opts) {\n      if (\"weights\" in opts && opts.weights) {\n        command.push(\"weights\", ...opts.weights);\n      } else if (\"weight\" in opts && typeof opts.weight === \"number\") {\n        command.push(\"weights\", opts.weight);\n      }\n      if (\"aggregate\" in opts) {\n        command.push(\"aggregate\", opts.aggregate);\n      }\n    }\n    super(command, cmdOpts);\n  }\n};\n\n// pkg/commands/zlexcount.ts\nvar ZLexCountCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"zlexcount\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/zpopmax.ts\nvar ZPopMaxCommand = class extends Command {\n  constructor([key, count], opts) {\n    const command = [\"zpopmax\", key];\n    if (typeof count === \"number\") {\n      command.push(count);\n    }\n    super(command, opts);\n  }\n};\n\n// pkg/commands/zpopmin.ts\nvar ZPopMinCommand = class extends Command {\n  constructor([key, count], opts) {\n    const command = [\"zpopmin\", key];\n    if (typeof count === \"number\") {\n      command.push(count);\n    }\n    super(command, opts);\n  }\n};\n\n// pkg/commands/zrange.ts\nvar ZRangeCommand = class extends Command {\n  constructor([key, min, max, opts], cmdOpts) {\n    const command = [\"zrange\", key, min, max];\n    if (opts?.byScore) {\n      command.push(\"byscore\");\n    }\n    if (opts?.byLex) {\n      command.push(\"bylex\");\n    }\n    if (opts?.rev) {\n      command.push(\"rev\");\n    }\n    if (opts?.count !== void 0 && opts.offset !== void 0) {\n      command.push(\"limit\", opts.offset, opts.count);\n    }\n    if (opts?.withScores) {\n      command.push(\"withscores\");\n    }\n    super(command, cmdOpts);\n  }\n};\n\n// pkg/commands/zrank.ts\nvar ZRankCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"zrank\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/zrem.ts\nvar ZRemCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"zrem\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/zremrangebylex.ts\nvar ZRemRangeByLexCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"zremrangebylex\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/zremrangebyrank.ts\nvar ZRemRangeByRankCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"zremrangebyrank\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/zremrangebyscore.ts\nvar ZRemRangeByScoreCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"zremrangebyscore\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/zrevrank.ts\nvar ZRevRankCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"zrevrank\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/zscan.ts\nvar ZScanCommand = class extends Command {\n  constructor([key, cursor, opts], cmdOpts) {\n    const command = [\"zscan\", key, cursor];\n    if (opts?.match) {\n      command.push(\"match\", opts.match);\n    }\n    if (typeof opts?.count === \"number\") {\n      command.push(\"count\", opts.count);\n    }\n    super(command, {\n      deserialize: deserializeScanResponse,\n      ...cmdOpts\n    });\n  }\n};\n\n// pkg/commands/zscore.ts\nvar ZScoreCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"zscore\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/zunion.ts\nvar ZUnionCommand = class extends Command {\n  constructor([numKeys, keyOrKeys, opts], cmdOpts) {\n    const command = [\"zunion\", numKeys];\n    if (Array.isArray(keyOrKeys)) {\n      command.push(...keyOrKeys);\n    } else {\n      command.push(keyOrKeys);\n    }\n    if (opts) {\n      if (\"weights\" in opts && opts.weights) {\n        command.push(\"weights\", ...opts.weights);\n      } else if (\"weight\" in opts && typeof opts.weight === \"number\") {\n        command.push(\"weights\", opts.weight);\n      }\n      if (\"aggregate\" in opts) {\n        command.push(\"aggregate\", opts.aggregate);\n      }\n      if (opts.withScores) {\n        command.push(\"withscores\");\n      }\n    }\n    super(command, cmdOpts);\n  }\n};\n\n// pkg/commands/zunionstore.ts\nvar ZUnionStoreCommand = class extends Command {\n  constructor([destination, numKeys, keyOrKeys, opts], cmdOpts) {\n    const command = [\"zunionstore\", destination, numKeys];\n    if (Array.isArray(keyOrKeys)) {\n      command.push(...keyOrKeys);\n    } else {\n      command.push(keyOrKeys);\n    }\n    if (opts) {\n      if (\"weights\" in opts && opts.weights) {\n        command.push(\"weights\", ...opts.weights);\n      } else if (\"weight\" in opts && typeof opts.weight === \"number\") {\n        command.push(\"weights\", opts.weight);\n      }\n      if (\"aggregate\" in opts) {\n        command.push(\"aggregate\", opts.aggregate);\n      }\n    }\n    super(command, cmdOpts);\n  }\n};\n\n// pkg/commands/zdiffstore.ts\nvar ZDiffStoreCommand = class extends Command {\n  constructor(cmd, opts) {\n    super([\"zdiffstore\", ...cmd], opts);\n  }\n};\n\n// pkg/commands/zmscore.ts\nvar ZMScoreCommand = class extends Command {\n  constructor(cmd, opts) {\n    const [key, members] = cmd;\n    super([\"zmscore\", key, ...members], opts);\n  }\n};\n\n// pkg/pipeline.ts\nvar Pipeline = class {\n  client;\n  commands;\n  commandOptions;\n  multiExec;\n  constructor(opts) {\n    this.client = opts.client;\n    this.commands = [];\n    this.commandOptions = opts.commandOptions;\n    this.multiExec = opts.multiExec ?? false;\n    if (this.commandOptions?.latencyLogging) {\n      const originalExec = this.exec.bind(this);\n      this.exec = async (options) => {\n        const start = performance.now();\n        const result = await (options ? originalExec(options) : originalExec());\n        const end = performance.now();\n        const loggerResult = (end - start).toFixed(2);\n        console.log(\n          `Latency for \\x1B[38;2;19;185;39m${this.multiExec ? [\"MULTI-EXEC\"] : [\"PIPELINE\"].toString().toUpperCase()}\\x1B[0m: \\x1B[38;2;0;255;255m${loggerResult} ms\\x1B[0m`\n        );\n        return result;\n      };\n    }\n  }\n  exec = async (options) => {\n    if (this.commands.length === 0) {\n      throw new Error(\"Pipeline is empty\");\n    }\n    const path = this.multiExec ? [\"multi-exec\"] : [\"pipeline\"];\n    const res = await this.client.request({\n      path,\n      body: Object.values(this.commands).map((c) => c.command)\n    });\n    return options?.keepErrors ? res.map(({ error, result }, i) => {\n      return {\n        error,\n        result: this.commands[i].deserialize(result)\n      };\n    }) : res.map(({ error, result }, i) => {\n      if (error) {\n        throw new UpstashError(\n          `Command ${i + 1} [ ${this.commands[i].command[0]} ] failed: ${error}`\n        );\n      }\n      return this.commands[i].deserialize(result);\n    });\n  };\n  /**\n   * Returns the length of pipeline before the execution\n   */\n  length() {\n    return this.commands.length;\n  }\n  /**\n   * Pushes a command into the pipeline and returns a chainable instance of the\n   * pipeline\n   */\n  chain(command) {\n    this.commands.push(command);\n    return this;\n  }\n  /**\n   * @see https://redis.io/commands/append\n   */\n  append = (...args) => this.chain(new AppendCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/bitcount\n   */\n  bitcount = (...args) => this.chain(new BitCountCommand(args, this.commandOptions));\n  /**\n   * Returns an instance that can be used to execute `BITFIELD` commands on one key.\n   *\n   * @example\n   * ```typescript\n   * redis.set(\"mykey\", 0);\n   * const result = await redis.pipeline()\n   *   .bitfield(\"mykey\")\n   *   .set(\"u4\", 0, 16)\n   *   .incr(\"u4\", \"#1\", 1)\n   *   .exec();\n   * console.log(result); // [[0, 1]]\n   * ```\n   *\n   * @see https://redis.io/commands/bitfield\n   */\n  bitfield = (...args) => new BitFieldCommand(args, this.client, this.commandOptions, this.chain.bind(this));\n  /**\n   * @see https://redis.io/commands/bitop\n   */\n  bitop = (op, destinationKey, sourceKey, ...sourceKeys) => this.chain(\n    new BitOpCommand([op, destinationKey, sourceKey, ...sourceKeys], this.commandOptions)\n  );\n  /**\n   * @see https://redis.io/commands/bitpos\n   */\n  bitpos = (...args) => this.chain(new BitPosCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/copy\n   */\n  copy = (...args) => this.chain(new CopyCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/zdiffstore\n   */\n  zdiffstore = (...args) => this.chain(new ZDiffStoreCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/dbsize\n   */\n  dbsize = () => this.chain(new DBSizeCommand(this.commandOptions));\n  /**\n   * @see https://redis.io/commands/decr\n   */\n  decr = (...args) => this.chain(new DecrCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/decrby\n   */\n  decrby = (...args) => this.chain(new DecrByCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/del\n   */\n  del = (...args) => this.chain(new DelCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/echo\n   */\n  echo = (...args) => this.chain(new EchoCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/eval_ro\n   */\n  evalRo = (...args) => this.chain(new EvalROCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/eval\n   */\n  eval = (...args) => this.chain(new EvalCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/evalsha_ro\n   */\n  evalshaRo = (...args) => this.chain(new EvalshaROCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/evalsha\n   */\n  evalsha = (...args) => this.chain(new EvalshaCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/exists\n   */\n  exists = (...args) => this.chain(new ExistsCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/expire\n   */\n  expire = (...args) => this.chain(new ExpireCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/expireat\n   */\n  expireat = (...args) => this.chain(new ExpireAtCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/flushall\n   */\n  flushall = (args) => this.chain(new FlushAllCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/flushdb\n   */\n  flushdb = (...args) => this.chain(new FlushDBCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/geoadd\n   */\n  geoadd = (...args) => this.chain(new GeoAddCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/geodist\n   */\n  geodist = (...args) => this.chain(new GeoDistCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/geopos\n   */\n  geopos = (...args) => this.chain(new GeoPosCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/geohash\n   */\n  geohash = (...args) => this.chain(new GeoHashCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/geosearch\n   */\n  geosearch = (...args) => this.chain(new GeoSearchCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/geosearchstore\n   */\n  geosearchstore = (...args) => this.chain(new GeoSearchStoreCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/get\n   */\n  get = (...args) => this.chain(new GetCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/getbit\n   */\n  getbit = (...args) => this.chain(new GetBitCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/getdel\n   */\n  getdel = (...args) => this.chain(new GetDelCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/getex\n   */\n  getex = (...args) => this.chain(new GetExCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/getrange\n   */\n  getrange = (...args) => this.chain(new GetRangeCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/getset\n   */\n  getset = (key, value) => this.chain(new GetSetCommand([key, value], this.commandOptions));\n  /**\n   * @see https://redis.io/commands/hdel\n   */\n  hdel = (...args) => this.chain(new HDelCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/hexists\n   */\n  hexists = (...args) => this.chain(new HExistsCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/hexpire\n   */\n  hexpire = (...args) => this.chain(new HExpireCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/hexpireat\n   */\n  hexpireat = (...args) => this.chain(new HExpireAtCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/hexpiretime\n   */\n  hexpiretime = (...args) => this.chain(new HExpireTimeCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/httl\n   */\n  httl = (...args) => this.chain(new HTtlCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/hpexpire\n   */\n  hpexpire = (...args) => this.chain(new HPExpireCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/hpexpireat\n   */\n  hpexpireat = (...args) => this.chain(new HPExpireAtCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/hpexpiretime\n   */\n  hpexpiretime = (...args) => this.chain(new HPExpireTimeCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/hpttl\n   */\n  hpttl = (...args) => this.chain(new HPTtlCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/hpersist\n   */\n  hpersist = (...args) => this.chain(new HPersistCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/hget\n   */\n  hget = (...args) => this.chain(new HGetCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/hgetall\n   */\n  hgetall = (...args) => this.chain(new HGetAllCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/hincrby\n   */\n  hincrby = (...args) => this.chain(new HIncrByCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/hincrbyfloat\n   */\n  hincrbyfloat = (...args) => this.chain(new HIncrByFloatCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/hkeys\n   */\n  hkeys = (...args) => this.chain(new HKeysCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/hlen\n   */\n  hlen = (...args) => this.chain(new HLenCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/hmget\n   */\n  hmget = (...args) => this.chain(new HMGetCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/hmset\n   */\n  hmset = (key, kv) => this.chain(new HMSetCommand([key, kv], this.commandOptions));\n  /**\n   * @see https://redis.io/commands/hrandfield\n   */\n  hrandfield = (key, count, withValues) => this.chain(new HRandFieldCommand([key, count, withValues], this.commandOptions));\n  /**\n   * @see https://redis.io/commands/hscan\n   */\n  hscan = (...args) => this.chain(new HScanCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/hset\n   */\n  hset = (key, kv) => this.chain(new HSetCommand([key, kv], this.commandOptions));\n  /**\n   * @see https://redis.io/commands/hsetnx\n   */\n  hsetnx = (key, field, value) => this.chain(new HSetNXCommand([key, field, value], this.commandOptions));\n  /**\n   * @see https://redis.io/commands/hstrlen\n   */\n  hstrlen = (...args) => this.chain(new HStrLenCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/hvals\n   */\n  hvals = (...args) => this.chain(new HValsCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/incr\n   */\n  incr = (...args) => this.chain(new IncrCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/incrby\n   */\n  incrby = (...args) => this.chain(new IncrByCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/incrbyfloat\n   */\n  incrbyfloat = (...args) => this.chain(new IncrByFloatCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/keys\n   */\n  keys = (...args) => this.chain(new KeysCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/lindex\n   */\n  lindex = (...args) => this.chain(new LIndexCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/linsert\n   */\n  linsert = (key, direction, pivot, value) => this.chain(new LInsertCommand([key, direction, pivot, value], this.commandOptions));\n  /**\n   * @see https://redis.io/commands/llen\n   */\n  llen = (...args) => this.chain(new LLenCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/lmove\n   */\n  lmove = (...args) => this.chain(new LMoveCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/lpop\n   */\n  lpop = (...args) => this.chain(new LPopCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/lmpop\n   */\n  lmpop = (...args) => this.chain(new LmPopCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/lpos\n   */\n  lpos = (...args) => this.chain(new LPosCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/lpush\n   */\n  lpush = (key, ...elements) => this.chain(new LPushCommand([key, ...elements], this.commandOptions));\n  /**\n   * @see https://redis.io/commands/lpushx\n   */\n  lpushx = (key, ...elements) => this.chain(new LPushXCommand([key, ...elements], this.commandOptions));\n  /**\n   * @see https://redis.io/commands/lrange\n   */\n  lrange = (...args) => this.chain(new LRangeCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/lrem\n   */\n  lrem = (key, count, value) => this.chain(new LRemCommand([key, count, value], this.commandOptions));\n  /**\n   * @see https://redis.io/commands/lset\n   */\n  lset = (key, index, value) => this.chain(new LSetCommand([key, index, value], this.commandOptions));\n  /**\n   * @see https://redis.io/commands/ltrim\n   */\n  ltrim = (...args) => this.chain(new LTrimCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/mget\n   */\n  mget = (...args) => this.chain(new MGetCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/mset\n   */\n  mset = (kv) => this.chain(new MSetCommand([kv], this.commandOptions));\n  /**\n   * @see https://redis.io/commands/msetnx\n   */\n  msetnx = (kv) => this.chain(new MSetNXCommand([kv], this.commandOptions));\n  /**\n   * @see https://redis.io/commands/persist\n   */\n  persist = (...args) => this.chain(new PersistCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/pexpire\n   */\n  pexpire = (...args) => this.chain(new PExpireCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/pexpireat\n   */\n  pexpireat = (...args) => this.chain(new PExpireAtCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/pfadd\n   */\n  pfadd = (...args) => this.chain(new PfAddCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/pfcount\n   */\n  pfcount = (...args) => this.chain(new PfCountCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/pfmerge\n   */\n  pfmerge = (...args) => this.chain(new PfMergeCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/ping\n   */\n  ping = (args) => this.chain(new PingCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/psetex\n   */\n  psetex = (key, ttl, value) => this.chain(new PSetEXCommand([key, ttl, value], this.commandOptions));\n  /**\n   * @see https://redis.io/commands/pttl\n   */\n  pttl = (...args) => this.chain(new PTtlCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/publish\n   */\n  publish = (...args) => this.chain(new PublishCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/randomkey\n   */\n  randomkey = () => this.chain(new RandomKeyCommand(this.commandOptions));\n  /**\n   * @see https://redis.io/commands/rename\n   */\n  rename = (...args) => this.chain(new RenameCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/renamenx\n   */\n  renamenx = (...args) => this.chain(new RenameNXCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/rpop\n   */\n  rpop = (...args) => this.chain(new RPopCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/rpush\n   */\n  rpush = (key, ...elements) => this.chain(new RPushCommand([key, ...elements], this.commandOptions));\n  /**\n   * @see https://redis.io/commands/rpushx\n   */\n  rpushx = (key, ...elements) => this.chain(new RPushXCommand([key, ...elements], this.commandOptions));\n  /**\n   * @see https://redis.io/commands/sadd\n   */\n  sadd = (key, member, ...members) => this.chain(new SAddCommand([key, member, ...members], this.commandOptions));\n  /**\n   * @see https://redis.io/commands/scan\n   */\n  scan = (...args) => this.chain(new ScanCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/scard\n   */\n  scard = (...args) => this.chain(new SCardCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/script-exists\n   */\n  scriptExists = (...args) => this.chain(new ScriptExistsCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/script-flush\n   */\n  scriptFlush = (...args) => this.chain(new ScriptFlushCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/script-load\n   */\n  scriptLoad = (...args) => this.chain(new ScriptLoadCommand(args, this.commandOptions));\n  /*)*\n   * @see https://redis.io/commands/sdiff\n   */\n  sdiff = (...args) => this.chain(new SDiffCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/sdiffstore\n   */\n  sdiffstore = (...args) => this.chain(new SDiffStoreCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/set\n   */\n  set = (key, value, opts) => this.chain(new SetCommand([key, value, opts], this.commandOptions));\n  /**\n   * @see https://redis.io/commands/setbit\n   */\n  setbit = (...args) => this.chain(new SetBitCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/setex\n   */\n  setex = (key, ttl, value) => this.chain(new SetExCommand([key, ttl, value], this.commandOptions));\n  /**\n   * @see https://redis.io/commands/setnx\n   */\n  setnx = (key, value) => this.chain(new SetNxCommand([key, value], this.commandOptions));\n  /**\n   * @see https://redis.io/commands/setrange\n   */\n  setrange = (...args) => this.chain(new SetRangeCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/sinter\n   */\n  sinter = (...args) => this.chain(new SInterCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/sinterstore\n   */\n  sinterstore = (...args) => this.chain(new SInterStoreCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/sismember\n   */\n  sismember = (key, member) => this.chain(new SIsMemberCommand([key, member], this.commandOptions));\n  /**\n   * @see https://redis.io/commands/smembers\n   */\n  smembers = (...args) => this.chain(new SMembersCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/smismember\n   */\n  smismember = (key, members) => this.chain(new SMIsMemberCommand([key, members], this.commandOptions));\n  /**\n   * @see https://redis.io/commands/smove\n   */\n  smove = (source, destination, member) => this.chain(new SMoveCommand([source, destination, member], this.commandOptions));\n  /**\n   * @see https://redis.io/commands/spop\n   */\n  spop = (...args) => this.chain(new SPopCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/srandmember\n   */\n  srandmember = (...args) => this.chain(new SRandMemberCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/srem\n   */\n  srem = (key, ...members) => this.chain(new SRemCommand([key, ...members], this.commandOptions));\n  /**\n   * @see https://redis.io/commands/sscan\n   */\n  sscan = (...args) => this.chain(new SScanCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/strlen\n   */\n  strlen = (...args) => this.chain(new StrLenCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/sunion\n   */\n  sunion = (...args) => this.chain(new SUnionCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/sunionstore\n   */\n  sunionstore = (...args) => this.chain(new SUnionStoreCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/time\n   */\n  time = () => this.chain(new TimeCommand(this.commandOptions));\n  /**\n   * @see https://redis.io/commands/touch\n   */\n  touch = (...args) => this.chain(new TouchCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/ttl\n   */\n  ttl = (...args) => this.chain(new TtlCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/type\n   */\n  type = (...args) => this.chain(new TypeCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/unlink\n   */\n  unlink = (...args) => this.chain(new UnlinkCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/zadd\n   */\n  zadd = (...args) => {\n    if (\"score\" in args[1]) {\n      return this.chain(\n        new ZAddCommand([args[0], args[1], ...args.slice(2)], this.commandOptions)\n      );\n    }\n    return this.chain(\n      new ZAddCommand(\n        [args[0], args[1], ...args.slice(2)],\n        this.commandOptions\n      )\n    );\n  };\n  /**\n   * @see https://redis.io/commands/xadd\n   */\n  xadd = (...args) => this.chain(new XAddCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/xack\n   */\n  xack = (...args) => this.chain(new XAckCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/xdel\n   */\n  xdel = (...args) => this.chain(new XDelCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/xgroup\n   */\n  xgroup = (...args) => this.chain(new XGroupCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/xread\n   */\n  xread = (...args) => this.chain(new XReadCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/xreadgroup\n   */\n  xreadgroup = (...args) => this.chain(new XReadGroupCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/xinfo\n   */\n  xinfo = (...args) => this.chain(new XInfoCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/xlen\n   */\n  xlen = (...args) => this.chain(new XLenCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/xpending\n   */\n  xpending = (...args) => this.chain(new XPendingCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/xclaim\n   */\n  xclaim = (...args) => this.chain(new XClaimCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/xautoclaim\n   */\n  xautoclaim = (...args) => this.chain(new XAutoClaim(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/xtrim\n   */\n  xtrim = (...args) => this.chain(new XTrimCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/xrange\n   */\n  xrange = (...args) => this.chain(new XRangeCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/xrevrange\n   */\n  xrevrange = (...args) => this.chain(new XRevRangeCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/zcard\n   */\n  zcard = (...args) => this.chain(new ZCardCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/zcount\n   */\n  zcount = (...args) => this.chain(new ZCountCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/zincrby\n   */\n  zincrby = (key, increment, member) => this.chain(new ZIncrByCommand([key, increment, member], this.commandOptions));\n  /**\n   * @see https://redis.io/commands/zinterstore\n   */\n  zinterstore = (...args) => this.chain(new ZInterStoreCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/zlexcount\n   */\n  zlexcount = (...args) => this.chain(new ZLexCountCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/zmscore\n   */\n  zmscore = (...args) => this.chain(new ZMScoreCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/zpopmax\n   */\n  zpopmax = (...args) => this.chain(new ZPopMaxCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/zpopmin\n   */\n  zpopmin = (...args) => this.chain(new ZPopMinCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/zrange\n   */\n  zrange = (...args) => this.chain(new ZRangeCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/zrank\n   */\n  zrank = (key, member) => this.chain(new ZRankCommand([key, member], this.commandOptions));\n  /**\n   * @see https://redis.io/commands/zrem\n   */\n  zrem = (key, ...members) => this.chain(new ZRemCommand([key, ...members], this.commandOptions));\n  /**\n   * @see https://redis.io/commands/zremrangebylex\n   */\n  zremrangebylex = (...args) => this.chain(new ZRemRangeByLexCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/zremrangebyrank\n   */\n  zremrangebyrank = (...args) => this.chain(new ZRemRangeByRankCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/zremrangebyscore\n   */\n  zremrangebyscore = (...args) => this.chain(new ZRemRangeByScoreCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/zrevrank\n   */\n  zrevrank = (key, member) => this.chain(new ZRevRankCommand([key, member], this.commandOptions));\n  /**\n   * @see https://redis.io/commands/zscan\n   */\n  zscan = (...args) => this.chain(new ZScanCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/zscore\n   */\n  zscore = (key, member) => this.chain(new ZScoreCommand([key, member], this.commandOptions));\n  /**\n   * @see https://redis.io/commands/zunionstore\n   */\n  zunionstore = (...args) => this.chain(new ZUnionStoreCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/zunion\n   */\n  zunion = (...args) => this.chain(new ZUnionCommand(args, this.commandOptions));\n  /**\n   * @see https://redis.io/commands/?group=json\n   */\n  get json() {\n    return {\n      /**\n       * @see https://redis.io/commands/json.arrappend\n       */\n      arrappend: (...args) => this.chain(new JsonArrAppendCommand(args, this.commandOptions)),\n      /**\n       * @see https://redis.io/commands/json.arrindex\n       */\n      arrindex: (...args) => this.chain(new JsonArrIndexCommand(args, this.commandOptions)),\n      /**\n       * @see https://redis.io/commands/json.arrinsert\n       */\n      arrinsert: (...args) => this.chain(new JsonArrInsertCommand(args, this.commandOptions)),\n      /**\n       * @see https://redis.io/commands/json.arrlen\n       */\n      arrlen: (...args) => this.chain(new JsonArrLenCommand(args, this.commandOptions)),\n      /**\n       * @see https://redis.io/commands/json.arrpop\n       */\n      arrpop: (...args) => this.chain(new JsonArrPopCommand(args, this.commandOptions)),\n      /**\n       * @see https://redis.io/commands/json.arrtrim\n       */\n      arrtrim: (...args) => this.chain(new JsonArrTrimCommand(args, this.commandOptions)),\n      /**\n       * @see https://redis.io/commands/json.clear\n       */\n      clear: (...args) => this.chain(new JsonClearCommand(args, this.commandOptions)),\n      /**\n       * @see https://redis.io/commands/json.del\n       */\n      del: (...args) => this.chain(new JsonDelCommand(args, this.commandOptions)),\n      /**\n       * @see https://redis.io/commands/json.forget\n       */\n      forget: (...args) => this.chain(new JsonForgetCommand(args, this.commandOptions)),\n      /**\n       * @see https://redis.io/commands/json.get\n       */\n      get: (...args) => this.chain(new JsonGetCommand(args, this.commandOptions)),\n      /**\n       * @see https://redis.io/commands/json.merge\n       */\n      merge: (...args) => this.chain(new JsonMergeCommand(args, this.commandOptions)),\n      /**\n       * @see https://redis.io/commands/json.mget\n       */\n      mget: (...args) => this.chain(new JsonMGetCommand(args, this.commandOptions)),\n      /**\n       * @see https://redis.io/commands/json.mset\n       */\n      mset: (...args) => this.chain(new JsonMSetCommand(args, this.commandOptions)),\n      /**\n       * @see https://redis.io/commands/json.numincrby\n       */\n      numincrby: (...args) => this.chain(new JsonNumIncrByCommand(args, this.commandOptions)),\n      /**\n       * @see https://redis.io/commands/json.nummultby\n       */\n      nummultby: (...args) => this.chain(new JsonNumMultByCommand(args, this.commandOptions)),\n      /**\n       * @see https://redis.io/commands/json.objkeys\n       */\n      objkeys: (...args) => this.chain(new JsonObjKeysCommand(args, this.commandOptions)),\n      /**\n       * @see https://redis.io/commands/json.objlen\n       */\n      objlen: (...args) => this.chain(new JsonObjLenCommand(args, this.commandOptions)),\n      /**\n       * @see https://redis.io/commands/json.resp\n       */\n      resp: (...args) => this.chain(new JsonRespCommand(args, this.commandOptions)),\n      /**\n       * @see https://redis.io/commands/json.set\n       */\n      set: (...args) => this.chain(new JsonSetCommand(args, this.commandOptions)),\n      /**\n       * @see https://redis.io/commands/json.strappend\n       */\n      strappend: (...args) => this.chain(new JsonStrAppendCommand(args, this.commandOptions)),\n      /**\n       * @see https://redis.io/commands/json.strlen\n       */\n      strlen: (...args) => this.chain(new JsonStrLenCommand(args, this.commandOptions)),\n      /**\n       * @see https://redis.io/commands/json.toggle\n       */\n      toggle: (...args) => this.chain(new JsonToggleCommand(args, this.commandOptions)),\n      /**\n       * @see https://redis.io/commands/json.type\n       */\n      type: (...args) => this.chain(new JsonTypeCommand(args, this.commandOptions))\n    };\n  }\n};\n\n// pkg/auto-pipeline.ts\nvar EXCLUDE_COMMANDS = /* @__PURE__ */ new Set([\n  \"scan\",\n  \"keys\",\n  \"flushdb\",\n  \"flushall\",\n  \"dbsize\",\n  \"hscan\",\n  \"hgetall\",\n  \"hkeys\",\n  \"lrange\",\n  \"sscan\",\n  \"smembers\",\n  \"xrange\",\n  \"xrevrange\",\n  \"zscan\",\n  \"zrange\",\n  \"exec\"\n]);\nfunction createAutoPipelineProxy(_redis, json) {\n  const redis = _redis;\n  if (!redis.autoPipelineExecutor) {\n    redis.autoPipelineExecutor = new AutoPipelineExecutor(redis);\n  }\n  return new Proxy(redis, {\n    get: (redis2, command) => {\n      if (command === \"pipelineCounter\") {\n        return redis2.autoPipelineExecutor.pipelineCounter;\n      }\n      if (command === \"json\") {\n        return createAutoPipelineProxy(redis2, true);\n      }\n      const commandInRedisButNotPipeline = command in redis2 && !(command in redis2.autoPipelineExecutor.pipeline);\n      const isCommandExcluded = EXCLUDE_COMMANDS.has(command);\n      if (commandInRedisButNotPipeline || isCommandExcluded) {\n        return redis2[command];\n      }\n      const isFunction = json ? typeof redis2.autoPipelineExecutor.pipeline.json[command] === \"function\" : typeof redis2.autoPipelineExecutor.pipeline[command] === \"function\";\n      if (isFunction) {\n        return (...args) => {\n          return redis2.autoPipelineExecutor.withAutoPipeline((pipeline) => {\n            if (json) {\n              pipeline.json[command](\n                ...args\n              );\n            } else {\n              pipeline[command](...args);\n            }\n          });\n        };\n      }\n      return redis2.autoPipelineExecutor.pipeline[command];\n    }\n  });\n}\nvar AutoPipelineExecutor = class {\n  pipelinePromises = /* @__PURE__ */ new WeakMap();\n  activePipeline = null;\n  indexInCurrentPipeline = 0;\n  redis;\n  pipeline;\n  // only to make sure that proxy can work\n  pipelineCounter = 0;\n  // to keep track of how many times a pipeline was executed\n  constructor(redis) {\n    this.redis = redis;\n    this.pipeline = redis.pipeline();\n  }\n  async withAutoPipeline(executeWithPipeline) {\n    const pipeline = this.activePipeline ?? this.redis.pipeline();\n    if (!this.activePipeline) {\n      this.activePipeline = pipeline;\n      this.indexInCurrentPipeline = 0;\n    }\n    const index = this.indexInCurrentPipeline++;\n    executeWithPipeline(pipeline);\n    const pipelineDone = this.deferExecution().then(() => {\n      if (!this.pipelinePromises.has(pipeline)) {\n        const pipelinePromise = pipeline.exec({ keepErrors: true });\n        this.pipelineCounter += 1;\n        this.pipelinePromises.set(pipeline, pipelinePromise);\n        this.activePipeline = null;\n      }\n      return this.pipelinePromises.get(pipeline);\n    });\n    const results = await pipelineDone;\n    const commandResult = results[index];\n    if (commandResult.error) {\n      throw new UpstashError(`Command failed: ${commandResult.error}`);\n    }\n    return commandResult.result;\n  }\n  async deferExecution() {\n    await Promise.resolve();\n    await Promise.resolve();\n  }\n};\n\n// pkg/commands/psubscribe.ts\nvar PSubscribeCommand = class extends Command {\n  constructor(cmd, opts) {\n    const sseHeaders = {\n      Accept: \"text/event-stream\",\n      \"Cache-Control\": \"no-cache\",\n      Connection: \"keep-alive\"\n    };\n    super([], {\n      ...opts,\n      headers: sseHeaders,\n      path: [\"psubscribe\", ...cmd],\n      streamOptions: {\n        isStreaming: true,\n        onMessage: opts?.streamOptions?.onMessage,\n        signal: opts?.streamOptions?.signal\n      }\n    });\n  }\n};\n\n// pkg/commands/subscribe.ts\nvar Subscriber = class extends EventTarget {\n  subscriptions;\n  client;\n  listeners;\n  constructor(client, channels, isPattern = false) {\n    super();\n    this.client = client;\n    this.subscriptions = /* @__PURE__ */ new Map();\n    this.listeners = /* @__PURE__ */ new Map();\n    for (const channel of channels) {\n      if (isPattern) {\n        this.subscribeToPattern(channel);\n      } else {\n        this.subscribeToChannel(channel);\n      }\n    }\n  }\n  subscribeToChannel(channel) {\n    const controller = new AbortController();\n    const command = new SubscribeCommand([channel], {\n      streamOptions: {\n        signal: controller.signal,\n        onMessage: (data) => this.handleMessage(data, false)\n      }\n    });\n    command.exec(this.client).catch((error) => {\n      if (error.name !== \"AbortError\") {\n        this.dispatchToListeners(\"error\", error);\n      }\n    });\n    this.subscriptions.set(channel, {\n      command,\n      controller,\n      isPattern: false\n    });\n  }\n  subscribeToPattern(pattern) {\n    const controller = new AbortController();\n    const command = new PSubscribeCommand([pattern], {\n      streamOptions: {\n        signal: controller.signal,\n        onMessage: (data) => this.handleMessage(data, true)\n      }\n    });\n    command.exec(this.client).catch((error) => {\n      if (error.name !== \"AbortError\") {\n        this.dispatchToListeners(\"error\", error);\n      }\n    });\n    this.subscriptions.set(pattern, {\n      command,\n      controller,\n      isPattern: true\n    });\n  }\n  handleMessage(data, isPattern) {\n    const messageData = data.replace(/^data:\\s*/, \"\");\n    const firstCommaIndex = messageData.indexOf(\",\");\n    const secondCommaIndex = messageData.indexOf(\",\", firstCommaIndex + 1);\n    const thirdCommaIndex = isPattern ? messageData.indexOf(\",\", secondCommaIndex + 1) : -1;\n    if (firstCommaIndex !== -1 && secondCommaIndex !== -1) {\n      const type = messageData.slice(0, firstCommaIndex);\n      if (isPattern && type === \"pmessage\" && thirdCommaIndex !== -1) {\n        const pattern = messageData.slice(firstCommaIndex + 1, secondCommaIndex);\n        const channel = messageData.slice(secondCommaIndex + 1, thirdCommaIndex);\n        const messageStr = messageData.slice(thirdCommaIndex + 1);\n        try {\n          const message = JSON.parse(messageStr);\n          this.dispatchToListeners(\"pmessage\", { pattern, channel, message });\n          this.dispatchToListeners(`pmessage:${pattern}`, { pattern, channel, message });\n        } catch (error) {\n          this.dispatchToListeners(\"error\", new Error(`Failed to parse message: ${error}`));\n        }\n      } else {\n        const channel = messageData.slice(firstCommaIndex + 1, secondCommaIndex);\n        const messageStr = messageData.slice(secondCommaIndex + 1);\n        try {\n          if (type === \"subscribe\" || type === \"psubscribe\" || type === \"unsubscribe\" || type === \"punsubscribe\") {\n            const count = Number.parseInt(messageStr);\n            this.dispatchToListeners(type, count);\n          } else {\n            const message = JSON.parse(messageStr);\n            this.dispatchToListeners(type, { channel, message });\n            this.dispatchToListeners(`${type}:${channel}`, { channel, message });\n          }\n        } catch (error) {\n          this.dispatchToListeners(\"error\", new Error(`Failed to parse message: ${error}`));\n        }\n      }\n    }\n  }\n  dispatchToListeners(type, data) {\n    const listeners = this.listeners.get(type);\n    if (listeners) {\n      for (const listener of listeners) {\n        listener(data);\n      }\n    }\n  }\n  on(type, listener) {\n    if (!this.listeners.has(type)) {\n      this.listeners.set(type, /* @__PURE__ */ new Set());\n    }\n    this.listeners.get(type)?.add(listener);\n  }\n  removeAllListeners() {\n    this.listeners.clear();\n  }\n  async unsubscribe(channels) {\n    if (channels) {\n      for (const channel of channels) {\n        const subscription = this.subscriptions.get(channel);\n        if (subscription) {\n          try {\n            subscription.controller.abort();\n          } catch {\n          }\n          this.subscriptions.delete(channel);\n        }\n      }\n    } else {\n      for (const subscription of this.subscriptions.values()) {\n        try {\n          subscription.controller.abort();\n        } catch {\n        }\n      }\n      this.subscriptions.clear();\n      this.removeAllListeners();\n    }\n  }\n  getSubscribedChannels() {\n    return [...this.subscriptions.keys()];\n  }\n};\nvar SubscribeCommand = class extends Command {\n  constructor(cmd, opts) {\n    const sseHeaders = {\n      Accept: \"text/event-stream\",\n      \"Cache-Control\": \"no-cache\",\n      Connection: \"keep-alive\"\n    };\n    super([], {\n      ...opts,\n      headers: sseHeaders,\n      path: [\"subscribe\", ...cmd],\n      streamOptions: {\n        isStreaming: true,\n        onMessage: opts?.streamOptions?.onMessage,\n        signal: opts?.streamOptions?.signal\n      }\n    });\n  }\n};\n\n// pkg/script.ts\nimport { subtle } from \"uncrypto\";\nvar Script = class {\n  script;\n  /**\n   * @deprecated This property is initialized to an empty string and will be set in the init method\n   * asynchronously. Do not use this property immidiately after the constructor.\n   *\n   * This property is only exposed for backwards compatibility and will be removed in the\n   * future major release.\n   */\n  sha1;\n  redis;\n  constructor(redis, script) {\n    this.redis = redis;\n    this.script = script;\n    this.sha1 = \"\";\n    void this.init(script);\n  }\n  /**\n   * Initialize the script by computing its SHA-1 hash.\n   */\n  async init(script) {\n    if (this.sha1) return;\n    this.sha1 = await this.digest(script);\n  }\n  /**\n   * Send an `EVAL` command to redis.\n   */\n  async eval(keys, args) {\n    await this.init(this.script);\n    return await this.redis.eval(this.script, keys, args);\n  }\n  /**\n   * Calculates the sha1 hash of the script and then calls `EVALSHA`.\n   */\n  async evalsha(keys, args) {\n    await this.init(this.script);\n    return await this.redis.evalsha(this.sha1, keys, args);\n  }\n  /**\n   * Optimistically try to run `EVALSHA` first.\n   * If the script is not loaded in redis, it will fall back and try again with `EVAL`.\n   *\n   * Following calls will be able to use the cached script\n   */\n  async exec(keys, args) {\n    await this.init(this.script);\n    const res = await this.redis.evalsha(this.sha1, keys, args).catch(async (error) => {\n      if (error instanceof Error && error.message.toLowerCase().includes(\"noscript\")) {\n        return await this.redis.eval(this.script, keys, args);\n      }\n      throw error;\n    });\n    return res;\n  }\n  /**\n   * Compute the sha1 hash of the script and return its hex representation.\n   */\n  async digest(s) {\n    const data = new TextEncoder().encode(s);\n    const hashBuffer = await subtle.digest(\"SHA-1\", data);\n    const hashArray = [...new Uint8Array(hashBuffer)];\n    return hashArray.map((b) => b.toString(16).padStart(2, \"0\")).join(\"\");\n  }\n};\n\n// pkg/scriptRo.ts\nimport { subtle as subtle2 } from \"uncrypto\";\nvar ScriptRO = class {\n  script;\n  /**\n   * @deprecated This property is initialized to an empty string and will be set in the init method\n   * asynchronously. Do not use this property immidiately after the constructor.\n   *\n   * This property is only exposed for backwards compatibility and will be removed in the\n   * future major release.\n   */\n  sha1;\n  redis;\n  constructor(redis, script) {\n    this.redis = redis;\n    this.sha1 = \"\";\n    this.script = script;\n    void this.init(script);\n  }\n  async init(script) {\n    if (this.sha1) return;\n    this.sha1 = await this.digest(script);\n  }\n  /**\n   * Send an `EVAL_RO` command to redis.\n   */\n  async evalRo(keys, args) {\n    await this.init(this.script);\n    return await this.redis.evalRo(this.script, keys, args);\n  }\n  /**\n   * Calculates the sha1 hash of the script and then calls `EVALSHA_RO`.\n   */\n  async evalshaRo(keys, args) {\n    await this.init(this.script);\n    return await this.redis.evalshaRo(this.sha1, keys, args);\n  }\n  /**\n   * Optimistically try to run `EVALSHA_RO` first.\n   * If the script is not loaded in redis, it will fall back and try again with `EVAL_RO`.\n   *\n   * Following calls will be able to use the cached script\n   */\n  async exec(keys, args) {\n    await this.init(this.script);\n    const res = await this.redis.evalshaRo(this.sha1, keys, args).catch(async (error) => {\n      if (error instanceof Error && error.message.toLowerCase().includes(\"noscript\")) {\n        return await this.redis.evalRo(this.script, keys, args);\n      }\n      throw error;\n    });\n    return res;\n  }\n  /**\n   * Compute the sha1 hash of the script and return its hex representation.\n   */\n  async digest(s) {\n    const data = new TextEncoder().encode(s);\n    const hashBuffer = await subtle2.digest(\"SHA-1\", data);\n    const hashArray = [...new Uint8Array(hashBuffer)];\n    return hashArray.map((b) => b.toString(16).padStart(2, \"0\")).join(\"\");\n  }\n};\n\n// pkg/redis.ts\nvar Redis = class {\n  client;\n  opts;\n  enableTelemetry;\n  enableAutoPipelining;\n  /**\n   * Create a new redis client\n   *\n   * @example\n   * ```typescript\n   * const redis = new Redis({\n   *  url: \"<UPSTASH_REDIS_REST_URL>\",\n   *  token: \"<UPSTASH_REDIS_REST_TOKEN>\",\n   * });\n   * ```\n   */\n  constructor(client, opts) {\n    this.client = client;\n    this.opts = opts;\n    this.enableTelemetry = opts?.enableTelemetry ?? true;\n    if (opts?.readYourWrites === false) {\n      this.client.readYourWrites = false;\n    }\n    this.enableAutoPipelining = opts?.enableAutoPipelining ?? true;\n  }\n  get readYourWritesSyncToken() {\n    return this.client.upstashSyncToken;\n  }\n  set readYourWritesSyncToken(session) {\n    this.client.upstashSyncToken = session;\n  }\n  get json() {\n    return {\n      /**\n       * @see https://redis.io/commands/json.arrappend\n       */\n      arrappend: (...args) => new JsonArrAppendCommand(args, this.opts).exec(this.client),\n      /**\n       * @see https://redis.io/commands/json.arrindex\n       */\n      arrindex: (...args) => new JsonArrIndexCommand(args, this.opts).exec(this.client),\n      /**\n       * @see https://redis.io/commands/json.arrinsert\n       */\n      arrinsert: (...args) => new JsonArrInsertCommand(args, this.opts).exec(this.client),\n      /**\n       * @see https://redis.io/commands/json.arrlen\n       */\n      arrlen: (...args) => new JsonArrLenCommand(args, this.opts).exec(this.client),\n      /**\n       * @see https://redis.io/commands/json.arrpop\n       */\n      arrpop: (...args) => new JsonArrPopCommand(args, this.opts).exec(this.client),\n      /**\n       * @see https://redis.io/commands/json.arrtrim\n       */\n      arrtrim: (...args) => new JsonArrTrimCommand(args, this.opts).exec(this.client),\n      /**\n       * @see https://redis.io/commands/json.clear\n       */\n      clear: (...args) => new JsonClearCommand(args, this.opts).exec(this.client),\n      /**\n       * @see https://redis.io/commands/json.del\n       */\n      del: (...args) => new JsonDelCommand(args, this.opts).exec(this.client),\n      /**\n       * @see https://redis.io/commands/json.forget\n       */\n      forget: (...args) => new JsonForgetCommand(args, this.opts).exec(this.client),\n      /**\n       * @see https://redis.io/commands/json.get\n       */\n      get: (...args) => new JsonGetCommand(args, this.opts).exec(this.client),\n      /**\n       * @see https://redis.io/commands/json.merge\n       */\n      merge: (...args) => new JsonMergeCommand(args, this.opts).exec(this.client),\n      /**\n       * @see https://redis.io/commands/json.mget\n       */\n      mget: (...args) => new JsonMGetCommand(args, this.opts).exec(this.client),\n      /**\n       * @see https://redis.io/commands/json.mset\n       */\n      mset: (...args) => new JsonMSetCommand(args, this.opts).exec(this.client),\n      /**\n       * @see https://redis.io/commands/json.numincrby\n       */\n      numincrby: (...args) => new JsonNumIncrByCommand(args, this.opts).exec(this.client),\n      /**\n       * @see https://redis.io/commands/json.nummultby\n       */\n      nummultby: (...args) => new JsonNumMultByCommand(args, this.opts).exec(this.client),\n      /**\n       * @see https://redis.io/commands/json.objkeys\n       */\n      objkeys: (...args) => new JsonObjKeysCommand(args, this.opts).exec(this.client),\n      /**\n       * @see https://redis.io/commands/json.objlen\n       */\n      objlen: (...args) => new JsonObjLenCommand(args, this.opts).exec(this.client),\n      /**\n       * @see https://redis.io/commands/json.resp\n       */\n      resp: (...args) => new JsonRespCommand(args, this.opts).exec(this.client),\n      /**\n       * @see https://redis.io/commands/json.set\n       */\n      set: (...args) => new JsonSetCommand(args, this.opts).exec(this.client),\n      /**\n       * @see https://redis.io/commands/json.strappend\n       */\n      strappend: (...args) => new JsonStrAppendCommand(args, this.opts).exec(this.client),\n      /**\n       * @see https://redis.io/commands/json.strlen\n       */\n      strlen: (...args) => new JsonStrLenCommand(args, this.opts).exec(this.client),\n      /**\n       * @see https://redis.io/commands/json.toggle\n       */\n      toggle: (...args) => new JsonToggleCommand(args, this.opts).exec(this.client),\n      /**\n       * @see https://redis.io/commands/json.type\n       */\n      type: (...args) => new JsonTypeCommand(args, this.opts).exec(this.client)\n    };\n  }\n  /**\n   * Wrap a new middleware around the HTTP client.\n   */\n  use = (middleware) => {\n    const makeRequest = this.client.request.bind(this.client);\n    this.client.request = (req) => middleware(req, makeRequest);\n  };\n  /**\n   * Technically this is not private, we can hide it from intellisense by doing this\n   */\n  addTelemetry = (telemetry) => {\n    if (!this.enableTelemetry) {\n      return;\n    }\n    try {\n      this.client.mergeTelemetry(telemetry);\n    } catch {\n    }\n  };\n  /**\n   * Creates a new script.\n   *\n   * Scripts offer the ability to optimistically try to execute a script without having to send the\n   * entire script to the server. If the script is loaded on the server, it tries again by sending\n   * the entire script. Afterwards, the script is cached on the server.\n   *\n   * @param script - The script to create\n   * @param opts - Optional options to pass to the script `{ readonly?: boolean }`\n   * @returns A new script\n   *\n   * @example\n   * ```ts\n   * const redis = new Redis({...})\n   *\n   * const script = redis.createScript<string>(\"return ARGV[1];\")\n   * const arg1 = await script.eval([], [\"Hello World\"])\n   * expect(arg1, \"Hello World\")\n   * ```\n   * @example\n   * ```ts\n   * const redis = new Redis({...})\n   *\n   * const script = redis.createScript<string>(\"return ARGV[1];\", { readonly: true })\n   * const arg1 = await script.evalRo([], [\"Hello World\"])\n   * expect(arg1, \"Hello World\")\n   * ```\n   */\n  createScript(script, opts) {\n    return opts?.readonly ? new ScriptRO(this, script) : new Script(this, script);\n  }\n  /**\n   * Create a new pipeline that allows you to send requests in bulk.\n   *\n   * @see {@link Pipeline}\n   */\n  pipeline = () => new Pipeline({\n    client: this.client,\n    commandOptions: this.opts,\n    multiExec: false\n  });\n  autoPipeline = () => {\n    return createAutoPipelineProxy(this);\n  };\n  /**\n   * Create a new transaction to allow executing multiple steps atomically.\n   *\n   * All the commands in a transaction are serialized and executed sequentially. A request sent by\n   * another client will never be served in the middle of the execution of a Redis Transaction. This\n   * guarantees that the commands are executed as a single isolated operation.\n   *\n   * @see {@link Pipeline}\n   */\n  multi = () => new Pipeline({\n    client: this.client,\n    commandOptions: this.opts,\n    multiExec: true\n  });\n  /**\n   * Returns an instance that can be used to execute `BITFIELD` commands on one key.\n   *\n   * @example\n   * ```typescript\n   * redis.set(\"mykey\", 0);\n   * const result = await redis.bitfield(\"mykey\")\n   *   .set(\"u4\", 0, 16)\n   *   .incr(\"u4\", \"#1\", 1)\n   *   .exec();\n   * console.log(result); // [0, 1]\n   * ```\n   *\n   * @see https://redis.io/commands/bitfield\n   */\n  bitfield = (...args) => new BitFieldCommand(args, this.client, this.opts);\n  /**\n   * @see https://redis.io/commands/append\n   */\n  append = (...args) => new AppendCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/bitcount\n   */\n  bitcount = (...args) => new BitCountCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/bitop\n   */\n  bitop = (op, destinationKey, sourceKey, ...sourceKeys) => new BitOpCommand([op, destinationKey, sourceKey, ...sourceKeys], this.opts).exec(\n    this.client\n  );\n  /**\n   * @see https://redis.io/commands/bitpos\n   */\n  bitpos = (...args) => new BitPosCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/copy\n   */\n  copy = (...args) => new CopyCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/dbsize\n   */\n  dbsize = () => new DBSizeCommand(this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/decr\n   */\n  decr = (...args) => new DecrCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/decrby\n   */\n  decrby = (...args) => new DecrByCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/del\n   */\n  del = (...args) => new DelCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/echo\n   */\n  echo = (...args) => new EchoCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/eval_ro\n   */\n  evalRo = (...args) => new EvalROCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/eval\n   */\n  eval = (...args) => new EvalCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/evalsha_ro\n   */\n  evalshaRo = (...args) => new EvalshaROCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/evalsha\n   */\n  evalsha = (...args) => new EvalshaCommand(args, this.opts).exec(this.client);\n  /**\n   * Generic method to execute any Redis command.\n   */\n  exec = (args) => new ExecCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/exists\n   */\n  exists = (...args) => new ExistsCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/expire\n   */\n  expire = (...args) => new ExpireCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/expireat\n   */\n  expireat = (...args) => new ExpireAtCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/flushall\n   */\n  flushall = (args) => new FlushAllCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/flushdb\n   */\n  flushdb = (...args) => new FlushDBCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/geoadd\n   */\n  geoadd = (...args) => new GeoAddCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/geopos\n   */\n  geopos = (...args) => new GeoPosCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/geodist\n   */\n  geodist = (...args) => new GeoDistCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/geohash\n   */\n  geohash = (...args) => new GeoHashCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/geosearch\n   */\n  geosearch = (...args) => new GeoSearchCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/geosearchstore\n   */\n  geosearchstore = (...args) => new GeoSearchStoreCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/get\n   */\n  get = (...args) => new GetCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/getbit\n   */\n  getbit = (...args) => new GetBitCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/getdel\n   */\n  getdel = (...args) => new GetDelCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/getex\n   */\n  getex = (...args) => new GetExCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/getrange\n   */\n  getrange = (...args) => new GetRangeCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/getset\n   */\n  getset = (key, value) => new GetSetCommand([key, value], this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/hdel\n   */\n  hdel = (...args) => new HDelCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/hexists\n   */\n  hexists = (...args) => new HExistsCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/hexpire\n   */\n  hexpire = (...args) => new HExpireCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/hexpireat\n   */\n  hexpireat = (...args) => new HExpireAtCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/hexpiretime\n   */\n  hexpiretime = (...args) => new HExpireTimeCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/httl\n   */\n  httl = (...args) => new HTtlCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/hpexpire\n   */\n  hpexpire = (...args) => new HPExpireCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/hpexpireat\n   */\n  hpexpireat = (...args) => new HPExpireAtCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/hpexpiretime\n   */\n  hpexpiretime = (...args) => new HPExpireTimeCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/hpttl\n   */\n  hpttl = (...args) => new HPTtlCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/hpersist\n   */\n  hpersist = (...args) => new HPersistCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/hget\n   */\n  hget = (...args) => new HGetCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/hgetall\n   */\n  hgetall = (...args) => new HGetAllCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/hincrby\n   */\n  hincrby = (...args) => new HIncrByCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/hincrbyfloat\n   */\n  hincrbyfloat = (...args) => new HIncrByFloatCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/hkeys\n   */\n  hkeys = (...args) => new HKeysCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/hlen\n   */\n  hlen = (...args) => new HLenCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/hmget\n   */\n  hmget = (...args) => new HMGetCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/hmset\n   */\n  hmset = (key, kv) => new HMSetCommand([key, kv], this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/hrandfield\n   */\n  hrandfield = (key, count, withValues) => new HRandFieldCommand([key, count, withValues], this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/hscan\n   */\n  hscan = (...args) => new HScanCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/hset\n   */\n  hset = (key, kv) => new HSetCommand([key, kv], this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/hsetnx\n   */\n  hsetnx = (key, field, value) => new HSetNXCommand([key, field, value], this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/hstrlen\n   */\n  hstrlen = (...args) => new HStrLenCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/hvals\n   */\n  hvals = (...args) => new HValsCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/incr\n   */\n  incr = (...args) => new IncrCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/incrby\n   */\n  incrby = (...args) => new IncrByCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/incrbyfloat\n   */\n  incrbyfloat = (...args) => new IncrByFloatCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/keys\n   */\n  keys = (...args) => new KeysCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/lindex\n   */\n  lindex = (...args) => new LIndexCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/linsert\n   */\n  linsert = (key, direction, pivot, value) => new LInsertCommand([key, direction, pivot, value], this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/llen\n   */\n  llen = (...args) => new LLenCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/lmove\n   */\n  lmove = (...args) => new LMoveCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/lpop\n   */\n  lpop = (...args) => new LPopCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/lmpop\n   */\n  lmpop = (...args) => new LmPopCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/lpos\n   */\n  lpos = (...args) => new LPosCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/lpush\n   */\n  lpush = (key, ...elements) => new LPushCommand([key, ...elements], this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/lpushx\n   */\n  lpushx = (key, ...elements) => new LPushXCommand([key, ...elements], this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/lrange\n   */\n  lrange = (...args) => new LRangeCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/lrem\n   */\n  lrem = (key, count, value) => new LRemCommand([key, count, value], this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/lset\n   */\n  lset = (key, index, value) => new LSetCommand([key, index, value], this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/ltrim\n   */\n  ltrim = (...args) => new LTrimCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/mget\n   */\n  mget = (...args) => new MGetCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/mset\n   */\n  mset = (kv) => new MSetCommand([kv], this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/msetnx\n   */\n  msetnx = (kv) => new MSetNXCommand([kv], this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/persist\n   */\n  persist = (...args) => new PersistCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/pexpire\n   */\n  pexpire = (...args) => new PExpireCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/pexpireat\n   */\n  pexpireat = (...args) => new PExpireAtCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/pfadd\n   */\n  pfadd = (...args) => new PfAddCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/pfcount\n   */\n  pfcount = (...args) => new PfCountCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/pfmerge\n   */\n  pfmerge = (...args) => new PfMergeCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/ping\n   */\n  ping = (args) => new PingCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/psetex\n   */\n  psetex = (key, ttl, value) => new PSetEXCommand([key, ttl, value], this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/psubscribe\n   */\n  psubscribe = (patterns) => {\n    const patternArray = Array.isArray(patterns) ? patterns : [patterns];\n    return new Subscriber(this.client, patternArray, true);\n  };\n  /**\n   * @see https://redis.io/commands/pttl\n   */\n  pttl = (...args) => new PTtlCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/publish\n   */\n  publish = (...args) => new PublishCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/randomkey\n   */\n  randomkey = () => new RandomKeyCommand().exec(this.client);\n  /**\n   * @see https://redis.io/commands/rename\n   */\n  rename = (...args) => new RenameCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/renamenx\n   */\n  renamenx = (...args) => new RenameNXCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/rpop\n   */\n  rpop = (...args) => new RPopCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/rpush\n   */\n  rpush = (key, ...elements) => new RPushCommand([key, ...elements], this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/rpushx\n   */\n  rpushx = (key, ...elements) => new RPushXCommand([key, ...elements], this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/sadd\n   */\n  sadd = (key, member, ...members) => new SAddCommand([key, member, ...members], this.opts).exec(this.client);\n  scan(cursor, opts) {\n    return new ScanCommand([cursor, opts], this.opts).exec(this.client);\n  }\n  /**\n   * @see https://redis.io/commands/scard\n   */\n  scard = (...args) => new SCardCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/script-exists\n   */\n  scriptExists = (...args) => new ScriptExistsCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/script-flush\n   */\n  scriptFlush = (...args) => new ScriptFlushCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/script-load\n   */\n  scriptLoad = (...args) => new ScriptLoadCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/sdiff\n   */\n  sdiff = (...args) => new SDiffCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/sdiffstore\n   */\n  sdiffstore = (...args) => new SDiffStoreCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/set\n   */\n  set = (key, value, opts) => new SetCommand([key, value, opts], this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/setbit\n   */\n  setbit = (...args) => new SetBitCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/setex\n   */\n  setex = (key, ttl, value) => new SetExCommand([key, ttl, value], this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/setnx\n   */\n  setnx = (key, value) => new SetNxCommand([key, value], this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/setrange\n   */\n  setrange = (...args) => new SetRangeCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/sinter\n   */\n  sinter = (...args) => new SInterCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/sinterstore\n   */\n  sinterstore = (...args) => new SInterStoreCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/sismember\n   */\n  sismember = (key, member) => new SIsMemberCommand([key, member], this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/smismember\n   */\n  smismember = (key, members) => new SMIsMemberCommand([key, members], this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/smembers\n   */\n  smembers = (...args) => new SMembersCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/smove\n   */\n  smove = (source, destination, member) => new SMoveCommand([source, destination, member], this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/spop\n   */\n  spop = (...args) => new SPopCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/srandmember\n   */\n  srandmember = (...args) => new SRandMemberCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/srem\n   */\n  srem = (key, ...members) => new SRemCommand([key, ...members], this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/sscan\n   */\n  sscan = (...args) => new SScanCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/strlen\n   */\n  strlen = (...args) => new StrLenCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/subscribe\n   */\n  subscribe = (channels) => {\n    const channelArray = Array.isArray(channels) ? channels : [channels];\n    return new Subscriber(this.client, channelArray);\n  };\n  /**\n   * @see https://redis.io/commands/sunion\n   */\n  sunion = (...args) => new SUnionCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/sunionstore\n   */\n  sunionstore = (...args) => new SUnionStoreCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/time\n   */\n  time = () => new TimeCommand().exec(this.client);\n  /**\n   * @see https://redis.io/commands/touch\n   */\n  touch = (...args) => new TouchCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/ttl\n   */\n  ttl = (...args) => new TtlCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/type\n   */\n  type = (...args) => new TypeCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/unlink\n   */\n  unlink = (...args) => new UnlinkCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/xadd\n   */\n  xadd = (...args) => new XAddCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/xack\n   */\n  xack = (...args) => new XAckCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/xdel\n   */\n  xdel = (...args) => new XDelCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/xgroup\n   */\n  xgroup = (...args) => new XGroupCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/xread\n   */\n  xread = (...args) => new XReadCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/xreadgroup\n   */\n  xreadgroup = (...args) => new XReadGroupCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/xinfo\n   */\n  xinfo = (...args) => new XInfoCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/xlen\n   */\n  xlen = (...args) => new XLenCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/xpending\n   */\n  xpending = (...args) => new XPendingCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/xclaim\n   */\n  xclaim = (...args) => new XClaimCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/xautoclaim\n   */\n  xautoclaim = (...args) => new XAutoClaim(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/xtrim\n   */\n  xtrim = (...args) => new XTrimCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/xrange\n   */\n  xrange = (...args) => new XRangeCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/xrevrange\n   */\n  xrevrange = (...args) => new XRevRangeCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/zadd\n   */\n  zadd = (...args) => {\n    if (\"score\" in args[1]) {\n      return new ZAddCommand([args[0], args[1], ...args.slice(2)], this.opts).exec(\n        this.client\n      );\n    }\n    return new ZAddCommand(\n      [args[0], args[1], ...args.slice(2)],\n      this.opts\n    ).exec(this.client);\n  };\n  /**\n   * @see https://redis.io/commands/zcard\n   */\n  zcard = (...args) => new ZCardCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/zcount\n   */\n  zcount = (...args) => new ZCountCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/zdiffstore\n   */\n  zdiffstore = (...args) => new ZDiffStoreCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/zincrby\n   */\n  zincrby = (key, increment, member) => new ZIncrByCommand([key, increment, member], this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/zinterstore\n   */\n  zinterstore = (...args) => new ZInterStoreCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/zlexcount\n   */\n  zlexcount = (...args) => new ZLexCountCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/zmscore\n   */\n  zmscore = (...args) => new ZMScoreCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/zpopmax\n   */\n  zpopmax = (...args) => new ZPopMaxCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/zpopmin\n   */\n  zpopmin = (...args) => new ZPopMinCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/zrange\n   */\n  zrange = (...args) => new ZRangeCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/zrank\n   */\n  zrank = (key, member) => new ZRankCommand([key, member], this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/zrem\n   */\n  zrem = (key, ...members) => new ZRemCommand([key, ...members], this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/zremrangebylex\n   */\n  zremrangebylex = (...args) => new ZRemRangeByLexCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/zremrangebyrank\n   */\n  zremrangebyrank = (...args) => new ZRemRangeByRankCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/zremrangebyscore\n   */\n  zremrangebyscore = (...args) => new ZRemRangeByScoreCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/zrevrank\n   */\n  zrevrank = (key, member) => new ZRevRankCommand([key, member], this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/zscan\n   */\n  zscan = (...args) => new ZScanCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/zscore\n   */\n  zscore = (key, member) => new ZScoreCommand([key, member], this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/zunion\n   */\n  zunion = (...args) => new ZUnionCommand(args, this.opts).exec(this.client);\n  /**\n   * @see https://redis.io/commands/zunionstore\n   */\n  zunionstore = (...args) => new ZUnionStoreCommand(args, this.opts).exec(this.client);\n};\n\n// version.ts\nvar VERSION = \"v1.35.3\";\n\nexport {\n  error_exports,\n  HttpClient,\n  Redis,\n  VERSION\n};\n","export const VERSION = '0.22.0'; // x-release-please-version\n","import {\n  type ChatCompletionAssistantMessageParam,\n  type ChatCompletionFunctionMessageParam,\n  type ChatCompletionMessageParam,\n  type ChatCompletionToolMessageParam,\n} from '../resources/chat';\n\nexport const isAssistantMessage = (\n  message: ChatCompletionMessageParam | null | undefined,\n): message is ChatCompletionAssistantMessageParam => {\n  return message?.role === 'assistant';\n};\n\nexport const isFunctionMessage = (\n  message: ChatCompletionMessageParam | null | undefined,\n): message is ChatCompletionFunctionMessageParam => {\n  return message?.role === 'function';\n};\n\nexport const isToolMessage = (\n  message: ChatCompletionMessageParam | null | undefined,\n): message is ChatCompletionToolMessageParam => {\n  return message?.role === 'tool';\n};\n\nexport function isPresent<T>(obj: T | null | undefined): obj is T {\n  return obj != null;\n}\n","import {\n  AppRouteRouteModule,\n  type AppRouteRouteHandlerContext,\n  type AppRouteRouteModuleOptions,\n} from '../../server/route-modules/app-route/module.compiled'\nimport { RouteKind } from '../../server/route-kind'\nimport { patchFetch as _patchFetch } from '../../server/lib/patch-fetch'\nimport type { IncomingMessage, ServerResponse } from 'node:http'\nimport { addRequestMeta, getRequestMeta } from '../../server/request-meta'\nimport { getTracer, type Span, SpanKind } from '../../server/lib/trace/tracer'\nimport { setReferenceManifestsSingleton } from '../../server/app-render/encryption-utils'\nimport { createServerModuleMap } from '../../server/app-render/action-utils'\nimport { normalizeAppPath } from '../../shared/lib/router/utils/app-paths'\nimport { NodeNextRequest, NodeNextResponse } from '../../server/base-http/node'\nimport {\n  NextRequestAdapter,\n  signalFromNodeResponse,\n} from '../../server/web/spec-extension/adapters/next-request'\nimport { BaseServerSpan } from '../../server/lib/trace/constants'\nimport { getRevalidateReason } from '../../server/instrumentation/utils'\nimport { sendResponse } from '../../server/send-response'\nimport {\n  fromNodeOutgoingHttpHeaders,\n  toNodeOutgoingHttpHeaders,\n} from '../../server/web/utils'\nimport { getCacheControlHeader } from '../../server/lib/cache-control'\nimport { INFINITE_CACHE, NEXT_CACHE_TAGS_HEADER } from '../../lib/constants'\nimport { NoFallbackError } from '../../shared/lib/no-fallback-error.external'\nimport {\n  CachedRouteKind,\n  type ResponseCacheEntry,\n  type ResponseGenerator,\n} from '../../server/response-cache'\n\nimport * as userland from 'VAR_USERLAND'\n\n// These are injected by the loader afterwards. This is injected as a variable\n// instead of a replacement because this could also be `undefined` instead of\n// an empty string.\ndeclare const nextConfigOutput: AppRouteRouteModuleOptions['nextConfigOutput']\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\n// INJECT:nextConfigOutput\n\nconst routeModule = new AppRouteRouteModule({\n  definition: {\n    kind: RouteKind.APP_ROUTE,\n    page: 'VAR_DEFINITION_PAGE',\n    pathname: 'VAR_DEFINITION_PATHNAME',\n    filename: 'VAR_DEFINITION_FILENAME',\n    bundlePath: 'VAR_DEFINITION_BUNDLE_PATH',\n  },\n  distDir: process.env.__NEXT_RELATIVE_DIST_DIR || '',\n  relativeProjectDir: process.env.__NEXT_RELATIVE_PROJECT_DIR || '',\n  resolvedPagePath: 'VAR_RESOLVED_PAGE_PATH',\n  nextConfigOutput,\n  userland,\n})\n\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule\n\nfunction patchFetch() {\n  return _patchFetch({\n    workAsyncStorage,\n    workUnitAsyncStorage,\n  })\n}\n\nexport {\n  routeModule,\n  workAsyncStorage,\n  workUnitAsyncStorage,\n  serverHooks,\n  patchFetch,\n}\n\nexport async function handler(\n  req: IncomingMessage,\n  res: ServerResponse,\n  ctx: {\n    waitUntil: (prom: Promise<void>) => void\n  }\n) {\n  if (routeModule.isDev) {\n    addRequestMeta(req, 'devRequestTimingInternalsEnd', process.hrtime.bigint())\n  }\n  let srcPage = 'VAR_DEFINITION_PAGE'\n\n  // turbopack doesn't normalize `/index` in the page name\n  // so we need to to process dynamic routes properly\n  // TODO: fix turbopack providing differing value from webpack\n  if (process.env.TURBOPACK) {\n    srcPage = srcPage.replace(/\\/index$/, '') || '/'\n  } else if (srcPage === '/index') {\n    // we always normalize /index specifically\n    srcPage = '/'\n  }\n  const multiZoneDraftMode = process.env\n    .__NEXT_MULTI_ZONE_DRAFT_MODE as any as boolean\n\n  const prepareResult = await routeModule.prepare(req, res, {\n    srcPage,\n    multiZoneDraftMode,\n  })\n\n  if (!prepareResult) {\n    res.statusCode = 400\n    res.end('Bad Request')\n    ctx.waitUntil?.(Promise.resolve())\n    return null\n  }\n\n  const {\n    buildId,\n    params,\n    nextConfig,\n    parsedUrl,\n    isDraftMode,\n    prerenderManifest,\n    routerServerContext,\n    isOnDemandRevalidate,\n    revalidateOnlyGenerated,\n    resolvedPathname,\n    clientReferenceManifest,\n    serverActionsManifest,\n  } = prepareResult\n\n  const normalizedSrcPage = normalizeAppPath(srcPage)\n\n  let isIsr = Boolean(\n    prerenderManifest.dynamicRoutes[normalizedSrcPage] ||\n      prerenderManifest.routes[resolvedPathname]\n  )\n\n  const render404 = async () => {\n    // TODO: should route-module itself handle rendering the 404\n    if (routerServerContext?.render404) {\n      await routerServerContext.render404(req, res, parsedUrl, false)\n    } else {\n      res.end('This page could not be found')\n    }\n    return null\n  }\n\n  if (isIsr && !isDraftMode) {\n    const isPrerendered = Boolean(prerenderManifest.routes[resolvedPathname])\n    const prerenderInfo = prerenderManifest.dynamicRoutes[normalizedSrcPage]\n\n    if (prerenderInfo) {\n      if (prerenderInfo.fallback === false && !isPrerendered) {\n        if (nextConfig.experimental.adapterPath) {\n          return await render404()\n        }\n        throw new NoFallbackError()\n      }\n    }\n  }\n\n  let cacheKey: string | null = null\n\n  if (isIsr && !routeModule.isDev && !isDraftMode) {\n    cacheKey = resolvedPathname\n    // ensure /index and / is normalized to one key\n    cacheKey = cacheKey === '/index' ? '/' : cacheKey\n  }\n\n  const supportsDynamicResponse: boolean =\n    // If we're in development, we always support dynamic HTML\n    routeModule.isDev === true ||\n    // If this is not SSG or does not have static paths, then it supports\n    // dynamic HTML.\n    !isIsr\n\n  // This is a revalidation request if the request is for a static\n  // page and it is not being resumed from a postponed render and\n  // it is not a dynamic RSC request then it is a revalidation\n  // request.\n  const isStaticGeneration = isIsr && !supportsDynamicResponse\n\n  // Before rendering (which initializes component tree modules), we have to\n  // set the reference manifests to our global store so Server Action's\n  // encryption util can access to them at the top level of the page module.\n  if (serverActionsManifest && clientReferenceManifest) {\n    setReferenceManifestsSingleton({\n      page: srcPage,\n      clientReferenceManifest,\n      serverActionsManifest,\n      serverModuleMap: createServerModuleMap({\n        serverActionsManifest,\n      }),\n    })\n  }\n\n  const method = req.method || 'GET'\n  const tracer = getTracer()\n  const activeSpan = tracer.getActiveScopeSpan()\n\n  const context: AppRouteRouteHandlerContext = {\n    params,\n    prerenderManifest,\n    renderOpts: {\n      experimental: {\n        authInterrupts: Boolean(nextConfig.experimental.authInterrupts),\n      },\n      cacheComponents: Boolean(nextConfig.cacheComponents),\n      supportsDynamicResponse,\n      incrementalCache: getRequestMeta(req, 'incrementalCache'),\n      cacheLifeProfiles: nextConfig.cacheLife,\n      waitUntil: ctx.waitUntil,\n      onClose: (cb) => {\n        res.on('close', cb)\n      },\n      onAfterTaskError: undefined,\n      onInstrumentationRequestError: (error, _request, errorContext) =>\n        routeModule.onRequestError(\n          req,\n          error,\n          errorContext,\n          routerServerContext\n        ),\n    },\n    sharedContext: {\n      buildId,\n    },\n  }\n  const nodeNextReq = new NodeNextRequest(req)\n  const nodeNextRes = new NodeNextResponse(res)\n\n  const nextReq = NextRequestAdapter.fromNodeNextRequest(\n    nodeNextReq,\n    signalFromNodeResponse(res)\n  )\n\n  try {\n    const invokeRouteModule = async (span?: Span) => {\n      return routeModule.handle(nextReq, context).finally(() => {\n        if (!span) return\n\n        span.setAttributes({\n          'http.status_code': res.statusCode,\n          'next.rsc': false,\n        })\n\n        const rootSpanAttributes = tracer.getRootSpanAttributes()\n        // We were unable to get attributes, probably OTEL is not enabled\n        if (!rootSpanAttributes) {\n          return\n        }\n\n        if (\n          rootSpanAttributes.get('next.span_type') !==\n          BaseServerSpan.handleRequest\n        ) {\n          console.warn(\n            `Unexpected root span type '${rootSpanAttributes.get(\n              'next.span_type'\n            )}'. Please report this Next.js issue https://github.com/vercel/next.js`\n          )\n          return\n        }\n\n        const route = rootSpanAttributes.get('next.route')\n        if (route) {\n          const name = `${method} ${route}`\n\n          span.setAttributes({\n            'next.route': route,\n            'http.route': route,\n            'next.span_name': name,\n          })\n          span.updateName(name)\n        } else {\n          span.updateName(`${method} ${srcPage}`)\n        }\n      })\n    }\n    const isMinimalMode = Boolean(\n      process.env.MINIMAL_MODE || getRequestMeta(req, 'minimalMode')\n    )\n\n    const handleResponse = async (currentSpan?: Span) => {\n      const responseGenerator: ResponseGenerator = async ({\n        previousCacheEntry,\n      }) => {\n        try {\n          if (\n            !isMinimalMode &&\n            isOnDemandRevalidate &&\n            revalidateOnlyGenerated &&\n            !previousCacheEntry\n          ) {\n            res.statusCode = 404\n            // on-demand revalidate always sets this header\n            res.setHeader('x-nextjs-cache', 'REVALIDATED')\n            res.end('This page could not be found')\n            return null\n          }\n\n          const response = await invokeRouteModule(currentSpan)\n\n          ;(req as any).fetchMetrics = (context.renderOpts as any).fetchMetrics\n          let pendingWaitUntil = context.renderOpts.pendingWaitUntil\n\n          // Attempt using provided waitUntil if available\n          // if it's not we fallback to sendResponse's handling\n          if (pendingWaitUntil) {\n            if (ctx.waitUntil) {\n              ctx.waitUntil(pendingWaitUntil)\n              pendingWaitUntil = undefined\n            }\n          }\n          const cacheTags = context.renderOpts.collectedTags\n\n          // If the request is for a static response, we can cache it so long\n          // as it's not edge.\n          if (isIsr) {\n            const blob = await response.blob()\n\n            // Copy the headers from the response.\n            const headers = toNodeOutgoingHttpHeaders(response.headers)\n\n            if (cacheTags) {\n              headers[NEXT_CACHE_TAGS_HEADER] = cacheTags\n            }\n\n            if (!headers['content-type'] && blob.type) {\n              headers['content-type'] = blob.type\n            }\n\n            const revalidate =\n              typeof context.renderOpts.collectedRevalidate === 'undefined' ||\n              context.renderOpts.collectedRevalidate >= INFINITE_CACHE\n                ? false\n                : context.renderOpts.collectedRevalidate\n\n            const expire =\n              typeof context.renderOpts.collectedExpire === 'undefined' ||\n              context.renderOpts.collectedExpire >= INFINITE_CACHE\n                ? undefined\n                : context.renderOpts.collectedExpire\n\n            // Create the cache entry for the response.\n            const cacheEntry: ResponseCacheEntry = {\n              value: {\n                kind: CachedRouteKind.APP_ROUTE,\n                status: response.status,\n                body: Buffer.from(await blob.arrayBuffer()),\n                headers,\n              },\n              cacheControl: { revalidate, expire },\n            }\n\n            return cacheEntry\n          } else {\n            // send response without caching if not ISR\n            await sendResponse(\n              nodeNextReq,\n              nodeNextRes,\n              response,\n              context.renderOpts.pendingWaitUntil\n            )\n            return null\n          }\n        } catch (err) {\n          // if this is a background revalidate we need to report\n          // the request error here as it won't be bubbled\n          if (previousCacheEntry?.isStale) {\n            await routeModule.onRequestError(\n              req,\n              err,\n              {\n                routerKind: 'App Router',\n                routePath: srcPage,\n                routeType: 'route',\n                revalidateReason: getRevalidateReason({\n                  isStaticGeneration,\n                  isOnDemandRevalidate,\n                }),\n              },\n              routerServerContext\n            )\n          }\n          throw err\n        }\n      }\n\n      const cacheEntry = await routeModule.handleResponse({\n        req,\n        nextConfig,\n        cacheKey,\n        routeKind: RouteKind.APP_ROUTE,\n        isFallback: false,\n        prerenderManifest,\n        isRoutePPREnabled: false,\n        isOnDemandRevalidate,\n        revalidateOnlyGenerated,\n        responseGenerator,\n        waitUntil: ctx.waitUntil,\n        isMinimalMode,\n      })\n\n      // we don't create a cacheEntry for ISR\n      if (!isIsr) {\n        return null\n      }\n\n      if (cacheEntry?.value?.kind !== CachedRouteKind.APP_ROUTE) {\n        throw new Error(\n          `Invariant: app-route received invalid cache entry ${cacheEntry?.value?.kind}`\n        )\n      }\n\n      if (!isMinimalMode) {\n        res.setHeader(\n          'x-nextjs-cache',\n          isOnDemandRevalidate\n            ? 'REVALIDATED'\n            : cacheEntry.isMiss\n              ? 'MISS'\n              : cacheEntry.isStale\n                ? 'STALE'\n                : 'HIT'\n        )\n      }\n\n      // Draft mode should never be cached\n      if (isDraftMode) {\n        res.setHeader(\n          'Cache-Control',\n          'private, no-cache, no-store, max-age=0, must-revalidate'\n        )\n      }\n\n      const headers = fromNodeOutgoingHttpHeaders(cacheEntry.value.headers)\n\n      if (!(isMinimalMode && isIsr)) {\n        headers.delete(NEXT_CACHE_TAGS_HEADER)\n      }\n\n      // If cache control is already set on the response we don't\n      // override it to allow users to customize it via next.config\n      if (\n        cacheEntry.cacheControl &&\n        !res.getHeader('Cache-Control') &&\n        !headers.get('Cache-Control')\n      ) {\n        headers.set(\n          'Cache-Control',\n          getCacheControlHeader(cacheEntry.cacheControl)\n        )\n      }\n\n      await sendResponse(\n        nodeNextReq,\n        nodeNextRes,\n        // @ts-expect-error - Argument of type 'Buffer<ArrayBufferLike>' is not assignable to parameter of type 'BodyInit | null | undefined'.\n        new Response(cacheEntry.value.body, {\n          headers,\n          status: cacheEntry.value.status || 200,\n        })\n      )\n      return null\n    }\n\n    // TODO: activeSpan code path is for when wrapped by\n    // next-server can be removed when this is no longer used\n    if (activeSpan) {\n      await handleResponse(activeSpan)\n    } else {\n      await tracer.withPropagatedContext(req.headers, () =>\n        tracer.trace(\n          BaseServerSpan.handleRequest,\n          {\n            spanName: `${method} ${srcPage}`,\n            kind: SpanKind.SERVER,\n            attributes: {\n              'http.method': method,\n              'http.target': req.url,\n            },\n          },\n          handleResponse\n        )\n      )\n    }\n  } catch (err) {\n    if (!(err instanceof NoFallbackError)) {\n      await routeModule.onRequestError(req, err, {\n        routerKind: 'App Router',\n        routePath: normalizedSrcPage,\n        routeType: 'route',\n        revalidateReason: getRevalidateReason({\n          isStaticGeneration,\n          isOnDemandRevalidate,\n        }),\n      })\n    }\n\n    // rethrow so that we can handle serving error page\n\n    // If this is during static generation, throw the error again.\n    if (isIsr) throw err\n\n    // Otherwise, send a 500 response.\n    await sendResponse(\n      nodeNextReq,\n      nodeNextRes,\n      new Response(null, { status: 500 })\n    )\n    return null\n  }\n}\n","import { type ChatCompletionRunner } from './ChatCompletionRunner';\nimport { type ChatCompletionStreamingRunner } from './ChatCompletionStreamingRunner';\nimport { JSONSchema } from './jsonschema';\n\ntype PromiseOrValue<T> = T | Promise<T>;\n\nexport type RunnableFunctionWithParse<Args extends object> = {\n  /**\n   * @param args the return value from `parse`.\n   * @param runner the runner evaluating this callback.\n   * @returns a string to send back.\n   */\n  function: (\n    args: Args,\n    runner: ChatCompletionRunner | ChatCompletionStreamingRunner,\n  ) => PromiseOrValue<unknown>;\n  /**\n   * @param input the raw args from the function call.\n   * @returns the parsed arguments to pass to `function`\n   */\n  parse: (input: string) => PromiseOrValue<Args>;\n  /**\n   * The parameters the function accepts, describes as a JSON Schema object.\n   */\n  parameters: JSONSchema;\n  /**\n   * A description of what the function does, used by the model to choose when and how to call the function.\n   */\n  description: string;\n  /**\n   * The name of the function to be called. Will default to function.name if omitted.\n   */\n  name?: string | undefined;\n};\n\nexport type RunnableFunctionWithoutParse = {\n  /**\n   * @param args the raw args from the function call.\n   * @returns a string to send back\n   */\n  function: (\n    args: string,\n    runner: ChatCompletionRunner | ChatCompletionStreamingRunner,\n  ) => PromiseOrValue<unknown>;\n  /**\n   * The parameters the function accepts, describes as a JSON Schema object.\n   */\n  parameters: JSONSchema;\n  /**\n   * A description of what the function does, used by the model to choose when and how to call the function.\n   */\n  description: string;\n  /**\n   * The name of the function to be called. Will default to function.name if omitted.\n   */\n  name?: string | undefined;\n};\n\nexport type RunnableFunction<Args extends object | string> =\n  Args extends string ? RunnableFunctionWithoutParse\n  : Args extends object ? RunnableFunctionWithParse<Args>\n  : never;\n\nexport type RunnableToolFunction<Args extends object | string> =\n  Args extends string ? RunnableToolFunctionWithoutParse\n  : Args extends object ? RunnableToolFunctionWithParse<Args>\n  : never;\n\nexport type RunnableToolFunctionWithoutParse = {\n  type: 'function';\n  function: RunnableFunctionWithoutParse;\n};\nexport type RunnableToolFunctionWithParse<Args extends object> = {\n  type: 'function';\n  function: RunnableFunctionWithParse<Args>;\n};\n\nexport function isRunnableFunctionWithParse<Args extends object>(\n  fn: any,\n): fn is RunnableFunctionWithParse<Args> {\n  return typeof (fn as any).parse === 'function';\n}\n\nexport type BaseFunctionsArgs = readonly (object | string)[];\n\nexport type RunnableFunctions<FunctionsArgs extends BaseFunctionsArgs> =\n  [any[]] extends [FunctionsArgs] ? readonly RunnableFunction<any>[]\n  : {\n      [Index in keyof FunctionsArgs]: Index extends number ? RunnableFunction<FunctionsArgs[Index]>\n      : FunctionsArgs[Index];\n    };\n\nexport type RunnableTools<FunctionsArgs extends BaseFunctionsArgs> =\n  [any[]] extends [FunctionsArgs] ? readonly RunnableToolFunction<any>[]\n  : {\n      [Index in keyof FunctionsArgs]: Index extends number ? RunnableToolFunction<FunctionsArgs[Index]>\n      : FunctionsArgs[Index];\n    };\n\n/**\n * This is helper class for passing a `function` and `parse` where the `function`\n * argument type matches the `parse` return type.\n *\n * @deprecated - please use ParsingToolFunction instead.\n */\nexport class ParsingFunction<Args extends object> {\n  function: RunnableFunctionWithParse<Args>['function'];\n  parse: RunnableFunctionWithParse<Args>['parse'];\n  parameters: RunnableFunctionWithParse<Args>['parameters'];\n  description: RunnableFunctionWithParse<Args>['description'];\n  name?: RunnableFunctionWithParse<Args>['name'];\n\n  constructor(input: RunnableFunctionWithParse<Args>) {\n    this.function = input.function;\n    this.parse = input.parse;\n    this.parameters = input.parameters;\n    this.description = input.description;\n    this.name = input.name;\n  }\n}\n\n/**\n * This is helper class for passing a `function` and `parse` where the `function`\n * argument type matches the `parse` return type.\n */\nexport class ParsingToolFunction<Args extends object> {\n  type: 'function';\n  function: RunnableFunctionWithParse<Args>;\n\n  constructor(input: RunnableFunctionWithParse<Args>) {\n    this.type = 'function';\n    this.function = input;\n  }\n}\n","export function concatBytes(buffers: Uint8Array[]): Uint8Array {\n  let length = 0;\n  for (const buffer of buffers) {\n    length += buffer.length;\n  }\n  const output = new Uint8Array(length);\n  let index = 0;\n  for (const buffer of buffers) {\n    output.set(buffer, index);\n    index += buffer.length;\n  }\n\n  return output;\n}\n\nlet encodeUTF8_: (str: string) => Uint8Array;\nexport function encodeUTF8(str: string) {\n  let encoder;\n  return (\n    encodeUTF8_ ??\n    ((encoder = new (globalThis as any).TextEncoder()), (encodeUTF8_ = encoder.encode.bind(encoder)))\n  )(str);\n}\n\nlet decodeUTF8_: (bytes: Uint8Array) => string;\nexport function decodeUTF8(bytes: Uint8Array) {\n  let decoder;\n  return (\n    decodeUTF8_ ??\n    ((decoder = new (globalThis as any).TextDecoder()), (decodeUTF8_ = decoder.decode.bind(decoder)))\n  )(bytes);\n}\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport type { FinalRequestOptions } from './request-options';\nimport { Stream } from '../core/streaming';\nimport { type Together } from '../client';\nimport { formatRequestDetails, loggerFor } from './utils/log';\n\nexport type APIResponseProps = {\n  response: Response;\n  options: FinalRequestOptions;\n  controller: AbortController;\n  requestLogID: string;\n  retryOfRequestLogID: string | undefined;\n  startTime: number;\n};\n\nexport async function defaultParseResponse<T>(client: Together, props: APIResponseProps): Promise<T> {\n  const { response, requestLogID, retryOfRequestLogID, startTime } = props;\n  const body = await (async () => {\n    if (props.options.stream) {\n      loggerFor(client).debug('response', response.status, response.url, response.headers, response.body);\n\n      // Note: there is an invariant here that isn't represented in the type system\n      // that if you set `stream: true` the response type must also be `Stream<T>`\n\n      if (props.options.__streamClass) {\n        return props.options.__streamClass.fromSSEResponse(response, props.controller, client) as any;\n      }\n\n      return Stream.fromSSEResponse(response, props.controller, client) as any;\n    }\n\n    // fetch refuses to read the body when the status code is 204.\n    if (response.status === 204) {\n      return null as T;\n    }\n\n    if (props.options.__binaryResponse) {\n      return response as unknown as T;\n    }\n\n    const contentType = response.headers.get('content-type');\n    const mediaType = contentType?.split(';')[0]?.trim();\n    const isJSON = mediaType?.includes('application/json') || mediaType?.endsWith('+json');\n    if (isJSON) {\n      const json = await response.json();\n      return json as T;\n    }\n\n    const text = await response.text();\n    return text as unknown as T;\n  })();\n  loggerFor(client).debug(\n    `[${requestLogID}] response parsed`,\n    formatRequestDetails({\n      retryOfRequestLogID,\n      url: response.url,\n      status: response.status,\n      body,\n      durationMs: Date.now() - startTime,\n    }),\n  );\n  return body;\n}\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { hasOwn } from './values';\nimport { type Together } from '../../client';\nimport { RequestOptions } from '../request-options';\n\ntype LogFn = (message: string, ...rest: unknown[]) => void;\nexport type Logger = {\n  error: LogFn;\n  warn: LogFn;\n  info: LogFn;\n  debug: LogFn;\n};\nexport type LogLevel = 'off' | 'error' | 'warn' | 'info' | 'debug';\n\nconst levelNumbers = {\n  off: 0,\n  error: 200,\n  warn: 300,\n  info: 400,\n  debug: 500,\n};\n\nexport const parseLogLevel = (\n  maybeLevel: string | undefined,\n  sourceName: string,\n  client: Together,\n): LogLevel | undefined => {\n  if (!maybeLevel) {\n    return undefined;\n  }\n  if (hasOwn(levelNumbers, maybeLevel)) {\n    return maybeLevel;\n  }\n  loggerFor(client).warn(\n    `${sourceName} was set to ${JSON.stringify(maybeLevel)}, expected one of ${JSON.stringify(\n      Object.keys(levelNumbers),\n    )}`,\n  );\n  return undefined;\n};\n\nfunction noop() {}\n\nfunction makeLogFn(fnLevel: keyof Logger, logger: Logger | undefined, logLevel: LogLevel) {\n  if (!logger || levelNumbers[fnLevel] > levelNumbers[logLevel]) {\n    return noop;\n  } else {\n    // Don't wrap logger functions, we want the stacktrace intact!\n    return logger[fnLevel].bind(logger);\n  }\n}\n\nconst noopLogger = {\n  error: noop,\n  warn: noop,\n  info: noop,\n  debug: noop,\n};\n\nlet cachedLoggers = /* @__PURE__ */ new WeakMap<Logger, [LogLevel, Logger]>();\n\nexport function loggerFor(client: Together): Logger {\n  const logger = client.logger;\n  const logLevel = client.logLevel ?? 'off';\n  if (!logger) {\n    return noopLogger;\n  }\n\n  const cachedLogger = cachedLoggers.get(logger);\n  if (cachedLogger && cachedLogger[0] === logLevel) {\n    return cachedLogger[1];\n  }\n\n  const levelLogger = {\n    error: makeLogFn('error', logger, logLevel),\n    warn: makeLogFn('warn', logger, logLevel),\n    info: makeLogFn('info', logger, logLevel),\n    debug: makeLogFn('debug', logger, logLevel),\n  };\n\n  cachedLoggers.set(logger, [logLevel, levelLogger]);\n\n  return levelLogger;\n}\n\nexport const formatRequestDetails = (details: {\n  options?: RequestOptions | undefined;\n  headers?: Headers | Record<string, string> | undefined;\n  retryOfRequestLogID?: string | undefined;\n  retryOf?: string | undefined;\n  url?: string | undefined;\n  status?: number | undefined;\n  method?: string | undefined;\n  durationMs?: number | undefined;\n  message?: unknown;\n  body?: unknown;\n}) => {\n  if (details.options) {\n    details.options = { ...details.options };\n    delete details.options['headers']; // redundant + leaks internals\n  }\n  if (details.headers) {\n    details.headers = Object.fromEntries(\n      (details.headers instanceof Headers ? [...details.headers] : Object.entries(details.headers)).map(\n        ([name, value]) => [\n          name,\n          (\n            name.toLowerCase() === 'authorization' ||\n            name.toLowerCase() === 'cookie' ||\n            name.toLowerCase() === 'set-cookie'\n          ) ?\n            '***'\n          : value,\n        ],\n      ),\n    );\n  }\n  if ('retryOfRequestLogID' in details) {\n    if (details.retryOfRequestLogID) {\n      details.retryOf = details.retryOfRequestLogID;\n    }\n    delete details.retryOfRequestLogID;\n  }\n  return details;\n};\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { TogetherError } from '../../core/error';\n\n// https://url.spec.whatwg.org/#url-scheme-string\nconst startsWithSchemeRegexp = /^[a-z][a-z0-9+.-]*:/i;\n\nexport const isAbsoluteURL = (url: string): boolean => {\n  return startsWithSchemeRegexp.test(url);\n};\n\nexport let isArray = (val: unknown): val is unknown[] => ((isArray = Array.isArray), isArray(val));\nexport let isReadonlyArray = isArray as (val: unknown) => val is readonly unknown[];\n\n/** Returns an object if the given value isn't an object, otherwise returns as-is */\nexport function maybeObj(x: unknown): object {\n  if (typeof x !== 'object') {\n    return {};\n  }\n\n  return x ?? {};\n}\n\n// https://stackoverflow.com/a/34491287\nexport function isEmptyObj(obj: Object | null | undefined): boolean {\n  if (!obj) return true;\n  for (const _k in obj) return false;\n  return true;\n}\n\n// https://eslint.org/docs/latest/rules/no-prototype-builtins\nexport function hasOwn<T extends object = object>(obj: T, key: PropertyKey): key is keyof T {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n}\n\nexport function isObj(obj: unknown): obj is Record<string, unknown> {\n  return obj != null && typeof obj === 'object' && !Array.isArray(obj);\n}\n\nexport const ensurePresent = <T>(value: T | null | undefined): T => {\n  if (value == null) {\n    throw new TogetherError(`Expected a value to be given but received ${value} instead.`);\n  }\n\n  return value;\n};\n\nexport const validatePositiveInteger = (name: string, n: unknown): number => {\n  if (typeof n !== 'number' || !Number.isInteger(n)) {\n    throw new TogetherError(`${name} must be an integer`);\n  }\n  if (n < 0) {\n    throw new TogetherError(`${name} must be a positive integer`);\n  }\n  return n;\n};\n\nexport const coerceInteger = (value: unknown): number => {\n  if (typeof value === 'number') return Math.round(value);\n  if (typeof value === 'string') return parseInt(value, 10);\n\n  throw new TogetherError(`Could not coerce ${value} (type: ${typeof value}) into a number`);\n};\n\nexport const coerceFloat = (value: unknown): number => {\n  if (typeof value === 'number') return value;\n  if (typeof value === 'string') return parseFloat(value);\n\n  throw new TogetherError(`Could not coerce ${value} (type: ${typeof value}) into a number`);\n};\n\nexport const coerceBoolean = (value: unknown): boolean => {\n  if (typeof value === 'boolean') return value;\n  if (typeof value === 'string') return value === 'true';\n  return Boolean(value);\n};\n\nexport const maybeCoerceInteger = (value: unknown): number | undefined => {\n  if (value === undefined) {\n    return undefined;\n  }\n  return coerceInteger(value);\n};\n\nexport const maybeCoerceFloat = (value: unknown): number | undefined => {\n  if (value === undefined) {\n    return undefined;\n  }\n  return coerceFloat(value);\n};\n\nexport const maybeCoerceBoolean = (value: unknown): boolean | undefined => {\n  if (value === undefined) {\n    return undefined;\n  }\n  return coerceBoolean(value);\n};\n\nexport const safeJSON = (text: string) => {\n  try {\n    return JSON.parse(text);\n  } catch (err) {\n    return undefined;\n  }\n};\n","import { BlobPart, getName, makeFile, isAsyncIterable } from './uploads';\nimport type { FilePropertyBag } from './builtin-types';\nimport { checkFileSupport } from './uploads';\n\ntype BlobLikePart = string | ArrayBuffer | ArrayBufferView | BlobLike | DataView;\n\n/**\n * Intended to match DOM Blob, node-fetch Blob, node:buffer Blob, etc.\n * Don't add arrayBuffer here, node-fetch doesn't have it\n */\ninterface BlobLike {\n  /** [MDN Reference](https://developer.mozilla.org/docs/Web/API/Blob/size) */\n  readonly size: number;\n  /** [MDN Reference](https://developer.mozilla.org/docs/Web/API/Blob/type) */\n  readonly type: string;\n  /** [MDN Reference](https://developer.mozilla.org/docs/Web/API/Blob/text) */\n  text(): Promise<string>;\n  /** [MDN Reference](https://developer.mozilla.org/docs/Web/API/Blob/slice) */\n  slice(start?: number, end?: number): BlobLike;\n}\n\n/**\n * This check adds the arrayBuffer() method type because it is available and used at runtime\n */\nconst isBlobLike = (value: any): value is BlobLike & { arrayBuffer(): Promise<ArrayBuffer> } =>\n  value != null &&\n  typeof value === 'object' &&\n  typeof value.size === 'number' &&\n  typeof value.type === 'string' &&\n  typeof value.text === 'function' &&\n  typeof value.slice === 'function' &&\n  typeof value.arrayBuffer === 'function';\n\n/**\n * Intended to match DOM File, node:buffer File, undici File, etc.\n */\ninterface FileLike extends BlobLike {\n  /** [MDN Reference](https://developer.mozilla.org/docs/Web/API/File/lastModified) */\n  readonly lastModified: number;\n  /** [MDN Reference](https://developer.mozilla.org/docs/Web/API/File/name) */\n  readonly name?: string | undefined;\n}\n\n/**\n * This check adds the arrayBuffer() method type because it is available and used at runtime\n */\nconst isFileLike = (value: any): value is FileLike & { arrayBuffer(): Promise<ArrayBuffer> } =>\n  value != null &&\n  typeof value === 'object' &&\n  typeof value.name === 'string' &&\n  typeof value.lastModified === 'number' &&\n  isBlobLike(value);\n\n/**\n * Intended to match DOM Response, node-fetch Response, undici Response, etc.\n */\nexport interface ResponseLike {\n  url: string;\n  blob(): Promise<BlobLike>;\n}\n\nconst isResponseLike = (value: any): value is ResponseLike =>\n  value != null &&\n  typeof value === 'object' &&\n  typeof value.url === 'string' &&\n  typeof value.blob === 'function';\n\nexport type ToFileInput =\n  | FileLike\n  | ResponseLike\n  | Exclude<BlobLikePart, string>\n  | AsyncIterable<BlobLikePart>;\n\n/**\n * Helper for creating a {@link File} to pass to an SDK upload method from a variety of different data formats\n * @param value the raw content of the file.  Can be an {@link Uploadable}, {@link BlobLikePart}, or {@link AsyncIterable} of {@link BlobLikePart}s\n * @param {string=} name the name of the file. If omitted, toFile will try to determine a file name from bits if possible\n * @param {Object=} options additional properties\n * @param {string=} options.type the MIME type of the content\n * @param {number=} options.lastModified the last modified timestamp\n * @returns a {@link File} with the given properties\n */\nexport async function toFile(\n  value: ToFileInput | PromiseLike<ToFileInput>,\n  name?: string | null | undefined,\n  options?: FilePropertyBag | undefined,\n): Promise<File> {\n  checkFileSupport();\n\n  // If it's a promise, resolve it.\n  value = await value;\n\n  // If we've been given a `File` we don't need to do anything\n  if (isFileLike(value)) {\n    if (value instanceof File) {\n      return value;\n    }\n    return makeFile([await value.arrayBuffer()], value.name);\n  }\n\n  if (isResponseLike(value)) {\n    const blob = await value.blob();\n    name ||= new URL(value.url).pathname.split(/[\\\\/]/).pop();\n\n    return makeFile(await getBytes(blob), name, options);\n  }\n\n  const parts = await getBytes(value);\n\n  name ||= getName(value);\n\n  if (!options?.type) {\n    const type = parts.find((part) => typeof part === 'object' && 'type' in part && part.type);\n    if (typeof type === 'string') {\n      options = { ...options, type };\n    }\n  }\n\n  return makeFile(parts, name, options);\n}\n\nasync function getBytes(value: BlobLikePart | AsyncIterable<BlobLikePart>): Promise<Array<BlobPart>> {\n  let parts: Array<BlobPart> = [];\n  if (\n    typeof value === 'string' ||\n    ArrayBuffer.isView(value) || // includes Uint8Array, Buffer, etc.\n    value instanceof ArrayBuffer\n  ) {\n    parts.push(value);\n  } else if (isBlobLike(value)) {\n    parts.push(value instanceof Blob ? value : await value.arrayBuffer());\n  } else if (\n    isAsyncIterable(value) // includes Readable, ReadableStream, etc.\n  ) {\n    for await (const chunk of value) {\n      parts.push(...(await getBytes(chunk as BlobLikePart))); // TODO, consider validating?\n    }\n  } else {\n    const constructor = value?.constructor?.name;\n    throw new Error(\n      `Unexpected data type: ${typeof value}${\n        constructor ? `; constructor: ${constructor}` : ''\n      }${propsForError(value)}`,\n    );\n  }\n\n  return parts;\n}\n\nfunction propsForError(value: unknown): string {\n  if (typeof value !== 'object' || value === null) return '';\n  const props = Object.getOwnPropertyNames(value);\n  return `; props: [${props.map((p) => `\"${p}\"`).join(', ')}]`;\n}\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { APIResource } from '../../core/resource';\nimport * as ChatCompletionsAPI from './completions';\nimport * as CompletionsAPI from '../completions';\nimport { APIPromise } from '../../core/api-promise';\nimport { Stream } from '../../core/streaming';\nimport { ChatCompletionStream, ChatCompletionStreamParams } from '../../lib/ChatCompletionStream';\nimport { RequestOptions } from '../../internal/request-options';\n\nexport class Completions extends APIResource {\n  /**\n   * Query a chat model.\n   *\n   * @example\n   * ```ts\n   * const chatCompletion = await client.chat.completions.create(\n   *   {\n   *     messages: [{ content: 'content', role: 'system' }],\n   *     model: 'meta-llama/Meta-Llama-3.1-8B-Instruct-Turbo',\n   *   },\n   * );\n   * ```\n   */\n  create(body: CompletionCreateParamsNonStreaming, options?: RequestOptions): APIPromise<ChatCompletion>;\n  create(\n    body: CompletionCreateParamsStreaming,\n    options?: RequestOptions,\n  ): APIPromise<Stream<ChatCompletionChunk>>;\n  create(\n    body: CompletionCreateParamsBase,\n    options?: RequestOptions,\n  ): APIPromise<Stream<ChatCompletionChunk> | ChatCompletion>;\n  create(\n    body: CompletionCreateParams,\n    options?: RequestOptions,\n  ): APIPromise<ChatCompletion> | APIPromise<Stream<ChatCompletionChunk>> {\n    return this._client.post('/chat/completions', { body, ...options, stream: body.stream ?? false }) as\n      | APIPromise<ChatCompletion>\n      | APIPromise<Stream<ChatCompletionChunk>>;\n  }\n  stream(body: ChatCompletionStreamParams, options?: RequestOptions): ChatCompletionStream {\n    return ChatCompletionStream.createChatCompletion(this._client.chat.completions, body, options);\n  }\n}\n\nexport interface ChatCompletion {\n  id: string;\n\n  choices: Array<ChatCompletion.Choice>;\n\n  created: number;\n\n  model: string;\n\n  object: 'chat.completion';\n\n  usage?: ChatCompletionUsage | null;\n\n  warnings?: Array<ChatCompletionWarning>;\n}\n\nexport namespace ChatCompletion {\n  export interface Choice {\n    finish_reason?: 'stop' | 'eos' | 'length' | 'tool_calls' | 'function_call';\n\n    index?: number;\n\n    logprobs?: CompletionsAPI.LogProbs | null;\n\n    message?: ChatCompletionsAPI.ChatCompletionMessage;\n\n    seed?: number;\n\n    text?: string;\n  }\n\n  export interface Warning {\n    message?: string;\n  }\n}\n\nexport interface ChatCompletionAssistantMessageParam {\n  role: 'assistant';\n\n  content?: string | null;\n\n  /**\n   * @deprecated\n   */\n  function_call?: ChatCompletionAssistantMessageParam.FunctionCall;\n\n  name?: string;\n\n  tool_calls?: Array<CompletionsAPI.ToolChoice>;\n}\n\nexport namespace ChatCompletionAssistantMessageParam {\n  /**\n   * @deprecated\n   */\n  export interface FunctionCall {\n    arguments: string;\n\n    name: string;\n  }\n}\n\nexport interface ChatCompletionChunk {\n  id: string;\n\n  choices: Array<ChatCompletionChunk.Choice>;\n\n  created: number;\n\n  model: string;\n\n  object: 'chat.completion.chunk';\n\n  system_fingerprint?: string;\n\n  usage?: ChatCompletionUsage | null;\n\n  warnings?: Array<ChatCompletionWarning>;\n}\n\nexport namespace ChatCompletionChunk {\n  export interface Choice {\n    delta: Choice.Delta;\n\n    finish_reason: 'stop' | 'eos' | 'length' | 'tool_calls' | 'function_call' | null;\n\n    index: number;\n\n    logprobs?: number | null;\n\n    seed?: number | null;\n  }\n\n  export namespace Choice {\n    export interface Delta {\n      role: 'system' | 'user' | 'assistant' | 'function' | 'tool';\n\n      content?: string | null;\n\n      /**\n       * @deprecated\n       */\n      function_call?: Delta.FunctionCall | null;\n\n      token_id?: number;\n\n      tool_calls?: Array<CompletionsAPI.ToolChoice>;\n    }\n\n    export namespace Delta {\n      /**\n       * @deprecated\n       */\n      export interface FunctionCall {\n        arguments: string;\n\n        name: string;\n      }\n    }\n  }\n}\n\n/**\n * @deprecated\n */\nexport interface ChatCompletionFunctionMessageParam {\n  content: string;\n\n  name: string;\n\n  role: 'function';\n}\n\nexport interface ChatCompletionMessage {\n  content: string | null;\n\n  role: 'assistant';\n\n  /**\n   * @deprecated\n   */\n  function_call?: ChatCompletionMessage.FunctionCall;\n\n  tool_calls?: Array<CompletionsAPI.ToolChoice>;\n}\n\nexport namespace ChatCompletionMessage {\n  /**\n   * @deprecated\n   */\n  export interface FunctionCall {\n    arguments: string;\n\n    name: string;\n  }\n}\n\nexport type ChatCompletionMessageParam =\n  | ChatCompletionSystemMessageParam\n  | ChatCompletionUserMessageParam\n  | ChatCompletionAssistantMessageParam\n  | ChatCompletionToolMessageParam\n  | ChatCompletionFunctionMessageParam;\n\nexport interface ChatCompletionSystemMessageParam {\n  content: string;\n\n  role: 'system';\n\n  name?: string;\n}\n\nexport interface ChatCompletionTool {\n  function: ChatCompletionTool.Function;\n\n  type: 'function';\n}\n\nexport namespace ChatCompletionTool {\n  export interface Function {\n    name: string;\n\n    description?: string;\n\n    parameters?: Record<string, unknown>;\n  }\n}\n\nexport interface ChatCompletionToolMessageParam {\n  content?: string;\n\n  required?: unknown;\n\n  role?: 'tool';\n\n  tool_call_id?: string;\n}\n\nexport interface ChatCompletionStructuredMessageImageURL {\n  image_url?: ChatCompletionStructuredMessageImageURL.ImageURL;\n\n  type?: 'image_url';\n}\n\nexport namespace ChatCompletionStructuredMessageImageURL {\n  export interface ImageURL {\n    /**\n     * The URL of the image\n     */\n    url: string;\n  }\n}\n\nexport interface ChatCompletionStructuredMessageText {\n  text: string;\n\n  type: 'text';\n}\n\nexport interface ChatCompletionStructuredMessageVideoURL {\n  type: 'video_url';\n\n  video_url: ChatCompletionStructuredMessageVideoURL.VideoURL;\n}\n\nexport namespace ChatCompletionStructuredMessageVideoURL {\n  export interface VideoURL {\n    /**\n     * The URL of the video\n     */\n    url: string;\n  }\n}\n\nexport interface ChatCompletionUsage {\n  completion_tokens: number;\n\n  prompt_tokens: number;\n\n  total_tokens: number;\n}\n\nexport interface ChatCompletionUserMessageParam {\n  content: string;\n\n  role: 'user';\n\n  name?: string;\n}\n\nexport interface ChatCompletionWarning {\n  message: string;\n}\n\nexport type CompletionCreateParams = CompletionCreateParamsNonStreaming | CompletionCreateParamsStreaming;\n\nexport interface CompletionCreateParamsBase {\n  /**\n   * A list of messages comprising the conversation so far.\n   */\n  messages: Array<\n    | CompletionCreateParams.ChatCompletionSystemMessageParam\n    | CompletionCreateParams.ChatCompletionUserMessageParam\n    | CompletionCreateParams.ChatCompletionAssistantMessageParam\n    | CompletionCreateParams.ChatCompletionToolMessageParam\n    | CompletionCreateParams.ChatCompletionFunctionMessageParam\n  >;\n\n  /**\n   * The name of the model to query.\n   *\n   * [See all of Together AI's chat models](https://docs.together.ai/docs/serverless-models#chat-models)\n   */\n  model:\n    | 'Qwen/Qwen2.5-72B-Instruct-Turbo'\n    | 'Qwen/Qwen2.5-7B-Instruct-Turbo'\n    | 'meta-llama/Meta-Llama-3.1-405B-Instruct-Turbo'\n    | 'meta-llama/Meta-Llama-3.1-70B-Instruct-Turbo'\n    | 'meta-llama/Meta-Llama-3.1-8B-Instruct-Turbo'\n    | (string & {});\n\n  /**\n   * Defined the behavior of the API when max_tokens exceed the maximum context\n   * length of the model. When set to 'error', API will return 400 with appropriate\n   * error message. When set to 'truncate', override the max_tokens with maximum\n   * context length of the model.\n   */\n  context_length_exceeded_behavior?: 'truncate' | 'error';\n\n  /**\n   * If true, the response will contain the prompt. Can be used with `logprobs` to\n   * return prompt logprobs.\n   */\n  echo?: boolean;\n\n  /**\n   * A number between -2.0 and 2.0 where a positive value decreases the likelihood of\n   * repeating tokens that have already been mentioned.\n   */\n  frequency_penalty?: number;\n\n  function_call?: 'none' | 'auto' | CompletionCreateParams.Name;\n\n  /**\n   * Adjusts the likelihood of specific tokens appearing in the generated output.\n   */\n  logit_bias?: { [key: string]: number };\n\n  /**\n   * An integer between 0 and 20 of the top k tokens to return log probabilities for\n   * at each generation step, instead of just the sampled token. Log probabilities\n   * help assess model confidence in token predictions.\n   */\n  logprobs?: number;\n\n  /**\n   * The maximum number of tokens to generate.\n   */\n  max_tokens?: number;\n\n  /**\n   * A number between 0 and 1 that can be used as an alternative to top_p and top-k.\n   */\n  min_p?: number;\n\n  /**\n   * The number of completions to generate for each prompt.\n   */\n  n?: number;\n\n  /**\n   * A number between -2.0 and 2.0 where a positive value increases the likelihood of\n   * a model talking about new topics.\n   */\n  presence_penalty?: number;\n\n  /**\n   * Controls the level of reasoning effort the model should apply when generating\n   * responses. Higher values may result in more thoughtful and detailed responses\n   * but may take longer to generate.\n   */\n  reasoning_effort?: 'low' | 'medium' | 'high';\n\n  /**\n   * A number that controls the diversity of generated text by reducing the\n   * likelihood of repeated sequences. Higher values decrease repetition.\n   */\n  repetition_penalty?: number;\n\n  /**\n   * An object specifying the format that the model must output.\n   */\n  response_format?: CompletionCreateParams.ResponseFormat;\n\n  /**\n   * The name of the moderation model used to validate tokens. Choose from the\n   * available moderation models found\n   * [here](https://docs.together.ai/docs/inference-models#moderation-models).\n   */\n  safety_model?: string;\n\n  /**\n   * Seed value for reproducibility.\n   */\n  seed?: number;\n\n  /**\n   * A list of string sequences that will truncate (stop) inference text output. For\n   * example, \"</s>\" will stop generation as soon as the model generates the given\n   * token.\n   */\n  stop?: Array<string>;\n\n  /**\n   * If true, stream tokens as Server-Sent Events as the model generates them instead\n   * of waiting for the full model response. The stream terminates with\n   * `data: [DONE]`. If false, return a single JSON object containing the results.\n   */\n  stream?: boolean;\n\n  /**\n   * A decimal number from 0-1 that determines the degree of randomness in the\n   * response. A temperature less than 1 favors more correctness and is appropriate\n   * for question answering or summarization. A value closer to 1 introduces more\n   * randomness in the output.\n   */\n  temperature?: number;\n\n  /**\n   * Controls which (if any) function is called by the model. By default uses `auto`,\n   * which lets the model pick between generating a message or calling a function.\n   */\n  tool_choice?: string | CompletionsAPI.ToolChoice;\n\n  /**\n   * A list of tools the model may call. Currently, only functions are supported as a\n   * tool. Use this to provide a list of functions the model may generate JSON inputs\n   * for.\n   */\n  tools?: Array<CompletionsAPI.Tools>;\n\n  /**\n   * An integer that's used to limit the number of choices for the next predicted\n   * word or token. It specifies the maximum number of tokens to consider at each\n   * step, based on their probability of occurrence. This technique helps to speed up\n   * the generation process and can improve the quality of the generated text by\n   * focusing on the most likely options.\n   */\n  top_k?: number;\n\n  /**\n   * A percentage (also called the nucleus parameter) that's used to dynamically\n   * adjust the number of choices for each predicted token based on the cumulative\n   * probabilities. It specifies a probability threshold below which all less likely\n   * tokens are filtered out. This technique helps maintain diversity and generate\n   * more fluent and natural-sounding text.\n   */\n  top_p?: number;\n}\n\nexport namespace CompletionCreateParams {\n  export interface ChatCompletionSystemMessageParam {\n    content: string;\n\n    role: 'system';\n\n    name?: string;\n  }\n\n  export interface ChatCompletionUserMessageParam {\n    /**\n     * The content of the message, which can either be a simple string or a structured\n     * format.\n     */\n    content:\n      | string\n      | Array<\n          | ChatCompletionsAPI.ChatCompletionStructuredMessageText\n          | ChatCompletionsAPI.ChatCompletionStructuredMessageImageURL\n          | ChatCompletionsAPI.ChatCompletionStructuredMessageVideoURL\n          | ChatCompletionUserMessageParam.Audio\n          | ChatCompletionUserMessageParam.InputAudio\n        >;\n\n    role: 'user';\n\n    name?: string;\n  }\n\n  export namespace ChatCompletionUserMessageParam {\n    export interface Audio {\n      audio_url: Audio.AudioURL;\n\n      type: 'audio_url';\n    }\n\n    export namespace Audio {\n      export interface AudioURL {\n        /**\n         * The URL of the audio\n         */\n        url: string;\n      }\n    }\n\n    export interface InputAudio {\n      input_audio: InputAudio.InputAudio;\n\n      type: 'input_audio';\n    }\n\n    export namespace InputAudio {\n      export interface InputAudio {\n        /**\n         * The base64 encoded audio data\n         */\n        data: string;\n\n        /**\n         * The format of the audio data\n         */\n        format: 'wav';\n      }\n    }\n  }\n\n  export interface ChatCompletionAssistantMessageParam {\n    role: 'assistant';\n\n    content?: string | null;\n\n    /**\n     * @deprecated\n     */\n    function_call?: ChatCompletionAssistantMessageParam.FunctionCall;\n\n    name?: string;\n\n    tool_calls?: Array<CompletionsAPI.ToolChoice>;\n  }\n\n  export namespace ChatCompletionAssistantMessageParam {\n    /**\n     * @deprecated\n     */\n    export interface FunctionCall {\n      arguments: string;\n\n      name: string;\n    }\n  }\n\n  export interface ChatCompletionToolMessageParam {\n    content: string;\n\n    role: 'tool';\n\n    tool_call_id: string;\n  }\n\n  /**\n   * @deprecated\n   */\n  export interface ChatCompletionFunctionMessageParam {\n    content: string;\n\n    name: string;\n\n    role: 'function';\n  }\n\n  export interface Name {\n    name: string;\n  }\n\n  /**\n   * An object specifying the format that the model must output.\n   */\n  export interface ResponseFormat {\n    /**\n     * The schema of the response format.\n     */\n    schema?: { [key: string]: unknown };\n\n    /**\n     * The type of the response format.\n     */\n    type?: string;\n  }\n\n  export type CompletionCreateParamsNonStreaming = ChatCompletionsAPI.CompletionCreateParamsNonStreaming;\n  export type CompletionCreateParamsStreaming = ChatCompletionsAPI.CompletionCreateParamsStreaming;\n}\n\nexport interface CompletionCreateParamsNonStreaming extends CompletionCreateParamsBase {\n  /**\n   * If true, stream tokens as Server-Sent Events as the model generates them instead\n   * of waiting for the full model response. The stream terminates with\n   * `data: [DONE]`. If false, return a single JSON object containing the results.\n   */\n  stream?: false;\n}\n\nexport interface CompletionCreateParamsStreaming extends CompletionCreateParamsBase {\n  /**\n   * If true, stream tokens as Server-Sent Events as the model generates them instead\n   * of waiting for the full model response. The stream terminates with\n   * `data: [DONE]`. If false, return a single JSON object containing the results.\n   */\n  stream: true;\n}\n\nexport declare namespace Completions {\n  export {\n    type ChatCompletion as ChatCompletion,\n    type ChatCompletionAssistantMessageParam as ChatCompletionAssistantMessageParam,\n    type ChatCompletionChunk as ChatCompletionChunk,\n    type ChatCompletionFunctionMessageParam as ChatCompletionFunctionMessageParam,\n    type ChatCompletionMessage as ChatCompletionMessage,\n    type ChatCompletionMessageParam as ChatCompletionMessageParam,\n    type ChatCompletionSystemMessageParam as ChatCompletionSystemMessageParam,\n    type ChatCompletionTool as ChatCompletionTool,\n    type ChatCompletionToolMessageParam as ChatCompletionToolMessageParam,\n    type ChatCompletionStructuredMessageImageURL as ChatCompletionStructuredMessageImageURL,\n    type ChatCompletionStructuredMessageText as ChatCompletionStructuredMessageText,\n    type ChatCompletionStructuredMessageVideoURL as ChatCompletionStructuredMessageVideoURL,\n    type ChatCompletionUsage as ChatCompletionUsage,\n    type ChatCompletionWarning as ChatCompletionWarning,\n    type CompletionCreateParams as CompletionCreateParams,\n    type CompletionCreateParamsNonStreaming as CompletionCreateParamsNonStreaming,\n    type CompletionCreateParamsStreaming as CompletionCreateParamsStreaming,\n  };\n}\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { APIResource } from '../../core/resource';\nimport * as CompletionsAPI from './completions';\nimport {\n  ChatCompletion,\n  ChatCompletionAssistantMessageParam,\n  ChatCompletionChunk,\n  ChatCompletionFunctionMessageParam,\n  ChatCompletionMessage,\n  ChatCompletionMessageParam,\n  ChatCompletionSystemMessageParam,\n  ChatCompletionTool,\n  ChatCompletionToolMessageParam,\n  ChatCompletionStructuredMessageImageURL,\n  ChatCompletionStructuredMessageText,\n  ChatCompletionStructuredMessageVideoURL,\n  ChatCompletionUsage,\n  ChatCompletionWarning,\n  CompletionCreateParams,\n  CompletionCreateParamsNonStreaming,\n  CompletionCreateParamsStreaming,\n  Completions,\n} from './completions';\n\nexport class Chat extends APIResource {\n  completions: CompletionsAPI.Completions = new CompletionsAPI.Completions(this._client);\n}\n\nChat.Completions = Completions;\n\nexport declare namespace Chat {\n  export {\n    Completions as Completions,\n    type ChatCompletion as ChatCompletion,\n    type ChatCompletionAssistantMessageParam as ChatCompletionAssistantMessageParam,\n    type ChatCompletionChunk as ChatCompletionChunk,\n    type ChatCompletionFunctionMessageParam as ChatCompletionFunctionMessageParam,\n    type ChatCompletionMessage as ChatCompletionMessage,\n    type ChatCompletionMessageParam as ChatCompletionMessageParam,\n    type ChatCompletionSystemMessageParam as ChatCompletionSystemMessageParam,\n    type ChatCompletionTool as ChatCompletionTool,\n    type ChatCompletionToolMessageParam as ChatCompletionToolMessageParam,\n    type ChatCompletionStructuredMessageImageURL as ChatCompletionStructuredMessageImageURL,\n    type ChatCompletionStructuredMessageText as ChatCompletionStructuredMessageText,\n    type ChatCompletionStructuredMessageVideoURL as ChatCompletionStructuredMessageVideoURL,\n    type ChatCompletionUsage as ChatCompletionUsage,\n    type ChatCompletionWarning as ChatCompletionWarning,\n    type CompletionCreateParams as CompletionCreateParams,\n    type CompletionCreateParamsNonStreaming as CompletionCreateParamsNonStreaming,\n    type CompletionCreateParamsStreaming as CompletionCreateParamsStreaming,\n  };\n}\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { castToError } from '../internal/errors';\n\nexport class TogetherError extends Error {}\n\nexport class APIError<\n  TStatus extends number | undefined = number | undefined,\n  THeaders extends Headers | undefined = Headers | undefined,\n  TError extends Object | undefined = Object | undefined,\n> extends TogetherError {\n  /** HTTP status for the response that caused the error */\n  readonly status: TStatus;\n  /** HTTP headers for the response that caused the error */\n  readonly headers: THeaders;\n  /** JSON body of the response that caused the error */\n  readonly error: TError;\n\n  constructor(status: TStatus, error: TError, message: string | undefined, headers: THeaders) {\n    super(`${APIError.makeMessage(status, error, message)}`);\n    this.status = status;\n    this.headers = headers;\n    this.error = error;\n  }\n\n  private static makeMessage(status: number | undefined, error: any, message: string | undefined) {\n    const msg =\n      error?.message ?\n        typeof error.message === 'string' ?\n          error.message\n        : JSON.stringify(error.message)\n      : error ? JSON.stringify(error)\n      : message;\n\n    if (status && msg) {\n      return `${status} ${msg}`;\n    }\n    if (status) {\n      return `${status} status code (no body)`;\n    }\n    if (msg) {\n      return msg;\n    }\n    return '(no status code or body)';\n  }\n\n  static generate(\n    status: number | undefined,\n    errorResponse: Object | undefined,\n    message: string | undefined,\n    headers: Headers | undefined,\n  ): APIError {\n    if (!status || !headers) {\n      return new APIConnectionError({ message, cause: castToError(errorResponse) });\n    }\n\n    const error = errorResponse as Record<string, any>;\n\n    if (status === 400) {\n      return new BadRequestError(status, error, message, headers);\n    }\n\n    if (status === 401) {\n      return new AuthenticationError(status, error, message, headers);\n    }\n\n    if (status === 403) {\n      return new PermissionDeniedError(status, error, message, headers);\n    }\n\n    if (status === 404) {\n      return new NotFoundError(status, error, message, headers);\n    }\n\n    if (status === 409) {\n      return new ConflictError(status, error, message, headers);\n    }\n\n    if (status === 422) {\n      return new UnprocessableEntityError(status, error, message, headers);\n    }\n\n    if (status === 429) {\n      return new RateLimitError(status, error, message, headers);\n    }\n\n    if (status >= 500) {\n      return new InternalServerError(status, error, message, headers);\n    }\n\n    return new APIError(status, error, message, headers);\n  }\n}\n\nexport class APIUserAbortError extends APIError<undefined, undefined, undefined> {\n  constructor({ message }: { message?: string } = {}) {\n    super(undefined, undefined, message || 'Request was aborted.', undefined);\n  }\n}\n\nexport class APIConnectionError extends APIError<undefined, undefined, undefined> {\n  constructor({ message, cause }: { message?: string | undefined; cause?: Error | undefined }) {\n    super(undefined, undefined, message || 'Connection error.', undefined);\n    // in some environments the 'cause' property is already declared\n    // @ts-ignore\n    if (cause) this.cause = cause;\n  }\n}\n\nexport class APIConnectionTimeoutError extends APIConnectionError {\n  constructor({ message }: { message?: string } = {}) {\n    super({ message: message ?? 'Request timed out.' });\n  }\n}\n\nexport class BadRequestError extends APIError<400, Headers> {}\n\nexport class AuthenticationError extends APIError<401, Headers> {}\n\nexport class PermissionDeniedError extends APIError<403, Headers> {}\n\nexport class NotFoundError extends APIError<404, Headers> {}\n\nexport class ConflictError extends APIError<409, Headers> {}\n\nexport class UnprocessableEntityError extends APIError<422, Headers> {}\n\nexport class RateLimitError extends APIError<429, Headers> {}\n\nexport class InternalServerError extends APIError<number, Headers> {}\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { APIResource } from '../../core/resource';\nimport { APIPromise } from '../../core/api-promise';\nimport { RequestOptions } from '../../internal/request-options';\n\nexport class Sessions extends APIResource {\n  /**\n   * Lists all your currently active sessions.\n   *\n   * @example\n   * ```ts\n   * const sessionListResponse =\n   *   await client.codeInterpreter.sessions.list();\n   * ```\n   */\n  list(options?: RequestOptions): APIPromise<SessionListResponse> {\n    return this._client.get('/tci/sessions', options);\n  }\n}\n\nexport interface SessionListResponse {\n  data?: SessionListResponse.Data;\n\n  errors?: Array<string | { [key: string]: unknown }>;\n}\n\nexport namespace SessionListResponse {\n  export interface Data {\n    sessions: Array<Data.Session>;\n  }\n\n  export namespace Data {\n    export interface Session {\n      /**\n       * Session Identifier. Used to make follow-up calls.\n       */\n      id: string;\n\n      execute_count: number;\n\n      expires_at: string;\n\n      last_execute_at: string;\n\n      started_at: string;\n    }\n  }\n}\n\nexport declare namespace Sessions {\n  export { type SessionListResponse as SessionListResponse };\n}\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { APIResource } from '../../core/resource';\nimport * as SessionsAPI from './sessions';\nimport { SessionListResponse, Sessions } from './sessions';\nimport { APIPromise } from '../../core/api-promise';\nimport { RequestOptions } from '../../internal/request-options';\n\nexport class CodeInterpreter extends APIResource {\n  sessions: SessionsAPI.Sessions = new SessionsAPI.Sessions(this._client);\n\n  /**\n   * Executes the given code snippet and returns the output. Without a session_id, a\n   * new session will be created to run the code. If you do pass in a valid\n   * session_id, the code will be run in that session. This is useful for running\n   * multiple code snippets in the same environment, because dependencies and similar\n   * things are persisted between calls to the same session.\n   *\n   * @example\n   * ```ts\n   * const executeResponse =\n   *   await client.codeInterpreter.execute({\n   *     code: \"print('Hello, world!')\",\n   *     language: 'python',\n   *   });\n   * ```\n   */\n  execute(body: CodeInterpreterExecuteParams, options?: RequestOptions): APIPromise<ExecuteResponse> {\n    return this._client.post('/tci/execute', { body, ...options });\n  }\n}\n\n/**\n * The result of the execution. If successful, `data` contains the result and\n * `errors` will be null. If unsuccessful, `data` will be null and `errors` will\n * contain the errors.\n */\nexport type ExecuteResponse = ExecuteResponse.SuccessfulExecution | ExecuteResponse.FailedExecution;\n\nexport namespace ExecuteResponse {\n  export interface SuccessfulExecution {\n    data: SuccessfulExecution.Data;\n\n    errors: null;\n  }\n\n  export namespace SuccessfulExecution {\n    export interface Data {\n      outputs: Array<Data.StreamOutput | Data.Error | Data.DisplayorExecuteOutput>;\n\n      /**\n       * Identifier of the current session. Used to make follow-up calls.\n       */\n      session_id: string;\n\n      /**\n       * Status of the execution. Currently only supports success.\n       */\n      status?: 'success';\n    }\n\n    export namespace Data {\n      /**\n       * Outputs that were printed to stdout or stderr\n       */\n      export interface StreamOutput {\n        data: string;\n\n        type: 'stdout' | 'stderr';\n      }\n\n      /**\n       * Errors and exceptions that occurred. If this output type is present, your code\n       * did not execute successfully.\n       */\n      export interface Error {\n        data: string;\n\n        type: 'error';\n      }\n\n      export interface DisplayorExecuteOutput {\n        data: DisplayorExecuteOutput.Data;\n\n        type: 'display_data' | 'execute_result';\n      }\n\n      export namespace DisplayorExecuteOutput {\n        export interface Data {\n          'application/geo+json'?: { [key: string]: unknown };\n\n          'application/javascript'?: string;\n\n          'application/json'?: { [key: string]: unknown };\n\n          'application/pdf'?: string;\n\n          'application/vnd.vega.v5+json'?: { [key: string]: unknown };\n\n          'application/vnd.vegalite.v4+json'?: { [key: string]: unknown };\n\n          'image/gif'?: string;\n\n          'image/jpeg'?: string;\n\n          'image/png'?: string;\n\n          'image/svg+xml'?: string;\n\n          'text/html'?: string;\n\n          'text/latex'?: string;\n\n          'text/markdown'?: string;\n\n          'text/plain'?: string;\n        }\n      }\n    }\n  }\n\n  export interface FailedExecution {\n    data: null;\n\n    errors: Array<string | { [key: string]: unknown }>;\n  }\n}\n\nexport interface CodeInterpreterExecuteParams {\n  /**\n   * Code snippet to execute.\n   */\n  code: string;\n\n  /**\n   * Programming language for the code to execute. Currently only supports Python,\n   * but more will be added.\n   */\n  language: 'python';\n\n  /**\n   * Files to upload to the session. If present, files will be uploaded before\n   * executing the given code.\n   */\n  files?: Array<CodeInterpreterExecuteParams.File>;\n\n  /**\n   * Identifier of the current session. Used to make follow-up calls. Requests will\n   * return an error if the session does not belong to the caller or has expired.\n   */\n  session_id?: string;\n}\n\nexport namespace CodeInterpreterExecuteParams {\n  export interface File {\n    content: string;\n\n    /**\n     * Encoding of the file content. Use `string` for text files such as code, and\n     * `base64` for binary files, such as images.\n     */\n    encoding: 'string' | 'base64';\n\n    name: string;\n  }\n}\n\nCodeInterpreter.Sessions = Sessions;\n\nexport declare namespace CodeInterpreter {\n  export {\n    type ExecuteResponse as ExecuteResponse,\n    type CodeInterpreterExecuteParams as CodeInterpreterExecuteParams,\n  };\n\n  export { Sessions as Sessions, type SessionListResponse as SessionListResponse };\n}\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { APIResource } from '../core/resource';\nimport * as CompletionsAPI from './completions';\nimport * as ChatCompletionsAPI from './chat/completions';\nimport { APIPromise } from '../core/api-promise';\nimport { Stream } from '../core/streaming';\nimport { RequestOptions } from '../internal/request-options';\n\nexport class Completions extends APIResource {\n  /**\n   * Query a language, code, or image model.\n   *\n   * @example\n   * ```ts\n   * const completion = await client.completions.create({\n   *   model: 'mistralai/Mixtral-8x7B-Instruct-v0.1',\n   *   prompt:\n   *     '<s>[INST] What is the capital of France? [/INST]',\n   * });\n   * ```\n   */\n  create(body: CompletionCreateParamsNonStreaming, options?: RequestOptions): APIPromise<Completion>;\n  create(\n    body: CompletionCreateParamsStreaming,\n    options?: RequestOptions,\n  ): APIPromise<Stream<CompletionChunk>>;\n  create(\n    body: CompletionCreateParamsBase,\n    options?: RequestOptions,\n  ): APIPromise<Stream<CompletionChunk> | Completion>;\n  create(\n    body: CompletionCreateParams,\n    options?: RequestOptions,\n  ): APIPromise<Completion> | APIPromise<Stream<CompletionChunk>> {\n    return this._client.post('/completions', { body, ...options, stream: body.stream ?? false }) as\n      | APIPromise<Completion>\n      | APIPromise<Stream<CompletionChunk>>;\n  }\n}\n\nexport interface Completion {\n  id: string;\n\n  choices: Array<Completion.Choice>;\n\n  created: number;\n\n  model: string;\n\n  object: 'text.completion';\n\n  usage: ChatCompletionsAPI.ChatCompletionUsage | null;\n\n  prompt?: Array<Completion.Prompt>;\n}\n\nexport namespace Completion {\n  export interface Choice {\n    finish_reason?: 'stop' | 'eos' | 'length' | 'tool_calls' | 'function_call';\n\n    logprobs?: CompletionsAPI.LogProbs;\n\n    seed?: number;\n\n    text?: string;\n  }\n\n  export interface Prompt {\n    logprobs?: CompletionsAPI.LogProbs;\n\n    text?: string;\n  }\n}\n\nexport interface CompletionChunk {\n  id: string;\n\n  token: CompletionChunk.Token;\n\n  choices: Array<CompletionChunk.Choice>;\n\n  finish_reason: 'stop' | 'eos' | 'length' | 'tool_calls' | 'function_call' | null;\n\n  usage: ChatCompletionsAPI.ChatCompletionUsage | null;\n\n  created?: number;\n\n  object?: 'completion.chunk';\n\n  seed?: number;\n}\n\nexport namespace CompletionChunk {\n  export interface Token {\n    id: number;\n\n    logprob: number;\n\n    special: boolean;\n\n    text: string;\n  }\n\n  export interface Choice {\n    index: number;\n\n    delta?: Choice.Delta;\n\n    text?: string;\n  }\n\n  export namespace Choice {\n    export interface Delta {\n      role: 'system' | 'user' | 'assistant' | 'function' | 'tool';\n\n      content?: string | null;\n\n      /**\n       * @deprecated\n       */\n      function_call?: Delta.FunctionCall | null;\n\n      token_id?: number;\n\n      tool_calls?: Array<CompletionsAPI.ToolChoice>;\n    }\n\n    export namespace Delta {\n      /**\n       * @deprecated\n       */\n      export interface FunctionCall {\n        arguments: string;\n\n        name: string;\n      }\n    }\n  }\n}\n\nexport interface LogProbs {\n  /**\n   * List of token IDs corresponding to the logprobs\n   */\n  token_ids?: Array<number | null>;\n\n  /**\n   * List of token log probabilities\n   */\n  token_logprobs?: Array<number | null>;\n\n  /**\n   * List of token strings\n   */\n  tokens?: Array<string | null>;\n}\n\nexport interface ToolChoice {\n  id: string;\n\n  function: ToolChoice.Function;\n\n  index: number;\n\n  type: 'function';\n}\n\nexport namespace ToolChoice {\n  export interface Function {\n    arguments: string;\n\n    name: string;\n  }\n}\n\nexport interface Tools {\n  function?: Tools.Function;\n\n  type?: string;\n}\n\nexport namespace Tools {\n  export interface Function {\n    description?: string;\n\n    name?: string;\n\n    /**\n     * A map of parameter names to their values.\n     */\n    parameters?: { [key: string]: unknown };\n  }\n}\n\nexport type CompletionCreateParams = CompletionCreateParamsNonStreaming | CompletionCreateParamsStreaming;\n\nexport interface CompletionCreateParamsBase {\n  /**\n   * The name of the model to query.\n   *\n   * [See all of Together AI's chat models](https://docs.together.ai/docs/serverless-models#chat-models)\n   */\n  model:\n    | 'meta-llama/Llama-2-70b-hf'\n    | 'mistralai/Mistral-7B-v0.1'\n    | 'mistralai/Mixtral-8x7B-v0.1'\n    | 'Meta-Llama/Llama-Guard-7b'\n    | (string & {});\n\n  /**\n   * A string providing context for the model to complete.\n   */\n  prompt: string;\n\n  /**\n   * If true, the response will contain the prompt. Can be used with `logprobs` to\n   * return prompt logprobs.\n   */\n  echo?: boolean;\n\n  /**\n   * A number between -2.0 and 2.0 where a positive value decreases the likelihood of\n   * repeating tokens that have already been mentioned.\n   */\n  frequency_penalty?: number;\n\n  /**\n   * Adjusts the likelihood of specific tokens appearing in the generated output.\n   */\n  logit_bias?: { [key: string]: number };\n\n  /**\n   * An integer between 0 and 20 of the top k tokens to return log probabilities for\n   * at each generation step, instead of just the sampled token. Log probabilities\n   * help assess model confidence in token predictions.\n   */\n  logprobs?: number;\n\n  /**\n   * The maximum number of tokens to generate.\n   */\n  max_tokens?: number;\n\n  /**\n   * A number between 0 and 1 that can be used as an alternative to top-p and top-k.\n   */\n  min_p?: number;\n\n  /**\n   * The number of completions to generate for each prompt.\n   */\n  n?: number;\n\n  /**\n   * A number between -2.0 and 2.0 where a positive value increases the likelihood of\n   * a model talking about new topics.\n   */\n  presence_penalty?: number;\n\n  /**\n   * A number that controls the diversity of generated text by reducing the\n   * likelihood of repeated sequences. Higher values decrease repetition.\n   */\n  repetition_penalty?: number;\n\n  /**\n   * The name of the moderation model used to validate tokens. Choose from the\n   * available moderation models found\n   * [here](https://docs.together.ai/docs/inference-models#moderation-models).\n   */\n  safety_model?: 'Meta-Llama/Llama-Guard-7b' | (string & {});\n\n  /**\n   * Seed value for reproducibility.\n   */\n  seed?: number;\n\n  /**\n   * A list of string sequences that will truncate (stop) inference text output. For\n   * example, \"</s>\" will stop generation as soon as the model generates the given\n   * token.\n   */\n  stop?: Array<string>;\n\n  /**\n   * If true, stream tokens as Server-Sent Events as the model generates them instead\n   * of waiting for the full model response. The stream terminates with\n   * `data: [DONE]`. If false, return a single JSON object containing the results.\n   */\n  stream?: boolean;\n\n  /**\n   * A decimal number from 0-1 that determines the degree of randomness in the\n   * response. A temperature less than 1 favors more correctness and is appropriate\n   * for question answering or summarization. A value closer to 1 introduces more\n   * randomness in the output.\n   */\n  temperature?: number;\n\n  /**\n   * An integer that's used to limit the number of choices for the next predicted\n   * word or token. It specifies the maximum number of tokens to consider at each\n   * step, based on their probability of occurrence. This technique helps to speed up\n   * the generation process and can improve the quality of the generated text by\n   * focusing on the most likely options.\n   */\n  top_k?: number;\n\n  /**\n   * A percentage (also called the nucleus parameter) that's used to dynamically\n   * adjust the number of choices for each predicted token based on the cumulative\n   * probabilities. It specifies a probability threshold below which all less likely\n   * tokens are filtered out. This technique helps maintain diversity and generate\n   * more fluent and natural-sounding text.\n   */\n  top_p?: number;\n}\n\nexport namespace CompletionCreateParams {\n  export type CompletionCreateParamsNonStreaming = CompletionsAPI.CompletionCreateParamsNonStreaming;\n  export type CompletionCreateParamsStreaming = CompletionsAPI.CompletionCreateParamsStreaming;\n}\n\nexport interface CompletionCreateParamsNonStreaming extends CompletionCreateParamsBase {\n  /**\n   * If true, stream tokens as Server-Sent Events as the model generates them instead\n   * of waiting for the full model response. The stream terminates with\n   * `data: [DONE]`. If false, return a single JSON object containing the results.\n   */\n  stream?: false;\n}\n\nexport interface CompletionCreateParamsStreaming extends CompletionCreateParamsBase {\n  /**\n   * If true, stream tokens as Server-Sent Events as the model generates them instead\n   * of waiting for the full model response. The stream terminates with\n   * `data: [DONE]`. If false, return a single JSON object containing the results.\n   */\n  stream: true;\n}\n\nexport declare namespace Completions {\n  export {\n    type Completion as Completion,\n    type CompletionChunk as CompletionChunk,\n    type LogProbs as LogProbs,\n    type ToolChoice as ToolChoice,\n    type Tools as Tools,\n    type CompletionCreateParams as CompletionCreateParams,\n    type CompletionCreateParamsNonStreaming as CompletionCreateParamsNonStreaming,\n    type CompletionCreateParamsStreaming as CompletionCreateParamsStreaming,\n  };\n}\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { APIResource } from '../../core/resource';\nimport { APIPromise } from '../../core/api-promise';\nimport { type Uploadable } from '../../core/uploads';\nimport { RequestOptions } from '../../internal/request-options';\nimport { multipartFormRequestOptions } from '../../internal/uploads';\n\nexport class Transcriptions extends APIResource {\n  /**\n   * Transcribes audio into text\n   *\n   * @example\n   * ```ts\n   * const transcription =\n   *   await client.audio.transcriptions.create({\n   *     file: fs.createReadStream('path/to/file'),\n   *   });\n   * ```\n   */\n  create(body: TranscriptionCreateParams, options?: RequestOptions): APIPromise<TranscriptionCreateResponse> {\n    return this._client.post(\n      '/audio/transcriptions',\n      multipartFormRequestOptions({ body, ...options }, this._client),\n    );\n  }\n}\n\nexport type TranscriptionCreateResponse =\n  | TranscriptionCreateResponse.AudioTranscriptionJsonResponse\n  | TranscriptionCreateResponse.AudioTranscriptionVerboseJsonResponse;\n\nexport namespace TranscriptionCreateResponse {\n  export interface AudioTranscriptionJsonResponse {\n    /**\n     * The transcribed text\n     */\n    text: string;\n  }\n\n  export interface AudioTranscriptionVerboseJsonResponse {\n    /**\n     * The duration of the audio in seconds\n     */\n    duration: number;\n\n    /**\n     * The language of the audio\n     */\n    language: string;\n\n    /**\n     * Array of transcription segments\n     */\n    segments: Array<AudioTranscriptionVerboseJsonResponse.Segment>;\n\n    /**\n     * The task performed\n     */\n    task: 'transcribe' | 'translate';\n\n    /**\n     * The transcribed text\n     */\n    text: string;\n\n    /**\n     * Array of transcription words (only when timestamp_granularities includes 'word')\n     */\n    words?: Array<AudioTranscriptionVerboseJsonResponse.Word>;\n  }\n\n  export namespace AudioTranscriptionVerboseJsonResponse {\n    export interface Segment {\n      /**\n       * Unique identifier for the segment\n       */\n      id: number;\n\n      /**\n       * End time of the segment in seconds\n       */\n      end: number;\n\n      /**\n       * Start time of the segment in seconds\n       */\n      start: number;\n\n      /**\n       * The text content of the segment\n       */\n      text: string;\n    }\n\n    export interface Word {\n      /**\n       * End time of the word in seconds\n       */\n      end: number;\n\n      /**\n       * Start time of the word in seconds\n       */\n      start: number;\n\n      /**\n       * The word\n       */\n      word: string;\n    }\n  }\n}\n\nexport interface TranscriptionCreateParams {\n  /**\n   * Audio file to transcribe\n   */\n  file: Uploadable;\n\n  /**\n   * Optional ISO 639-1 language code. If `auto` is provided, language is\n   * auto-detected.\n   */\n  language?: string;\n\n  /**\n   * Model to use for transcription\n   */\n  model?: 'openai/whisper-large-v3';\n\n  /**\n   * Optional text to bias decoding.\n   */\n  prompt?: string;\n\n  /**\n   * The format of the response\n   */\n  response_format?: 'json' | 'verbose_json';\n\n  /**\n   * Sampling temperature between 0.0 and 1.0\n   */\n  temperature?: number;\n\n  /**\n   * Controls level of timestamp detail in verbose_json. Only used when\n   * response_format is verbose_json. Can be a single granularity or an array to get\n   * multiple levels.\n   */\n  timestamp_granularities?: 'segment' | 'word' | Array<'segment' | 'word'>;\n}\n\nexport declare namespace Transcriptions {\n  export {\n    type TranscriptionCreateResponse as TranscriptionCreateResponse,\n    type TranscriptionCreateParams as TranscriptionCreateParams,\n  };\n}\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { APIResource } from '../core/resource';\nimport { APIPromise } from '../core/api-promise';\nimport { RequestOptions } from '../internal/request-options';\n\nexport class Embeddings extends APIResource {\n  /**\n   * Query an embedding model for a given string of text.\n   *\n   * @example\n   * ```ts\n   * const embedding = await client.embeddings.create({\n   *   input:\n   *     'Our solar system orbits the Milky Way galaxy at about 515,000 mph',\n   *   model: 'togethercomputer/m2-bert-80M-8k-retrieval',\n   * });\n   * ```\n   */\n  create(body: EmbeddingCreateParams, options?: RequestOptions): APIPromise<Embedding> {\n    return this._client.post('/embeddings', { body, ...options });\n  }\n}\n\nexport interface Embedding {\n  data: Array<Embedding.Data>;\n\n  model: string;\n\n  object: 'list';\n}\n\nexport namespace Embedding {\n  export interface Data {\n    embedding: Array<number>;\n\n    index: number;\n\n    object: 'embedding';\n  }\n}\n\nexport interface EmbeddingCreateParams {\n  /**\n   * A string providing the text for the model to embed.\n   */\n  input: string | Array<string>;\n\n  /**\n   * The name of the embedding model to use.\n   *\n   * [See all of Together AI's embedding models](https://docs.together.ai/docs/serverless-models#embedding-models)\n   */\n  model:\n    | 'WhereIsAI/UAE-Large-V1'\n    | 'BAAI/bge-large-en-v1.5'\n    | 'BAAI/bge-base-en-v1.5'\n    | 'togethercomputer/m2-bert-80M-8k-retrieval'\n    | (string & {});\n}\n\nexport declare namespace Embeddings {\n  export { type Embedding as Embedding, type EmbeddingCreateParams as EmbeddingCreateParams };\n}\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { VERSION } from '../version';\n\nexport const isRunningInBrowser = () => {\n  return (\n    // @ts-ignore\n    typeof window !== 'undefined' &&\n    // @ts-ignore\n    typeof window.document !== 'undefined' &&\n    // @ts-ignore\n    typeof navigator !== 'undefined'\n  );\n};\n\ntype DetectedPlatform = 'deno' | 'node' | 'edge' | 'unknown';\n\n/**\n * Note this does not detect 'browser'; for that, use getBrowserInfo().\n */\nfunction getDetectedPlatform(): DetectedPlatform {\n  if (typeof Deno !== 'undefined' && Deno.build != null) {\n    return 'deno';\n  }\n  if (typeof EdgeRuntime !== 'undefined') {\n    return 'edge';\n  }\n  if (\n    Object.prototype.toString.call(\n      typeof (globalThis as any).process !== 'undefined' ? (globalThis as any).process : 0,\n    ) === '[object process]'\n  ) {\n    return 'node';\n  }\n  return 'unknown';\n}\n\ndeclare const Deno: any;\ndeclare const EdgeRuntime: any;\ntype Arch = 'x32' | 'x64' | 'arm' | 'arm64' | `other:${string}` | 'unknown';\ntype PlatformName =\n  | 'MacOS'\n  | 'Linux'\n  | 'Windows'\n  | 'FreeBSD'\n  | 'OpenBSD'\n  | 'iOS'\n  | 'Android'\n  | `Other:${string}`\n  | 'Unknown';\ntype Browser = 'ie' | 'edge' | 'chrome' | 'firefox' | 'safari';\ntype PlatformProperties = {\n  'X-Stainless-Lang': 'js';\n  'X-Stainless-Package-Version': string;\n  'X-Stainless-OS': PlatformName;\n  'X-Stainless-Arch': Arch;\n  'X-Stainless-Runtime': 'node' | 'deno' | 'edge' | `browser:${Browser}` | 'unknown';\n  'X-Stainless-Runtime-Version': string;\n};\nconst getPlatformProperties = (): PlatformProperties => {\n  const detectedPlatform = getDetectedPlatform();\n  if (detectedPlatform === 'deno') {\n    return {\n      'X-Stainless-Lang': 'js',\n      'X-Stainless-Package-Version': VERSION,\n      'X-Stainless-OS': normalizePlatform(Deno.build.os),\n      'X-Stainless-Arch': normalizeArch(Deno.build.arch),\n      'X-Stainless-Runtime': 'deno',\n      'X-Stainless-Runtime-Version':\n        typeof Deno.version === 'string' ? Deno.version : Deno.version?.deno ?? 'unknown',\n    };\n  }\n  if (typeof EdgeRuntime !== 'undefined') {\n    return {\n      'X-Stainless-Lang': 'js',\n      'X-Stainless-Package-Version': VERSION,\n      'X-Stainless-OS': 'Unknown',\n      'X-Stainless-Arch': `other:${EdgeRuntime}`,\n      'X-Stainless-Runtime': 'edge',\n      'X-Stainless-Runtime-Version': (globalThis as any).process.version,\n    };\n  }\n  // Check if Node.js\n  if (detectedPlatform === 'node') {\n    return {\n      'X-Stainless-Lang': 'js',\n      'X-Stainless-Package-Version': VERSION,\n      'X-Stainless-OS': normalizePlatform((globalThis as any).process.platform ?? 'unknown'),\n      'X-Stainless-Arch': normalizeArch((globalThis as any).process.arch ?? 'unknown'),\n      'X-Stainless-Runtime': 'node',\n      'X-Stainless-Runtime-Version': (globalThis as any).process.version ?? 'unknown',\n    };\n  }\n\n  const browserInfo = getBrowserInfo();\n  if (browserInfo) {\n    return {\n      'X-Stainless-Lang': 'js',\n      'X-Stainless-Package-Version': VERSION,\n      'X-Stainless-OS': 'Unknown',\n      'X-Stainless-Arch': 'unknown',\n      'X-Stainless-Runtime': `browser:${browserInfo.browser}`,\n      'X-Stainless-Runtime-Version': browserInfo.version,\n    };\n  }\n\n  // TODO add support for Cloudflare workers, etc.\n  return {\n    'X-Stainless-Lang': 'js',\n    'X-Stainless-Package-Version': VERSION,\n    'X-Stainless-OS': 'Unknown',\n    'X-Stainless-Arch': 'unknown',\n    'X-Stainless-Runtime': 'unknown',\n    'X-Stainless-Runtime-Version': 'unknown',\n  };\n};\n\ntype BrowserInfo = {\n  browser: Browser;\n  version: string;\n};\n\ndeclare const navigator: { userAgent: string } | undefined;\n\n// Note: modified from https://github.com/JS-DevTools/host-environment/blob/b1ab79ecde37db5d6e163c050e54fe7d287d7c92/src/isomorphic.browser.ts\nfunction getBrowserInfo(): BrowserInfo | null {\n  if (typeof navigator === 'undefined' || !navigator) {\n    return null;\n  }\n\n  // NOTE: The order matters here!\n  const browserPatterns = [\n    { key: 'edge' as const, pattern: /Edge(?:\\W+(\\d+)\\.(\\d+)(?:\\.(\\d+))?)?/ },\n    { key: 'ie' as const, pattern: /MSIE(?:\\W+(\\d+)\\.(\\d+)(?:\\.(\\d+))?)?/ },\n    { key: 'ie' as const, pattern: /Trident(?:.*rv\\:(\\d+)\\.(\\d+)(?:\\.(\\d+))?)?/ },\n    { key: 'chrome' as const, pattern: /Chrome(?:\\W+(\\d+)\\.(\\d+)(?:\\.(\\d+))?)?/ },\n    { key: 'firefox' as const, pattern: /Firefox(?:\\W+(\\d+)\\.(\\d+)(?:\\.(\\d+))?)?/ },\n    { key: 'safari' as const, pattern: /(?:Version\\W+(\\d+)\\.(\\d+)(?:\\.(\\d+))?)?(?:\\W+Mobile\\S*)?\\W+Safari/ },\n  ];\n\n  // Find the FIRST matching browser\n  for (const { key, pattern } of browserPatterns) {\n    const match = pattern.exec(navigator.userAgent);\n    if (match) {\n      const major = match[1] || 0;\n      const minor = match[2] || 0;\n      const patch = match[3] || 0;\n\n      return { browser: key, version: `${major}.${minor}.${patch}` };\n    }\n  }\n\n  return null;\n}\n\nconst normalizeArch = (arch: string): Arch => {\n  // Node docs:\n  // - https://nodejs.org/api/process.html#processarch\n  // Deno docs:\n  // - https://doc.deno.land/deno/stable/~/Deno.build\n  if (arch === 'x32') return 'x32';\n  if (arch === 'x86_64' || arch === 'x64') return 'x64';\n  if (arch === 'arm') return 'arm';\n  if (arch === 'aarch64' || arch === 'arm64') return 'arm64';\n  if (arch) return `other:${arch}`;\n  return 'unknown';\n};\n\nconst normalizePlatform = (platform: string): PlatformName => {\n  // Node platforms:\n  // - https://nodejs.org/api/process.html#processplatform\n  // Deno platforms:\n  // - https://doc.deno.land/deno/stable/~/Deno.build\n  // - https://github.com/denoland/deno/issues/14799\n\n  platform = platform.toLowerCase();\n\n  // NOTE: this iOS check is untested and may not work\n  // Node does not work natively on IOS, there is a fork at\n  // https://github.com/nodejs-mobile/nodejs-mobile\n  // however it is unknown at the time of writing how to detect if it is running\n  if (platform.includes('ios')) return 'iOS';\n  if (platform === 'android') return 'Android';\n  if (platform === 'darwin') return 'MacOS';\n  if (platform === 'win32') return 'Windows';\n  if (platform === 'freebsd') return 'FreeBSD';\n  if (platform === 'openbsd') return 'OpenBSD';\n  if (platform === 'linux') return 'Linux';\n  if (platform) return `Other:${platform}`;\n  return 'Unknown';\n};\n\nlet _platformHeaders: PlatformProperties;\nexport const getPlatformHeaders = () => {\n  return (_platformHeaders ??= getPlatformProperties());\n};\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { APIResource } from '../core/resource';\nimport { APIPromise } from '../core/api-promise';\nimport { buildHeaders } from '../internal/headers';\nimport { RequestOptions } from '../internal/request-options';\nimport { path } from '../internal/utils/path';\n\nexport class Endpoints extends APIResource {\n  /**\n   * Creates a new dedicated endpoint for serving models. The endpoint will\n   * automatically start after creation. You can deploy any supported model on\n   * hardware configurations that meet the model's requirements.\n   *\n   * @example\n   * ```ts\n   * const endpoint = await client.endpoints.create({\n   *   autoscaling: { max_replicas: 5, min_replicas: 2 },\n   *   hardware: '1x_nvidia_a100_80gb_sxm',\n   *   model: 'meta-llama/Llama-3-8b-chat-hf',\n   * });\n   * ```\n   */\n  create(body: EndpointCreateParams, options?: RequestOptions): APIPromise<EndpointCreateResponse> {\n    return this._client.post('/endpoints', { body, ...options });\n  }\n\n  /**\n   * Retrieves details about a specific endpoint, including its current state,\n   * configuration, and scaling settings.\n   *\n   * @example\n   * ```ts\n   * const endpoint = await client.endpoints.retrieve(\n   *   'endpoint-d23901de-ef8f-44bf-b3e7-de9c1ca8f2d7',\n   * );\n   * ```\n   */\n  retrieve(endpointID: string, options?: RequestOptions): APIPromise<EndpointRetrieveResponse> {\n    return this._client.get(path`/endpoints/${endpointID}`, options);\n  }\n\n  /**\n   * Updates an existing endpoint's configuration. You can modify the display name,\n   * autoscaling settings, or change the endpoint's state (start/stop).\n   *\n   * @example\n   * ```ts\n   * const endpoint = await client.endpoints.update(\n   *   'endpoint-d23901de-ef8f-44bf-b3e7-de9c1ca8f2d7',\n   * );\n   * ```\n   */\n  update(\n    endpointID: string,\n    body: EndpointUpdateParams,\n    options?: RequestOptions,\n  ): APIPromise<EndpointUpdateResponse> {\n    return this._client.patch(path`/endpoints/${endpointID}`, { body, ...options });\n  }\n\n  /**\n   * Returns a list of all endpoints associated with your account. You can filter the\n   * results by type (dedicated or serverless).\n   *\n   * @example\n   * ```ts\n   * const endpoints = await client.endpoints.list();\n   * ```\n   */\n  list(\n    query: EndpointListParams | null | undefined = {},\n    options?: RequestOptions,\n  ): APIPromise<EndpointListResponse> {\n    return this._client.get('/endpoints', { query, ...options });\n  }\n\n  /**\n   * Permanently deletes an endpoint. This action cannot be undone.\n   *\n   * @example\n   * ```ts\n   * await client.endpoints.delete(\n   *   'endpoint-d23901de-ef8f-44bf-b3e7-de9c1ca8f2d7',\n   * );\n   * ```\n   */\n  delete(endpointID: string, options?: RequestOptions): APIPromise<void> {\n    return this._client.delete(path`/endpoints/${endpointID}`, {\n      ...options,\n      headers: buildHeaders([{ Accept: '*/*' }, options?.headers]),\n    });\n  }\n}\n\n/**\n * Configuration for automatic scaling of replicas based on demand.\n */\nexport interface Autoscaling {\n  /**\n   * The maximum number of replicas to scale up to under load\n   */\n  max_replicas: number;\n\n  /**\n   * The minimum number of replicas to maintain, even when there is no load\n   */\n  min_replicas: number;\n}\n\n/**\n * Details about a dedicated endpoint deployment\n */\nexport interface EndpointCreateResponse {\n  /**\n   * Unique identifier for the endpoint\n   */\n  id: string;\n\n  /**\n   * Configuration for automatic scaling of the endpoint\n   */\n  autoscaling: Autoscaling;\n\n  /**\n   * Timestamp when the endpoint was created\n   */\n  created_at: string;\n\n  /**\n   * Human-readable name for the endpoint\n   */\n  display_name: string;\n\n  /**\n   * The hardware configuration used for this endpoint\n   */\n  hardware: string;\n\n  /**\n   * The model deployed on this endpoint\n   */\n  model: string;\n\n  /**\n   * System name for the endpoint\n   */\n  name: string;\n\n  /**\n   * The type of object\n   */\n  object: 'endpoint';\n\n  /**\n   * The owner of this endpoint\n   */\n  owner: string;\n\n  /**\n   * Current state of the endpoint\n   */\n  state: 'PENDING' | 'STARTING' | 'STARTED' | 'STOPPING' | 'STOPPED' | 'ERROR';\n\n  /**\n   * The type of endpoint\n   */\n  type: 'dedicated';\n}\n\n/**\n * Details about a dedicated endpoint deployment\n */\nexport interface EndpointRetrieveResponse {\n  /**\n   * Unique identifier for the endpoint\n   */\n  id: string;\n\n  /**\n   * Configuration for automatic scaling of the endpoint\n   */\n  autoscaling: Autoscaling;\n\n  /**\n   * Timestamp when the endpoint was created\n   */\n  created_at: string;\n\n  /**\n   * Human-readable name for the endpoint\n   */\n  display_name: string;\n\n  /**\n   * The hardware configuration used for this endpoint\n   */\n  hardware: string;\n\n  /**\n   * The model deployed on this endpoint\n   */\n  model: string;\n\n  /**\n   * System name for the endpoint\n   */\n  name: string;\n\n  /**\n   * The type of object\n   */\n  object: 'endpoint';\n\n  /**\n   * The owner of this endpoint\n   */\n  owner: string;\n\n  /**\n   * Current state of the endpoint\n   */\n  state: 'PENDING' | 'STARTING' | 'STARTED' | 'STOPPING' | 'STOPPED' | 'ERROR';\n\n  /**\n   * The type of endpoint\n   */\n  type: 'dedicated';\n}\n\n/**\n * Details about a dedicated endpoint deployment\n */\nexport interface EndpointUpdateResponse {\n  /**\n   * Unique identifier for the endpoint\n   */\n  id: string;\n\n  /**\n   * Configuration for automatic scaling of the endpoint\n   */\n  autoscaling: Autoscaling;\n\n  /**\n   * Timestamp when the endpoint was created\n   */\n  created_at: string;\n\n  /**\n   * Human-readable name for the endpoint\n   */\n  display_name: string;\n\n  /**\n   * The hardware configuration used for this endpoint\n   */\n  hardware: string;\n\n  /**\n   * The model deployed on this endpoint\n   */\n  model: string;\n\n  /**\n   * System name for the endpoint\n   */\n  name: string;\n\n  /**\n   * The type of object\n   */\n  object: 'endpoint';\n\n  /**\n   * The owner of this endpoint\n   */\n  owner: string;\n\n  /**\n   * Current state of the endpoint\n   */\n  state: 'PENDING' | 'STARTING' | 'STARTED' | 'STOPPING' | 'STOPPED' | 'ERROR';\n\n  /**\n   * The type of endpoint\n   */\n  type: 'dedicated';\n}\n\nexport interface EndpointListResponse {\n  data: Array<EndpointListResponse.Data>;\n\n  object: 'list';\n}\n\nexport namespace EndpointListResponse {\n  /**\n   * Details about an endpoint when listed via the list endpoint\n   */\n  export interface Data {\n    /**\n     * Unique identifier for the endpoint\n     */\n    id: string;\n\n    /**\n     * Timestamp when the endpoint was created\n     */\n    created_at: string;\n\n    /**\n     * The model deployed on this endpoint\n     */\n    model: string;\n\n    /**\n     * System name for the endpoint\n     */\n    name: string;\n\n    /**\n     * The type of object\n     */\n    object: 'endpoint';\n\n    /**\n     * The owner of this endpoint\n     */\n    owner: string;\n\n    /**\n     * Current state of the endpoint\n     */\n    state: 'PENDING' | 'STARTING' | 'STARTED' | 'STOPPING' | 'STOPPED' | 'ERROR';\n\n    /**\n     * The type of endpoint\n     */\n    type: 'serverless' | 'dedicated';\n  }\n}\n\nexport interface EndpointCreateParams {\n  /**\n   * Configuration for automatic scaling of the endpoint\n   */\n  autoscaling: Autoscaling;\n\n  /**\n   * The hardware configuration to use for this endpoint\n   */\n  hardware: string;\n\n  /**\n   * The model to deploy on this endpoint\n   */\n  model: string;\n\n  /**\n   * Whether to disable the prompt cache for this endpoint\n   */\n  disable_prompt_cache?: boolean;\n\n  /**\n   * Whether to disable speculative decoding for this endpoint\n   */\n  disable_speculative_decoding?: boolean;\n\n  /**\n   * A human-readable name for the endpoint\n   */\n  display_name?: string;\n\n  /**\n   * The number of minutes of inactivity after which the endpoint will be\n   * automatically stopped. Set to null, omit or set to 0 to disable automatic\n   * timeout.\n   */\n  inactive_timeout?: number | null;\n\n  /**\n   * The desired state of the endpoint\n   */\n  state?: 'STARTED' | 'STOPPED';\n}\n\nexport interface EndpointUpdateParams {\n  /**\n   * New autoscaling configuration for the endpoint\n   */\n  autoscaling?: Autoscaling;\n\n  /**\n   * A human-readable name for the endpoint\n   */\n  display_name?: string;\n\n  /**\n   * The number of minutes of inactivity after which the endpoint will be\n   * automatically stopped. Set to 0 to disable automatic timeout.\n   */\n  inactive_timeout?: number | null;\n\n  /**\n   * The desired state of the endpoint\n   */\n  state?: 'STARTED' | 'STOPPED';\n}\n\nexport interface EndpointListParams {\n  /**\n   * Filter endpoints by type\n   */\n  type?: 'dedicated' | 'serverless';\n}\n\nexport declare namespace Endpoints {\n  export {\n    type Autoscaling as Autoscaling,\n    type EndpointCreateResponse as EndpointCreateResponse,\n    type EndpointRetrieveResponse as EndpointRetrieveResponse,\n    type EndpointUpdateResponse as EndpointUpdateResponse,\n    type EndpointListResponse as EndpointListResponse,\n    type EndpointCreateParams as EndpointCreateParams,\n    type EndpointUpdateParams as EndpointUpdateParams,\n    type EndpointListParams as EndpointListParams,\n  };\n}\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { APIResource } from '../../core/resource';\nimport { APIPromise } from '../../core/api-promise';\nimport { type Uploadable } from '../../core/uploads';\nimport { RequestOptions } from '../../internal/request-options';\nimport { multipartFormRequestOptions } from '../../internal/uploads';\n\nexport class Translations extends APIResource {\n  /**\n   * Translates audio into English\n   *\n   * @example\n   * ```ts\n   * const translation = await client.audio.translations.create({\n   *   file: fs.createReadStream('path/to/file'),\n   * });\n   * ```\n   */\n  create(body: TranslationCreateParams, options?: RequestOptions): APIPromise<TranslationCreateResponse> {\n    return this._client.post(\n      '/audio/translations',\n      multipartFormRequestOptions({ body, ...options }, this._client),\n    );\n  }\n}\n\nexport type TranslationCreateResponse =\n  | TranslationCreateResponse.AudioTranslationJsonResponse\n  | TranslationCreateResponse.AudioTranslationVerboseJsonResponse;\n\nexport namespace TranslationCreateResponse {\n  export interface AudioTranslationJsonResponse {\n    /**\n     * The translated text\n     */\n    text: string;\n  }\n\n  export interface AudioTranslationVerboseJsonResponse {\n    /**\n     * The duration of the audio in seconds\n     */\n    duration: number;\n\n    /**\n     * The target language of the translation\n     */\n    language: string;\n\n    /**\n     * Array of translation segments\n     */\n    segments: Array<AudioTranslationVerboseJsonResponse.Segment>;\n\n    /**\n     * The task performed\n     */\n    task: 'transcribe' | 'translate';\n\n    /**\n     * The translated text\n     */\n    text: string;\n\n    /**\n     * Array of translation words (only when timestamp_granularities includes 'word')\n     */\n    words?: Array<AudioTranslationVerboseJsonResponse.Word>;\n  }\n\n  export namespace AudioTranslationVerboseJsonResponse {\n    export interface Segment {\n      /**\n       * Unique identifier for the segment\n       */\n      id: number;\n\n      /**\n       * End time of the segment in seconds\n       */\n      end: number;\n\n      /**\n       * Start time of the segment in seconds\n       */\n      start: number;\n\n      /**\n       * The text content of the segment\n       */\n      text: string;\n    }\n\n    export interface Word {\n      /**\n       * End time of the word in seconds\n       */\n      end: number;\n\n      /**\n       * Start time of the word in seconds\n       */\n      start: number;\n\n      /**\n       * The word\n       */\n      word: string;\n    }\n  }\n}\n\nexport interface TranslationCreateParams {\n  /**\n   * Audio file to translate\n   */\n  file: Uploadable;\n\n  /**\n   * Target output language. Optional ISO 639-1 language code. If omitted, language\n   * is set to English.\n   */\n  language?: string;\n\n  /**\n   * Model to use for translation\n   */\n  model?: 'openai/whisper-large-v3';\n\n  /**\n   * Optional text to bias decoding.\n   */\n  prompt?: string;\n\n  /**\n   * The format of the response\n   */\n  response_format?: 'json' | 'verbose_json';\n\n  /**\n   * Sampling temperature between 0.0 and 1.0\n   */\n  temperature?: number;\n\n  /**\n   * Controls level of timestamp detail in verbose_json. Only used when\n   * response_format is verbose_json. Can be a single granularity or an array to get\n   * multiple levels.\n   */\n  timestamp_granularities?: 'segment' | 'word' | Array<'segment' | 'word'>;\n}\n\nexport declare namespace Translations {\n  export {\n    type TranslationCreateResponse as TranslationCreateResponse,\n    type TranslationCreateParams as TranslationCreateParams,\n  };\n}\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { APIResource } from '../core/resource';\nimport * as FilesAPI from './files';\nimport { APIPromise } from '../core/api-promise';\nimport { type Uploadable } from '../core/uploads';\nimport { buildHeaders } from '../internal/headers';\nimport { RequestOptions } from '../internal/request-options';\nimport { path } from '../internal/utils/path';\n\nexport class Files extends APIResource {\n  /**\n   * List the metadata for a single uploaded data file.\n   *\n   * @example\n   * ```ts\n   * const file = await client.files.retrieve('id');\n   * ```\n   */\n  retrieve(id: string, options?: RequestOptions): APIPromise<FileRetrieveResponse> {\n    return this._client.get(path`/files/${id}`, options);\n  }\n\n  /**\n   * List the metadata for all uploaded data files.\n   *\n   * @example\n   * ```ts\n   * const files = await client.files.list();\n   * ```\n   */\n  list(options?: RequestOptions): APIPromise<FileListResponse> {\n    return this._client.get('/files', options);\n  }\n\n  /**\n   * Delete a previously uploaded data file.\n   *\n   * @example\n   * ```ts\n   * const file = await client.files.delete('id');\n   * ```\n   */\n  delete(id: string, options?: RequestOptions): APIPromise<FileDeleteResponse> {\n    return this._client.delete(path`/files/${id}`, options);\n  }\n\n  /**\n   * Get the contents of a single uploaded data file.\n   *\n   * @example\n   * ```ts\n   * const response = await client.files.content('id');\n   *\n   * const content = await response.blob();\n   * console.log(content);\n   * ```\n   */\n  content(id: string, options?: RequestOptions): APIPromise<Response> {\n    return this._client.get(path`/files/${id}/content`, {\n      ...options,\n      headers: buildHeaders([{ Accept: 'application/binary' }, options?.headers]),\n      __binaryResponse: true,\n    });\n  }\n\n  /**\n   * Upload a file.\n   */\n  upload(_: string): Promise<void> {\n    throw 'please use together-ai/lib/upload';\n  }\n}\n\nexport interface FileObject {\n  id?: string;\n\n  filename?: string;\n\n  object?: string;\n\n  size?: number;\n}\n\n/**\n * The purpose of the file\n */\nexport type FilePurpose =\n  | 'fine-tune'\n  | 'eval'\n  | 'eval-sample'\n  | 'eval-output'\n  | 'eval-summary'\n  | 'batch-generated'\n  | 'batch-api';\n\n/**\n * The type of the file\n */\nexport type FileType = 'csv' | 'jsonl' | 'parquet';\n\nexport interface FileRetrieveResponse {\n  id: string;\n\n  bytes: number;\n\n  created_at: number;\n\n  filename: string;\n\n  /**\n   * The type of the file\n   */\n  FileType: FileType;\n\n  LineCount: number;\n\n  object: string;\n\n  Processed: boolean;\n\n  /**\n   * The purpose of the file\n   */\n  purpose: FilePurpose;\n}\n\nexport interface FileListResponse {\n  data: Array<FileListResponse.Data>;\n}\n\nexport namespace FileListResponse {\n  export interface Data {\n    id: string;\n\n    bytes: number;\n\n    created_at: number;\n\n    filename: string;\n\n    /**\n     * The type of the file\n     */\n    FileType: FilesAPI.FileType;\n\n    LineCount: number;\n\n    object: string;\n\n    Processed: boolean;\n\n    /**\n     * The purpose of the file\n     */\n    purpose: FilesAPI.FilePurpose;\n  }\n}\n\nexport interface FileDeleteResponse {\n  id?: string;\n\n  deleted?: boolean;\n}\n\nexport interface FileUploadResponse {\n  id: string;\n\n  bytes: number;\n\n  created_at: number;\n\n  filename: string;\n\n  /**\n   * The type of the file\n   */\n  FileType: FileType;\n\n  LineCount: number;\n\n  object: string;\n\n  Processed: boolean;\n\n  /**\n   * The purpose of the file\n   */\n  purpose: FilePurpose;\n}\n\nexport interface FileUploadParams {\n  /**\n   * The content of the file being uploaded\n   */\n  file: Uploadable;\n\n  /**\n   * The name of the file being uploaded\n   */\n  file_name: string;\n\n  /**\n   * The purpose of the file\n   */\n  purpose: FilePurpose;\n\n  /**\n   * The type of the file\n   */\n  file_type?: FileType;\n}\n\nexport declare namespace Files {\n  export {\n    type FileObject as FileObject,\n    type FilePurpose as FilePurpose,\n    type FileType as FileType,\n    type FileRetrieveResponse as FileRetrieveResponse,\n    type FileListResponse as FileListResponse,\n    type FileDeleteResponse as FileDeleteResponse,\n    type FileUploadResponse as FileUploadResponse,\n    type FileUploadParams as FileUploadParams,\n  };\n}\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { APIResource } from '../core/resource';\nimport * as FineTuneAPI from './fine-tune';\nimport { APIPromise } from '../core/api-promise';\nimport { RequestOptions } from '../internal/request-options';\nimport { path } from '../internal/utils/path';\n\nexport class FineTuneResource extends APIResource {\n  /**\n   * Create a fine-tuning job with the provided model and training data.\n   *\n   * @example\n   * ```ts\n   * const fineTune = await client.fineTune.create({\n   *   model: 'model',\n   *   training_file: 'training_file',\n   * });\n   * ```\n   */\n  create(body: FineTuneCreateParams, options?: RequestOptions): APIPromise<FineTuneCreateResponse> {\n    return this._client.post('/fine-tunes', { body, ...options });\n  }\n\n  /**\n   * List the metadata for a single fine-tuning job.\n   *\n   * @example\n   * ```ts\n   * const fineTune = await client.fineTune.retrieve('id');\n   * ```\n   */\n  retrieve(id: string, options?: RequestOptions): APIPromise<FineTune> {\n    return this._client.get(path`/fine-tunes/${id}`, options);\n  }\n\n  /**\n   * List the metadata for all fine-tuning jobs. Returns a list of\n   * FinetuneResponseTruncated objects.\n   *\n   * @example\n   * ```ts\n   * const fineTunes = await client.fineTune.list();\n   * ```\n   */\n  list(options?: RequestOptions): APIPromise<FineTuneListResponse> {\n    return this._client.get('/fine-tunes', options);\n  }\n\n  /**\n   * Cancel a currently running fine-tuning job. Returns a FinetuneResponseTruncated\n   * object.\n   *\n   * @example\n   * ```ts\n   * const response = await client.fineTune.cancel('id');\n   * ```\n   */\n  cancel(id: string, options?: RequestOptions): APIPromise<FineTuneCancelResponse> {\n    return this._client.post(path`/fine-tunes/${id}/cancel`, options);\n  }\n\n  /**\n   * Download a compressed fine-tuned model or checkpoint to local disk.\n   *\n   * @example\n   * ```ts\n   * const response = await client.fineTune.download({\n   *   ft_id: 'ft_id',\n   * });\n   * ```\n   */\n  download(query: FineTuneDownloadParams, options?: RequestOptions): APIPromise<FineTuneDownloadResponse> {\n    return this._client.get('/finetune/download', { query, ...options });\n  }\n\n  /**\n   * List the events for a single fine-tuning job.\n   *\n   * @example\n   * ```ts\n   * const response = await client.fineTune.listEvents('id');\n   * ```\n   */\n  listEvents(id: string, options?: RequestOptions): APIPromise<FineTuneListEventsResponse> {\n    return this._client.get(path`/fine-tunes/${id}/events`, options);\n  }\n\n  /**\n   * List the checkpoints for a single fine-tuning job.\n   *\n   * @example\n   * ```ts\n   * const response = await client.fineTune.retrieveCheckpoints(\n   *   'id',\n   * );\n   * ```\n   */\n  retrieveCheckpoints(id: string, options?: RequestOptions): APIPromise<FineTuneRetrieveCheckpointsResponse> {\n    return this._client.get(path`/fine-tunes/${id}/checkpoints`, options);\n  }\n}\n\nexport interface CosineLrSchedulerArgs {\n  /**\n   * The ratio of the final learning rate to the peak learning rate\n   */\n  min_lr_ratio: number;\n\n  /**\n   * Number or fraction of cycles for the cosine learning rate scheduler\n   */\n  num_cycles: number;\n}\n\nexport interface FineTune {\n  id: string;\n\n  status:\n    | 'pending'\n    | 'queued'\n    | 'running'\n    | 'compressing'\n    | 'uploading'\n    | 'cancel_requested'\n    | 'cancelled'\n    | 'error'\n    | 'completed';\n\n  batch_size?: number | 'max';\n\n  created_at?: string;\n\n  epochs_completed?: number;\n\n  eval_steps?: number;\n\n  events?: Array<FineTuneEvent>;\n\n  from_checkpoint?: string;\n\n  from_hf_model?: string;\n\n  hf_model_revision?: string;\n\n  job_id?: string;\n\n  learning_rate?: number;\n\n  lr_scheduler?: LrScheduler;\n\n  max_grad_norm?: number;\n\n  model?: string;\n\n  model_output_name?: string;\n\n  model_output_path?: string;\n\n  n_checkpoints?: number;\n\n  n_epochs?: number;\n\n  n_evals?: number;\n\n  param_count?: number;\n\n  queue_depth?: number;\n\n  token_count?: number;\n\n  total_price?: number;\n\n  train_on_inputs?: boolean | 'auto';\n\n  training_file?: string;\n\n  training_method?: TrainingMethodSft | TrainingMethodDpo;\n\n  training_type?: FullTrainingType | LoRaTrainingType;\n\n  trainingfile_numlines?: number;\n\n  trainingfile_size?: number;\n\n  updated_at?: string;\n\n  validation_file?: string;\n\n  wandb_project_name?: string;\n\n  wandb_url?: string;\n\n  warmup_ratio?: number;\n\n  weight_decay?: number;\n}\n\nexport interface FineTuneEvent {\n  checkpoint_path: string;\n\n  created_at: string;\n\n  hash: string;\n\n  message: string;\n\n  model_path: string;\n\n  object: 'fine-tune-event';\n\n  param_count: number;\n\n  step: number;\n\n  token_count: number;\n\n  total_steps: number;\n\n  training_offset: number;\n\n  type:\n    | 'job_pending'\n    | 'job_start'\n    | 'job_stopped'\n    | 'model_downloading'\n    | 'model_download_complete'\n    | 'training_data_downloading'\n    | 'training_data_download_complete'\n    | 'validation_data_downloading'\n    | 'validation_data_download_complete'\n    | 'wandb_init'\n    | 'training_start'\n    | 'checkpoint_save'\n    | 'billing_limit'\n    | 'epoch_complete'\n    | 'training_complete'\n    | 'model_compressing'\n    | 'model_compression_complete'\n    | 'model_uploading'\n    | 'model_upload_complete'\n    | 'job_complete'\n    | 'job_error'\n    | 'cancel_requested'\n    | 'job_restarted'\n    | 'refund'\n    | 'warning';\n\n  wandb_url: string;\n\n  level?: 'info' | 'warning' | 'error' | 'legacy_info' | 'legacy_iwarning' | 'legacy_ierror' | null;\n}\n\nexport interface FullTrainingType {\n  type: 'Full';\n}\n\nexport interface LinearLrSchedulerArgs {\n  /**\n   * The ratio of the final learning rate to the peak learning rate\n   */\n  min_lr_ratio?: number;\n}\n\nexport interface LoRaTrainingType {\n  lora_alpha: number;\n\n  lora_r: number;\n\n  type: 'Lora';\n\n  lora_dropout?: number;\n\n  lora_trainable_modules?: string;\n}\n\nexport interface LrScheduler {\n  lr_scheduler_type: 'linear' | 'cosine';\n\n  lr_scheduler_args?: LinearLrSchedulerArgs | CosineLrSchedulerArgs;\n}\n\nexport interface TrainingMethodDpo {\n  method: 'dpo';\n\n  dpo_beta?: number;\n\n  dpo_normalize_logratios_by_length?: boolean;\n\n  dpo_reference_free?: boolean;\n\n  rpo_alpha?: number;\n\n  simpo_gamma?: number;\n}\n\nexport interface TrainingMethodSft {\n  method: 'sft';\n\n  /**\n   * Whether to mask the user messages in conversational data or prompts in\n   * instruction data.\n   */\n  train_on_inputs: boolean | 'auto';\n}\n\n/**\n * A truncated version of the fine-tune response, used for POST /fine-tunes, GET\n * /fine-tunes and POST /fine-tunes/{id}/cancel endpoints\n */\nexport interface FineTuneCreateResponse {\n  /**\n   * Unique identifier for the fine-tune job\n   */\n  id: string;\n\n  /**\n   * Creation timestamp of the fine-tune job\n   */\n  created_at: string;\n\n  status:\n    | 'pending'\n    | 'queued'\n    | 'running'\n    | 'compressing'\n    | 'uploading'\n    | 'cancel_requested'\n    | 'cancelled'\n    | 'error'\n    | 'completed';\n\n  /**\n   * Last update timestamp of the fine-tune job\n   */\n  updated_at: string;\n\n  /**\n   * Batch size used for training\n   */\n  batch_size?: number;\n\n  /**\n   * Events related to this fine-tune job\n   */\n  events?: Array<FineTuneEvent>;\n\n  /**\n   * Checkpoint used to continue training\n   */\n  from_checkpoint?: string;\n\n  /**\n   * Hugging Face Hub repo to start training from\n   */\n  from_hf_model?: string;\n\n  /**\n   * The revision of the Hugging Face Hub model to continue training from\n   */\n  hf_model_revision?: string;\n\n  /**\n   * Learning rate used for training\n   */\n  learning_rate?: number;\n\n  /**\n   * Learning rate scheduler configuration\n   */\n  lr_scheduler?: LrScheduler;\n\n  /**\n   * Maximum gradient norm for clipping\n   */\n  max_grad_norm?: number;\n\n  /**\n   * Base model used for fine-tuning\n   */\n  model?: string;\n\n  model_output_name?: string;\n\n  /**\n   * Number of checkpoints saved during training\n   */\n  n_checkpoints?: number;\n\n  /**\n   * Number of training epochs\n   */\n  n_epochs?: number;\n\n  /**\n   * Number of evaluations during training\n   */\n  n_evals?: number;\n\n  /**\n   * Owner address information\n   */\n  owner_address?: string;\n\n  /**\n   * Suffix added to the fine-tuned model name\n   */\n  suffix?: string;\n\n  /**\n   * Count of tokens processed\n   */\n  token_count?: number;\n\n  /**\n   * Total price for the fine-tuning job\n   */\n  total_price?: number;\n\n  /**\n   * File-ID of the training file\n   */\n  training_file?: string;\n\n  /**\n   * Method of training used\n   */\n  training_method?: TrainingMethodSft | TrainingMethodDpo;\n\n  /**\n   * Type of training used (full or LoRA)\n   */\n  training_type?: FullTrainingType | LoRaTrainingType;\n\n  /**\n   * Identifier for the user who created the job\n   */\n  user_id?: string;\n\n  /**\n   * File-ID of the validation file\n   */\n  validation_file?: string;\n\n  /**\n   * Weights & Biases run name\n   */\n  wandb_name?: string;\n\n  /**\n   * Weights & Biases project name\n   */\n  wandb_project_name?: string;\n\n  /**\n   * Ratio of warmup steps\n   */\n  warmup_ratio?: number;\n\n  /**\n   * Weight decay value used\n   */\n  weight_decay?: number;\n}\n\nexport interface FineTuneListResponse {\n  data: Array<FineTuneListResponse.Data>;\n}\n\nexport namespace FineTuneListResponse {\n  /**\n   * A truncated version of the fine-tune response, used for POST /fine-tunes, GET\n   * /fine-tunes and POST /fine-tunes/{id}/cancel endpoints\n   */\n  export interface Data {\n    /**\n     * Unique identifier for the fine-tune job\n     */\n    id: string;\n\n    /**\n     * Creation timestamp of the fine-tune job\n     */\n    created_at: string;\n\n    status:\n      | 'pending'\n      | 'queued'\n      | 'running'\n      | 'compressing'\n      | 'uploading'\n      | 'cancel_requested'\n      | 'cancelled'\n      | 'error'\n      | 'completed';\n\n    /**\n     * Last update timestamp of the fine-tune job\n     */\n    updated_at: string;\n\n    /**\n     * Batch size used for training\n     */\n    batch_size?: number;\n\n    /**\n     * Events related to this fine-tune job\n     */\n    events?: Array<FineTuneAPI.FineTuneEvent>;\n\n    /**\n     * Checkpoint used to continue training\n     */\n    from_checkpoint?: string;\n\n    /**\n     * Hugging Face Hub repo to start training from\n     */\n    from_hf_model?: string;\n\n    /**\n     * The revision of the Hugging Face Hub model to continue training from\n     */\n    hf_model_revision?: string;\n\n    /**\n     * Learning rate used for training\n     */\n    learning_rate?: number;\n\n    /**\n     * Learning rate scheduler configuration\n     */\n    lr_scheduler?: FineTuneAPI.LrScheduler;\n\n    /**\n     * Maximum gradient norm for clipping\n     */\n    max_grad_norm?: number;\n\n    /**\n     * Base model used for fine-tuning\n     */\n    model?: string;\n\n    model_output_name?: string;\n\n    /**\n     * Number of checkpoints saved during training\n     */\n    n_checkpoints?: number;\n\n    /**\n     * Number of training epochs\n     */\n    n_epochs?: number;\n\n    /**\n     * Number of evaluations during training\n     */\n    n_evals?: number;\n\n    /**\n     * Owner address information\n     */\n    owner_address?: string;\n\n    /**\n     * Suffix added to the fine-tuned model name\n     */\n    suffix?: string;\n\n    /**\n     * Count of tokens processed\n     */\n    token_count?: number;\n\n    /**\n     * Total price for the fine-tuning job\n     */\n    total_price?: number;\n\n    /**\n     * File-ID of the training file\n     */\n    training_file?: string;\n\n    /**\n     * Method of training used\n     */\n    training_method?: FineTuneAPI.TrainingMethodSft | FineTuneAPI.TrainingMethodDpo;\n\n    /**\n     * Type of training used (full or LoRA)\n     */\n    training_type?: FineTuneAPI.FullTrainingType | FineTuneAPI.LoRaTrainingType;\n\n    /**\n     * Identifier for the user who created the job\n     */\n    user_id?: string;\n\n    /**\n     * File-ID of the validation file\n     */\n    validation_file?: string;\n\n    /**\n     * Weights & Biases run name\n     */\n    wandb_name?: string;\n\n    /**\n     * Weights & Biases project name\n     */\n    wandb_project_name?: string;\n\n    /**\n     * Ratio of warmup steps\n     */\n    warmup_ratio?: number;\n\n    /**\n     * Weight decay value used\n     */\n    weight_decay?: number;\n  }\n}\n\n/**\n * A truncated version of the fine-tune response, used for POST /fine-tunes, GET\n * /fine-tunes and POST /fine-tunes/{id}/cancel endpoints\n */\nexport interface FineTuneCancelResponse {\n  /**\n   * Unique identifier for the fine-tune job\n   */\n  id: string;\n\n  /**\n   * Creation timestamp of the fine-tune job\n   */\n  created_at: string;\n\n  status:\n    | 'pending'\n    | 'queued'\n    | 'running'\n    | 'compressing'\n    | 'uploading'\n    | 'cancel_requested'\n    | 'cancelled'\n    | 'error'\n    | 'completed';\n\n  /**\n   * Last update timestamp of the fine-tune job\n   */\n  updated_at: string;\n\n  /**\n   * Batch size used for training\n   */\n  batch_size?: number;\n\n  /**\n   * Events related to this fine-tune job\n   */\n  events?: Array<FineTuneEvent>;\n\n  /**\n   * Checkpoint used to continue training\n   */\n  from_checkpoint?: string;\n\n  /**\n   * Hugging Face Hub repo to start training from\n   */\n  from_hf_model?: string;\n\n  /**\n   * The revision of the Hugging Face Hub model to continue training from\n   */\n  hf_model_revision?: string;\n\n  /**\n   * Learning rate used for training\n   */\n  learning_rate?: number;\n\n  /**\n   * Learning rate scheduler configuration\n   */\n  lr_scheduler?: LrScheduler;\n\n  /**\n   * Maximum gradient norm for clipping\n   */\n  max_grad_norm?: number;\n\n  /**\n   * Base model used for fine-tuning\n   */\n  model?: string;\n\n  model_output_name?: string;\n\n  /**\n   * Number of checkpoints saved during training\n   */\n  n_checkpoints?: number;\n\n  /**\n   * Number of training epochs\n   */\n  n_epochs?: number;\n\n  /**\n   * Number of evaluations during training\n   */\n  n_evals?: number;\n\n  /**\n   * Owner address information\n   */\n  owner_address?: string;\n\n  /**\n   * Suffix added to the fine-tuned model name\n   */\n  suffix?: string;\n\n  /**\n   * Count of tokens processed\n   */\n  token_count?: number;\n\n  /**\n   * Total price for the fine-tuning job\n   */\n  total_price?: number;\n\n  /**\n   * File-ID of the training file\n   */\n  training_file?: string;\n\n  /**\n   * Method of training used\n   */\n  training_method?: TrainingMethodSft | TrainingMethodDpo;\n\n  /**\n   * Type of training used (full or LoRA)\n   */\n  training_type?: FullTrainingType | LoRaTrainingType;\n\n  /**\n   * Identifier for the user who created the job\n   */\n  user_id?: string;\n\n  /**\n   * File-ID of the validation file\n   */\n  validation_file?: string;\n\n  /**\n   * Weights & Biases run name\n   */\n  wandb_name?: string;\n\n  /**\n   * Weights & Biases project name\n   */\n  wandb_project_name?: string;\n\n  /**\n   * Ratio of warmup steps\n   */\n  warmup_ratio?: number;\n\n  /**\n   * Weight decay value used\n   */\n  weight_decay?: number;\n}\n\nexport interface FineTuneDownloadResponse {\n  id?: string;\n\n  checkpoint_step?: number;\n\n  filename?: string;\n\n  object?: 'local' | null;\n\n  size?: number;\n}\n\nexport interface FineTuneListEventsResponse {\n  data: Array<FineTuneEvent>;\n}\n\nexport interface FineTuneRetrieveCheckpointsResponse {\n  data: Array<FineTuneRetrieveCheckpointsResponse.Data>;\n}\n\nexport namespace FineTuneRetrieveCheckpointsResponse {\n  export interface Data {\n    checkpoint_type: string;\n\n    created_at: string;\n\n    path: string;\n\n    step: number;\n  }\n}\n\nexport interface FineTuneCreateParams {\n  /**\n   * Name of the base model to run fine-tune job on\n   */\n  model: string;\n\n  /**\n   * File-ID of a training file uploaded to the Together API\n   */\n  training_file: string;\n\n  /**\n   * Number of training examples processed together (larger batches use more memory\n   * but may train faster). Defaults to \"max\". We use training optimizations like\n   * packing, so the effective batch size may be different than the value you set.\n   */\n  batch_size?: number | 'max';\n\n  /**\n   * The checkpoint identifier to continue training from a previous fine-tuning job.\n   * Format is `{$JOB_ID}` or `{$OUTPUT_MODEL_NAME}` or `{$JOB_ID}:{$STEP}` or\n   * `{$OUTPUT_MODEL_NAME}:{$STEP}`. The step value is optional; without it, the\n   * final checkpoint will be used.\n   */\n  from_checkpoint?: string;\n\n  /**\n   * The Hugging Face Hub repo to start training from. Should be as close as possible\n   * to the base model (specified by the `model` argument) in terms of architecture\n   * and size.\n   */\n  from_hf_model?: string;\n\n  /**\n   * The API token for the Hugging Face Hub.\n   */\n  hf_api_token?: string;\n\n  /**\n   * The revision of the Hugging Face Hub model to continue training from. E.g.,\n   * hf_model_revision=main (default, used if the argument is not provided) or\n   * hf_model_revision='607a30d783dfa663caf39e06633721c8d4cfcd7e' (specific commit).\n   */\n  hf_model_revision?: string;\n\n  /**\n   * The name of the Hugging Face repository to upload the fine-tuned model to.\n   */\n  hf_output_repo_name?: string;\n\n  /**\n   * Controls how quickly the model adapts to new information (too high may cause\n   * instability, too low may slow convergence)\n   */\n  learning_rate?: number;\n\n  /**\n   * The learning rate scheduler to use. It specifies how the learning rate is\n   * adjusted during training.\n   */\n  lr_scheduler?: LrScheduler;\n\n  /**\n   * Max gradient norm to be used for gradient clipping. Set to 0 to disable.\n   */\n  max_grad_norm?: number;\n\n  /**\n   * Number of intermediate model versions saved during training for evaluation\n   */\n  n_checkpoints?: number;\n\n  /**\n   * Number of complete passes through the training dataset (higher values may\n   * improve results but increase cost and risk of overfitting)\n   */\n  n_epochs?: number;\n\n  /**\n   * Number of evaluations to be run on a given validation set during training\n   */\n  n_evals?: number;\n\n  /**\n   * Suffix that will be added to your fine-tuned model name\n   */\n  suffix?: string;\n\n  /**\n   * @deprecated Whether to mask the user messages in conversational data or prompts\n   * in instruction data.\n   */\n  train_on_inputs?: boolean | 'auto';\n\n  /**\n   * The training method to use. 'sft' for Supervised Fine-Tuning or 'dpo' for Direct\n   * Preference Optimization.\n   */\n  training_method?: TrainingMethodSft | TrainingMethodDpo;\n\n  training_type?: FullTrainingType | LoRaTrainingType;\n\n  /**\n   * File-ID of a validation file uploaded to the Together API\n   */\n  validation_file?: string;\n\n  /**\n   * Integration key for tracking experiments and model metrics on W&B platform\n   */\n  wandb_api_key?: string;\n\n  /**\n   * The base URL of a dedicated Weights & Biases instance.\n   */\n  wandb_base_url?: string;\n\n  /**\n   * The Weights & Biases name for your run.\n   */\n  wandb_name?: string;\n\n  /**\n   * The Weights & Biases project for your run. If not specified, will use `together`\n   * as the project name.\n   */\n  wandb_project_name?: string;\n\n  /**\n   * The percent of steps at the start of training to linearly increase the learning\n   * rate.\n   */\n  warmup_ratio?: number;\n\n  /**\n   * Weight decay. Regularization parameter for the optimizer.\n   */\n  weight_decay?: number;\n}\n\nexport interface FineTuneDownloadParams {\n  /**\n   * Fine-tune ID to download. A string that starts with `ft-`.\n   */\n  ft_id: string;\n\n  /**\n   * Specifies checkpoint type to download - `merged` vs `adapter`. This field is\n   * required if the checkpoint_step is not set.\n   */\n  checkpoint?: 'merged' | 'adapter';\n\n  /**\n   * Specifies step number for checkpoint to download. Ignores `checkpoint` value if\n   * set.\n   */\n  checkpoint_step?: number;\n\n  /**\n   * Specifies output file name for downloaded model. Defaults to\n   * `$PWD/{model_name}.{extension}`.\n   */\n  output?: string;\n}\n\nexport declare namespace FineTuneResource {\n  export {\n    type CosineLrSchedulerArgs as CosineLrSchedulerArgs,\n    type FineTune as FineTune,\n    type FineTuneEvent as FineTuneEvent,\n    type FullTrainingType as FullTrainingType,\n    type LinearLrSchedulerArgs as LinearLrSchedulerArgs,\n    type LoRaTrainingType as LoRaTrainingType,\n    type LrScheduler as LrScheduler,\n    type TrainingMethodDpo as TrainingMethodDpo,\n    type TrainingMethodSft as TrainingMethodSft,\n    type FineTuneCreateResponse as FineTuneCreateResponse,\n    type FineTuneListResponse as FineTuneListResponse,\n    type FineTuneCancelResponse as FineTuneCancelResponse,\n    type FineTuneDownloadResponse as FineTuneDownloadResponse,\n    type FineTuneListEventsResponse as FineTuneListEventsResponse,\n    type FineTuneRetrieveCheckpointsResponse as FineTuneRetrieveCheckpointsResponse,\n    type FineTuneCreateParams as FineTuneCreateParams,\n    type FineTuneDownloadParams as FineTuneDownloadParams,\n  };\n}\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { isReadonlyArray } from './utils/values';\n\ntype HeaderValue = string | undefined | null;\nexport type HeadersLike =\n  | Headers\n  | readonly HeaderValue[][]\n  | Record<string, HeaderValue | readonly HeaderValue[]>\n  | undefined\n  | null\n  | NullableHeaders;\n\nconst brand_privateNullableHeaders = /* @__PURE__ */ Symbol('brand.privateNullableHeaders');\n\n/**\n * @internal\n * Users can pass explicit nulls to unset default headers. When we parse them\n * into a standard headers type we need to preserve that information.\n */\nexport type NullableHeaders = {\n  /** Brand check, prevent users from creating a NullableHeaders. */\n  [brand_privateNullableHeaders]: true;\n  /** Parsed headers. */\n  values: Headers;\n  /** Set of lowercase header names explicitly set to null. */\n  nulls: Set<string>;\n};\n\nfunction* iterateHeaders(headers: HeadersLike): IterableIterator<readonly [string, string | null]> {\n  if (!headers) return;\n\n  if (brand_privateNullableHeaders in headers) {\n    const { values, nulls } = headers;\n    yield* values.entries();\n    for (const name of nulls) {\n      yield [name, null];\n    }\n    return;\n  }\n\n  let shouldClear = false;\n  let iter: Iterable<readonly (HeaderValue | readonly HeaderValue[])[]>;\n  if (headers instanceof Headers) {\n    iter = headers.entries();\n  } else if (isReadonlyArray(headers)) {\n    iter = headers;\n  } else {\n    shouldClear = true;\n    iter = Object.entries(headers ?? {});\n  }\n  for (let row of iter) {\n    const name = row[0];\n    if (typeof name !== 'string') throw new TypeError('expected header name to be a string');\n    const values = isReadonlyArray(row[1]) ? row[1] : [row[1]];\n    let didClear = false;\n    for (const value of values) {\n      if (value === undefined) continue;\n\n      // Objects keys always overwrite older headers, they never append.\n      // Yield a null to clear the header before adding the new values.\n      if (shouldClear && !didClear) {\n        didClear = true;\n        yield [name, null];\n      }\n      yield [name, value];\n    }\n  }\n}\n\nexport const buildHeaders = (newHeaders: HeadersLike[]): NullableHeaders => {\n  const targetHeaders = new Headers();\n  const nullHeaders = new Set<string>();\n  for (const headers of newHeaders) {\n    const seenHeaders = new Set<string>();\n    for (const [name, value] of iterateHeaders(headers)) {\n      const lowerName = name.toLowerCase();\n      if (!seenHeaders.has(lowerName)) {\n        targetHeaders.delete(name);\n        seenHeaders.add(lowerName);\n      }\n      if (value === null) {\n        targetHeaders.delete(name);\n        nullHeaders.add(lowerName);\n      } else {\n        targetHeaders.append(name, value);\n        nullHeaders.delete(lowerName);\n      }\n    }\n  }\n  return { [brand_privateNullableHeaders]: true, values: targetHeaders, nulls: nullHeaders };\n};\n\nexport const isEmptyHeaders = (headers: HeadersLike) => {\n  for (const _ of iterateHeaders(headers)) return false;\n  return true;\n};\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { APIResource } from '../core/resource';\nimport { APIPromise } from '../core/api-promise';\nimport { RequestOptions } from '../internal/request-options';\n\nexport class Hardware extends APIResource {\n  /**\n   * Returns a list of available hardware configurations for deploying models. When a\n   * model parameter is provided, it returns only hardware configurations compatible\n   * with that model, including their current availability status.\n   */\n  list(\n    query: HardwareListParams | null | undefined = {},\n    options?: RequestOptions,\n  ): APIPromise<HardwareListResponse> {\n    return this._client.get('/hardware', { query, ...options });\n  }\n}\n\nexport interface HardwareListResponse {\n  data: Array<HardwareListResponse.Data>;\n\n  object: 'list';\n}\n\nexport namespace HardwareListResponse {\n  /**\n   * Hardware configuration details with optional availability status\n   */\n  export interface Data {\n    /**\n     * Unique identifier for the hardware configuration\n     */\n    id: string;\n\n    object: 'hardware';\n\n    /**\n     * Pricing details for using an endpoint\n     */\n    pricing: Data.Pricing;\n\n    /**\n     * Detailed specifications of a hardware configuration\n     */\n    specs: Data.Specs;\n\n    /**\n     * Timestamp of when the hardware status was last updated\n     */\n    updated_at: string;\n\n    /**\n     * Indicates the current availability status of a hardware configuration\n     */\n    availability?: Data.Availability;\n  }\n\n  export namespace Data {\n    /**\n     * Pricing details for using an endpoint\n     */\n    export interface Pricing {\n      /**\n       * Cost per minute of endpoint uptime in cents\n       */\n      cents_per_minute: number;\n    }\n\n    /**\n     * Detailed specifications of a hardware configuration\n     */\n    export interface Specs {\n      /**\n       * Number of GPUs in this configuration\n       */\n      gpu_count: number;\n\n      /**\n       * The GPU interconnect technology\n       */\n      gpu_link: string;\n\n      /**\n       * Amount of GPU memory in GB\n       */\n      gpu_memory: number;\n\n      /**\n       * The type/model of GPU\n       */\n      gpu_type: string;\n    }\n\n    /**\n     * Indicates the current availability status of a hardware configuration\n     */\n    export interface Availability {\n      /**\n       * The availability status of the hardware configuration\n       */\n      status: 'available' | 'unavailable' | 'insufficient';\n    }\n  }\n}\n\nexport interface HardwareListParams {\n  /**\n   * Filter hardware configurations by model compatibility. When provided, the\n   * response includes availability status for each compatible configuration.\n   */\n  model?: string;\n}\n\nexport declare namespace Hardware {\n  export { type HardwareListResponse as HardwareListResponse, type HardwareListParams as HardwareListParams };\n}\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { APIResource } from '../core/resource';\nimport { APIPromise } from '../core/api-promise';\nimport { RequestOptions } from '../internal/request-options';\n\nexport class Images extends APIResource {\n  /**\n   * Use an image model to generate an image for a given prompt.\n   *\n   * @example\n   * ```ts\n   * const imageFile = await client.images.create({\n   *   model: 'black-forest-labs/FLUX.1-schnell',\n   *   prompt: 'cat floating in space, cinematic',\n   * });\n   * ```\n   */\n  create(body: ImageCreateParams, options?: RequestOptions): APIPromise<ImageFile> {\n    return this._client.post('/images/generations', { body, ...options });\n  }\n}\n\nexport interface ImageDataB64 {\n  b64_json: string;\n\n  index: number;\n\n  type: 'b64_json';\n}\n\nexport interface ImageDataURL {\n  index: number;\n\n  type: 'url';\n\n  url: string;\n}\n\nexport interface ImageFile {\n  id: string;\n\n  data: Array<ImageDataB64 | ImageDataURL>;\n\n  model: string;\n\n  object: 'list';\n}\n\nexport interface ImageCreateParams {\n  /**\n   * The model to use for image generation.\n   *\n   * [See all of Together AI's image models](https://docs.together.ai/docs/serverless-models#image-models)\n   */\n  model:\n    | 'black-forest-labs/FLUX.1-schnell-Free'\n    | 'black-forest-labs/FLUX.1-schnell'\n    | 'black-forest-labs/FLUX.1.1-pro'\n    | (string & {});\n\n  /**\n   * A description of the desired images. Maximum length varies by model.\n   */\n  prompt: string;\n\n  /**\n   * If true, disables the safety checker for image generation.\n   */\n  disable_safety_checker?: boolean;\n\n  /**\n   * Adjusts the alignment of the generated image with the input prompt. Higher\n   * values (e.g., 8-10) make the output more faithful to the prompt, while lower\n   * values (e.g., 1-5) encourage more creative freedom.\n   */\n  guidance_scale?: number;\n\n  /**\n   * Height of the image to generate in number of pixels.\n   */\n  height?: number;\n\n  /**\n   * An array of objects that define LoRAs (Low-Rank Adaptations) to influence the\n   * generated image.\n   */\n  image_loras?: Array<ImageCreateParams.ImageLora>;\n\n  /**\n   * URL of an image to use for image models that support it.\n   */\n  image_url?: string;\n\n  /**\n   * Number of image results to generate.\n   */\n  n?: number;\n\n  /**\n   * The prompt or prompts not to guide the image generation.\n   */\n  negative_prompt?: string;\n\n  /**\n   * The format of the image response. Can be either be `jpeg` or `png`. Defaults to\n   * `jpeg`.\n   */\n  output_format?: 'jpeg' | 'png';\n\n  /**\n   * Format of the image response. Can be either a base64 string or a URL.\n   */\n  response_format?: 'base64' | 'url';\n\n  /**\n   * Seed used for generation. Can be used to reproduce image generations.\n   */\n  seed?: number;\n\n  /**\n   * Number of generation steps.\n   */\n  steps?: number;\n\n  /**\n   * Width of the image to generate in number of pixels.\n   */\n  width?: number;\n}\n\nexport namespace ImageCreateParams {\n  export interface ImageLora {\n    /**\n     * The URL of the LoRA to apply (e.g.\n     * https://huggingface.co/strangerzonehf/Flux-Midjourney-Mix2-LoRA).\n     */\n    path: string;\n\n    /**\n     * The strength of the LoRA's influence. Most LoRA's recommend a value of 1.\n     */\n    scale: number;\n  }\n}\n\nexport declare namespace Images {\n  export {\n    type ImageDataB64 as ImageDataB64,\n    type ImageDataURL as ImageDataURL,\n    type ImageFile as ImageFile,\n    type ImageCreateParams as ImageCreateParams,\n  };\n}\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { APIResource } from '../core/resource';\nimport { APIPromise } from '../core/api-promise';\nimport { RequestOptions } from '../internal/request-options';\nimport { path } from '../internal/utils/path';\n\nexport class Jobs extends APIResource {\n  /**\n   * Get the status of a specific job\n   *\n   * @example\n   * ```ts\n   * const job = await client.jobs.retrieve(\n   *   'job-a15dad11-8d8e-4007-97c5-a211304de284',\n   * );\n   * ```\n   */\n  retrieve(jobID: string, options?: RequestOptions): APIPromise<JobRetrieveResponse> {\n    return this._client.get(path`/jobs/${jobID}`, options);\n  }\n\n  /**\n   * List all jobs and their statuses\n   *\n   * @example\n   * ```ts\n   * const jobs = await client.jobs.list();\n   * ```\n   */\n  list(options?: RequestOptions): APIPromise<JobListResponse> {\n    return this._client.get('/jobs', options);\n  }\n}\n\nexport interface JobRetrieveResponse {\n  args: JobRetrieveResponse.Args;\n\n  created_at: string;\n\n  job_id: string;\n\n  status: 'Queued' | 'Running' | 'Complete' | 'Failed';\n\n  status_updates: Array<JobRetrieveResponse.StatusUpdate>;\n\n  type: string;\n\n  updated_at: string;\n}\n\nexport namespace JobRetrieveResponse {\n  export interface Args {\n    description?: string;\n\n    modelName?: string;\n\n    modelSource?: string;\n  }\n\n  export interface StatusUpdate {\n    message: string;\n\n    status: string;\n\n    timestamp: string;\n  }\n}\n\nexport interface JobListResponse {\n  data: Array<JobListResponse.Data>;\n}\n\nexport namespace JobListResponse {\n  export interface Data {\n    args: Data.Args;\n\n    created_at: string;\n\n    job_id: string;\n\n    status: 'Queued' | 'Running' | 'Complete' | 'Failed';\n\n    status_updates: Array<Data.StatusUpdate>;\n\n    type: string;\n\n    updated_at: string;\n  }\n\n  export namespace Data {\n    export interface Args {\n      description?: string;\n\n      modelName?: string;\n\n      modelSource?: string;\n    }\n\n    export interface StatusUpdate {\n      message: string;\n\n      status: string;\n\n      timestamp: string;\n    }\n  }\n}\n\nexport declare namespace Jobs {\n  export { type JobRetrieveResponse as JobRetrieveResponse, type JobListResponse as JobListResponse };\n}\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { APIResource } from '../../core/resource';\nimport * as AudioAPI from './audio';\nimport * as TranscriptionsAPI from './transcriptions';\nimport { TranscriptionCreateParams, TranscriptionCreateResponse, Transcriptions } from './transcriptions';\nimport * as TranslationsAPI from './translations';\nimport { TranslationCreateParams, TranslationCreateResponse, Translations } from './translations';\nimport { APIPromise } from '../../core/api-promise';\nimport { Stream } from '../../core/streaming';\nimport { buildHeaders } from '../../internal/headers';\nimport { RequestOptions } from '../../internal/request-options';\n\nexport class Audio extends APIResource {\n  transcriptions: TranscriptionsAPI.Transcriptions = new TranscriptionsAPI.Transcriptions(this._client);\n  translations: TranslationsAPI.Translations = new TranslationsAPI.Translations(this._client);\n\n  /**\n   * Generate audio from input text\n   *\n   * @example\n   * ```ts\n   * const audio = await client.audio.create({\n   *   input: 'input',\n   *   model: 'cartesia/sonic',\n   *   voice: 'laidback woman',\n   * });\n   *\n   * const content = await audio.blob();\n   * console.log(content);\n   * ```\n   */\n  create(body: AudioCreateParamsNonStreaming, options?: RequestOptions): APIPromise<Response>;\n  create(\n    body: AudioCreateParamsStreaming,\n    options?: RequestOptions,\n  ): APIPromise<Stream<AudioSpeechStreamChunk>>;\n  create(\n    body: AudioCreateParamsBase,\n    options?: RequestOptions,\n  ): APIPromise<Stream<AudioSpeechStreamChunk> | Response>;\n  create(\n    body: AudioCreateParams,\n    options?: RequestOptions,\n  ): APIPromise<Response> | APIPromise<Stream<AudioSpeechStreamChunk>> {\n    return this._client.post('/audio/speech', {\n      body,\n      ...options,\n      headers: buildHeaders([{ Accept: 'application/octet-stream' }, options?.headers]),\n      stream: body.stream ?? false,\n      __binaryResponse: true,\n    }) as APIPromise<Response> | APIPromise<Stream<AudioSpeechStreamChunk>>;\n  }\n}\n\nexport type AudioFile = AudioFile.AudioSpeechStreamEvent | AudioFile.StreamSentinel;\n\nexport namespace AudioFile {\n  export interface AudioSpeechStreamEvent {\n    data: AudioAPI.AudioSpeechStreamChunk;\n  }\n\n  export interface StreamSentinel {\n    data: '[DONE]';\n  }\n}\n\nexport interface AudioSpeechStreamChunk {\n  /**\n   * base64 encoded audio stream\n   */\n  b64: string;\n\n  model: string;\n\n  object: 'audio.tts.chunk';\n}\n\nexport type AudioCreateParams = AudioCreateParamsNonStreaming | AudioCreateParamsStreaming;\n\nexport interface AudioCreateParamsBase {\n  /**\n   * Input text to generate the audio for\n   */\n  input: string;\n\n  /**\n   * The name of the model to query.\n   *\n   * [See all of Together AI's chat models](https://docs.together.ai/docs/serverless-models#audio-models)\n   */\n  model: 'cartesia/sonic' | (string & {});\n\n  /**\n   * The voice to use for generating the audio.\n   * [View all supported voices here](https://docs.together.ai/docs/text-to-speech#voices-available).\n   */\n  voice: 'laidback woman' | 'polite man' | 'storyteller lady' | 'friendly sidekick' | (string & {});\n\n  /**\n   * Language of input text\n   */\n  language?:\n    | 'en'\n    | 'de'\n    | 'fr'\n    | 'es'\n    | 'hi'\n    | 'it'\n    | 'ja'\n    | 'ko'\n    | 'nl'\n    | 'pl'\n    | 'pt'\n    | 'ru'\n    | 'sv'\n    | 'tr'\n    | 'zh';\n\n  /**\n   * Audio encoding of response\n   */\n  response_encoding?: 'pcm_f32le' | 'pcm_s16le' | 'pcm_mulaw' | 'pcm_alaw';\n\n  /**\n   * The format of audio output\n   */\n  response_format?: 'mp3' | 'wav' | 'raw';\n\n  /**\n   * Sampling rate to use for the output audio\n   */\n  sample_rate?: number;\n\n  /**\n   * If true, output is streamed for several characters at a time instead of waiting\n   * for the full response. The stream terminates with `data: [DONE]`. If false,\n   * return the encoded audio as octet stream\n   */\n  stream?: boolean;\n}\n\nexport namespace AudioCreateParams {\n  export type AudioCreateParamsNonStreaming = AudioAPI.AudioCreateParamsNonStreaming;\n  export type AudioCreateParamsStreaming = AudioAPI.AudioCreateParamsStreaming;\n}\n\nexport interface AudioCreateParamsNonStreaming extends AudioCreateParamsBase {\n  /**\n   * If true, output is streamed for several characters at a time instead of waiting\n   * for the full response. The stream terminates with `data: [DONE]`. If false,\n   * return the encoded audio as octet stream\n   */\n  stream?: false;\n}\n\nexport interface AudioCreateParamsStreaming extends AudioCreateParamsBase {\n  /**\n   * If true, output is streamed for several characters at a time instead of waiting\n   * for the full response. The stream terminates with `data: [DONE]`. If false,\n   * return the encoded audio as octet stream\n   */\n  stream: true;\n}\n\nAudio.Transcriptions = Transcriptions;\nAudio.Translations = Translations;\n\nexport declare namespace Audio {\n  export {\n    type AudioFile as AudioFile,\n    type AudioSpeechStreamChunk as AudioSpeechStreamChunk,\n    type AudioCreateParams as AudioCreateParams,\n    type AudioCreateParamsNonStreaming as AudioCreateParamsNonStreaming,\n    type AudioCreateParamsStreaming as AudioCreateParamsStreaming,\n  };\n\n  export {\n    Transcriptions as Transcriptions,\n    type TranscriptionCreateResponse as TranscriptionCreateResponse,\n    type TranscriptionCreateParams as TranscriptionCreateParams,\n  };\n\n  export {\n    Translations as Translations,\n    type TranslationCreateResponse as TranslationCreateResponse,\n    type TranslationCreateParams as TranslationCreateParams,\n  };\n}\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { APIResource } from '../core/resource';\nimport { APIPromise } from '../core/api-promise';\nimport { RequestOptions } from '../internal/request-options';\n\nexport class Models extends APIResource {\n  /**\n   * Lists all of Together's open-source models\n   *\n   * @example\n   * ```ts\n   * const models = await client.models.list();\n   * ```\n   */\n  list(options?: RequestOptions): APIPromise<ModelListResponse> {\n    return this._client.get('/models', options);\n  }\n\n  /**\n   * Upload a custom model or adapter from Hugging Face or S3\n   *\n   * @example\n   * ```ts\n   * const response = await client.models.upload({\n   *   model_name: 'Qwen2.5-72B-Instruct',\n   *   model_source: 'unsloth/Qwen2.5-72B-Instruct',\n   * });\n   * ```\n   */\n  upload(body: ModelUploadParams, options?: RequestOptions): APIPromise<ModelUploadResponse> {\n    return this._client.post('/models', { body, ...options });\n  }\n}\n\nexport type ModelListResponse = Array<ModelListResponse.ModelListResponseItem>;\n\nexport namespace ModelListResponse {\n  export interface ModelListResponseItem {\n    id: string;\n\n    created: number;\n\n    object: string;\n\n    type: 'chat' | 'language' | 'code' | 'image' | 'embedding' | 'moderation' | 'rerank';\n\n    context_length?: number;\n\n    display_name?: string;\n\n    license?: string;\n\n    link?: string;\n\n    organization?: string;\n\n    pricing?: ModelListResponseItem.Pricing;\n  }\n\n  export namespace ModelListResponseItem {\n    export interface Pricing {\n      base: number;\n\n      finetune: number;\n\n      hourly: number;\n\n      input: number;\n\n      output: number;\n    }\n  }\n}\n\nexport interface ModelUploadResponse {\n  data: ModelUploadResponse.Data;\n\n  message: string;\n}\n\nexport namespace ModelUploadResponse {\n  export interface Data {\n    job_id: string;\n\n    model_id: string;\n\n    model_name: string;\n\n    model_source: string;\n  }\n}\n\nexport interface ModelUploadParams {\n  /**\n   * The name to give to your uploaded model\n   */\n  model_name: string;\n\n  /**\n   * The source location of the model (Hugging Face repo or S3 path)\n   */\n  model_source: string;\n\n  /**\n   * The base model to use for an adapter if setting it to run against a serverless\n   * pool. Only used for model_type `adapter`.\n   */\n  base_model?: string;\n\n  /**\n   * A description of your model\n   */\n  description?: string;\n\n  /**\n   * Hugging Face token (if uploading from Hugging Face)\n   */\n  hf_token?: string;\n\n  /**\n   * The lora pool to use for an adapter if setting it to run against, say, a\n   * dedicated pool. Only used for model_type `adapter`.\n   */\n  lora_model?: string;\n\n  /**\n   * Whether the model is a full model or an adapter\n   */\n  model_type?: 'model' | 'adapter';\n}\n\nexport declare namespace Models {\n  export {\n    type ModelListResponse as ModelListResponse,\n    type ModelUploadResponse as ModelUploadResponse,\n    type ModelUploadParams as ModelUploadParams,\n  };\n}\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nexport {\n  Audio,\n  type AudioFile,\n  type AudioSpeechStreamChunk,\n  type AudioCreateParams,\n  type AudioCreateParamsNonStreaming,\n  type AudioCreateParamsStreaming,\n} from './audio/audio';\nexport {\n  Batches,\n  type BatchCreateResponse,\n  type BatchRetrieveResponse,\n  type BatchListResponse,\n  type BatchCreateParams,\n} from './batches';\nexport { Chat } from './chat/chat';\nexport {\n  CodeInterpreter,\n  type ExecuteResponse,\n  type CodeInterpreterExecuteParams,\n} from './code-interpreter/code-interpreter';\nexport {\n  Completions,\n  type Completion,\n  type CompletionChunk,\n  type LogProbs,\n  type ToolChoice,\n  type Tools,\n  type CompletionCreateParams,\n  type CompletionCreateParamsNonStreaming,\n  type CompletionCreateParamsStreaming,\n} from './completions';\nexport { Embeddings, type Embedding, type EmbeddingCreateParams } from './embeddings';\nexport {\n  Endpoints,\n  type Autoscaling,\n  type EndpointCreateResponse,\n  type EndpointRetrieveResponse,\n  type EndpointUpdateResponse,\n  type EndpointListResponse,\n  type EndpointCreateParams,\n  type EndpointUpdateParams,\n  type EndpointListParams,\n} from './endpoints';\nexport {\n  Files,\n  type FileObject,\n  type FilePurpose,\n  type FileType,\n  type FileRetrieveResponse,\n  type FileListResponse,\n  type FileDeleteResponse,\n  type FileUploadResponse,\n  type FileUploadParams,\n} from './files';\nexport {\n  FineTuneResource,\n  type CosineLrSchedulerArgs,\n  type FineTune,\n  type FineTuneEvent,\n  type FullTrainingType,\n  type LinearLrSchedulerArgs,\n  type LoRaTrainingType,\n  type LrScheduler,\n  type TrainingMethodDpo,\n  type TrainingMethodSft,\n  type FineTuneCreateResponse,\n  type FineTuneListResponse,\n  type FineTuneCancelResponse,\n  type FineTuneDownloadResponse,\n  type FineTuneListEventsResponse,\n  type FineTuneRetrieveCheckpointsResponse,\n  type FineTuneCreateParams,\n  type FineTuneDownloadParams,\n} from './fine-tune';\nexport { Hardware, type HardwareListResponse, type HardwareListParams } from './hardware';\nexport {\n  Images,\n  type ImageDataB64,\n  type ImageDataURL,\n  type ImageFile,\n  type ImageCreateParams,\n} from './images';\nexport { Jobs, type JobRetrieveResponse, type JobListResponse } from './jobs';\nexport { Models, type ModelListResponse, type ModelUploadResponse, type ModelUploadParams } from './models';\nexport { type RerankResponse, type RerankParams } from './top-level';\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { APIResource } from '../core/resource';\nimport { APIPromise } from '../core/api-promise';\nimport { RequestOptions } from '../internal/request-options';\nimport { path } from '../internal/utils/path';\n\nexport class Batches extends APIResource {\n  /**\n   * Create a new batch job with the given input file and endpoint\n   *\n   * @example\n   * ```ts\n   * const batch = await client.batches.create({\n   *   endpoint: '/v1/chat/completions',\n   *   input_file_id: 'file-abc123def456ghi789',\n   * });\n   * ```\n   */\n  create(body: BatchCreateParams, options?: RequestOptions): APIPromise<BatchCreateResponse> {\n    return this._client.post('/batches', { body, ...options });\n  }\n\n  /**\n   * Get details of a batch job by ID\n   *\n   * @example\n   * ```ts\n   * const batch = await client.batches.retrieve(\n   *   'batch_job_abc123def456',\n   * );\n   * ```\n   */\n  retrieve(id: string, options?: RequestOptions): APIPromise<BatchRetrieveResponse> {\n    return this._client.get(path`/batches/${id}`, options);\n  }\n\n  /**\n   * List all batch jobs for the authenticated user\n   *\n   * @example\n   * ```ts\n   * const batches = await client.batches.list();\n   * ```\n   */\n  list(options?: RequestOptions): APIPromise<BatchListResponse> {\n    return this._client.get('/batches', options);\n  }\n}\n\nexport interface BatchCreateResponse {\n  job?: BatchCreateResponse.Job;\n\n  warning?: string;\n}\n\nexport namespace BatchCreateResponse {\n  export interface Job {\n    id?: string;\n\n    completed_at?: string;\n\n    created_at?: string;\n\n    endpoint?: string;\n\n    error?: string;\n\n    error_file_id?: string;\n\n    /**\n     * Size of input file in bytes\n     */\n    file_size_bytes?: number;\n\n    input_file_id?: string;\n\n    job_deadline?: string;\n\n    /**\n     * Model used for processing requests\n     */\n    model_id?: string;\n\n    output_file_id?: string;\n\n    /**\n     * Completion progress (0.0 to 100)\n     */\n    progress?: number;\n\n    /**\n     * Current status of the batch job\n     */\n    status?: 'VALIDATING' | 'IN_PROGRESS' | 'COMPLETED' | 'FAILED' | 'EXPIRED' | 'CANCELLED';\n\n    user_id?: string;\n  }\n}\n\nexport interface BatchRetrieveResponse {\n  id?: string;\n\n  completed_at?: string;\n\n  created_at?: string;\n\n  endpoint?: string;\n\n  error?: string;\n\n  error_file_id?: string;\n\n  /**\n   * Size of input file in bytes\n   */\n  file_size_bytes?: number;\n\n  input_file_id?: string;\n\n  job_deadline?: string;\n\n  /**\n   * Model used for processing requests\n   */\n  model_id?: string;\n\n  output_file_id?: string;\n\n  /**\n   * Completion progress (0.0 to 100)\n   */\n  progress?: number;\n\n  /**\n   * Current status of the batch job\n   */\n  status?: 'VALIDATING' | 'IN_PROGRESS' | 'COMPLETED' | 'FAILED' | 'EXPIRED' | 'CANCELLED';\n\n  user_id?: string;\n}\n\nexport type BatchListResponse = Array<BatchListResponse.BatchListResponseItem>;\n\nexport namespace BatchListResponse {\n  export interface BatchListResponseItem {\n    id?: string;\n\n    completed_at?: string;\n\n    created_at?: string;\n\n    endpoint?: string;\n\n    error?: string;\n\n    error_file_id?: string;\n\n    /**\n     * Size of input file in bytes\n     */\n    file_size_bytes?: number;\n\n    input_file_id?: string;\n\n    job_deadline?: string;\n\n    /**\n     * Model used for processing requests\n     */\n    model_id?: string;\n\n    output_file_id?: string;\n\n    /**\n     * Completion progress (0.0 to 100)\n     */\n    progress?: number;\n\n    /**\n     * Current status of the batch job\n     */\n    status?: 'VALIDATING' | 'IN_PROGRESS' | 'COMPLETED' | 'FAILED' | 'EXPIRED' | 'CANCELLED';\n\n    user_id?: string;\n  }\n}\n\nexport interface BatchCreateParams {\n  /**\n   * The endpoint to use for batch processing\n   */\n  endpoint: string;\n\n  /**\n   * ID of the uploaded input file containing batch requests\n   */\n  input_file_id: string;\n\n  /**\n   * Time window for batch completion (optional)\n   */\n  completion_window?: string;\n\n  /**\n   * Model to use for processing batch requests\n   */\n  model_id?: string;\n\n  /**\n   * Priority for batch processing (optional)\n   */\n  priority?: number;\n}\n\nexport declare namespace Batches {\n  export {\n    type BatchCreateResponse as BatchCreateResponse,\n    type BatchRetrieveResponse as BatchRetrieveResponse,\n    type BatchListResponse as BatchListResponse,\n    type BatchCreateParams as BatchCreateParams,\n  };\n}\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nexport { Together as default } from './client';\n\nexport { type Uploadable, toFile } from './core/uploads';\nexport { APIPromise } from './core/api-promise';\nexport { Together, type ClientOptions } from './client';\nexport {\n  TogetherError,\n  APIError,\n  APIConnectionError,\n  APIConnectionTimeoutError,\n  APIUserAbortError,\n  NotFoundError,\n  ConflictError,\n  RateLimitError,\n  BadRequestError,\n  AuthenticationError,\n  InternalServerError,\n  PermissionDeniedError,\n  UnprocessableEntityError,\n} from './core/error';\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nexport const sleep = (ms: number) => new Promise<void>((resolve) => setTimeout(resolve, ms));\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nexport function isAbortError(err: unknown) {\n  return (\n    typeof err === 'object' &&\n    err !== null &&\n    // Spec-compliant fetch implementations\n    (('name' in err && (err as any).name === 'AbortError') ||\n      // Expo fetch\n      ('message' in err && String((err as any).message).includes('FetchRequestCanceledException')))\n  );\n}\n\nexport const castToError = (err: any): Error => {\n  if (err instanceof Error) return err;\n  if (typeof err === 'object' && err !== null) {\n    try {\n      if (Object.prototype.toString.call(err) === '[object Error]') {\n        // @ts-ignore - not all envs have native support for cause yet\n        const error = new Error(err.message, err.cause ? { cause: err.cause } : {});\n        if (err.stack) error.stack = err.stack;\n        // @ts-ignore - not all envs have native support for cause yet\n        if (err.cause && !error.cause) error.cause = err.cause;\n        if (err.name) error.name = err.name;\n        return error;\n      }\n    } catch {}\n    try {\n      return new Error(JSON.stringify(err));\n    } catch {}\n  }\n  return new Error(err);\n};\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { NullableHeaders } from './headers';\n\nimport type { BodyInit } from './builtin-types';\nimport { Stream } from '../core/streaming';\nimport type { HTTPMethod, MergedRequestInit } from './types';\nimport { type HeadersLike } from './headers';\n\nexport type FinalRequestOptions = RequestOptions & { method: HTTPMethod; path: string };\n\nexport type RequestOptions = {\n  /**\n   * The HTTP method for the request (e.g., 'get', 'post', 'put', 'delete').\n   */\n  method?: HTTPMethod;\n\n  /**\n   * The URL path for the request.\n   *\n   * @example \"/v1/foo\"\n   */\n  path?: string;\n\n  /**\n   * Query parameters to include in the request URL.\n   */\n  query?: object | undefined | null;\n\n  /**\n   * The request body. Can be a string, JSON object, FormData, or other supported types.\n   */\n  body?: unknown;\n\n  /**\n   * HTTP headers to include with the request. Can be a Headers object, plain object, or array of tuples.\n   */\n  headers?: HeadersLike;\n\n  /**\n   * The maximum number of times that the client will retry a request in case of a\n   * temporary failure, like a network error or a 5XX error from the server.\n   *\n   * @default 5\n   */\n  maxRetries?: number;\n\n  stream?: boolean | undefined;\n\n  /**\n   * The maximum amount of time (in milliseconds) that the client should wait for a response\n   * from the server before timing out a single request.\n   *\n   * @unit milliseconds\n   */\n  timeout?: number;\n\n  /**\n   * Additional `RequestInit` options to be passed to the underlying `fetch` call.\n   * These options will be merged with the client's default fetch options.\n   */\n  fetchOptions?: MergedRequestInit;\n\n  /**\n   * An AbortSignal that can be used to cancel the request.\n   */\n  signal?: AbortSignal | undefined | null;\n\n  /**\n   * A unique key for this request to enable idempotency.\n   */\n  idempotencyKey?: string;\n\n  /**\n   * Override the default base URL for this specific request.\n   */\n  defaultBaseURL?: string | undefined;\n\n  __binaryResponse?: boolean | undefined;\n  __streamClass?: typeof Stream;\n};\n\nexport type EncodedContent = { bodyHeaders: HeadersLike; body: BodyInit };\nexport type RequestEncoder = (request: { headers: NullableHeaders; body: unknown }) => EncodedContent;\n\nexport const FallbackEncoder: RequestEncoder = ({ headers, body }) => {\n  return {\n    bodyHeaders: {\n      'content-type': 'application/json',\n    },\n    body: JSON.stringify(body),\n  };\n};\n","import { type RequestOptions } from './request-options';\nimport type { FilePropertyBag, Fetch } from './builtin-types';\nimport type { Together } from '../client';\nimport { ReadableStreamFrom } from './shims';\n\nexport type BlobPart = string | ArrayBuffer | ArrayBufferView | Blob | DataView;\ntype FsReadStream = AsyncIterable<Uint8Array> & { path: string | { toString(): string } };\n\n// https://github.com/oven-sh/bun/issues/5980\ninterface BunFile extends Blob {\n  readonly name?: string | undefined;\n}\n\nexport const checkFileSupport = () => {\n  if (typeof File === 'undefined') {\n    const { process } = globalThis as any;\n    const isOldNode =\n      typeof process?.versions?.node === 'string' && parseInt(process.versions.node.split('.')) < 20;\n    throw new Error(\n      '`File` is not defined as a global, which is required for file uploads.' +\n        (isOldNode ?\n          \" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.\"\n        : ''),\n    );\n  }\n};\n\n/**\n * Typically, this is a native \"File\" class.\n *\n * We provide the {@link toFile} utility to convert a variety of objects\n * into the File class.\n *\n * For convenience, you can also pass a fetch Response, or in Node,\n * the result of fs.createReadStream().\n */\nexport type Uploadable = File | Response | FsReadStream | BunFile;\n\n/**\n * Construct a `File` instance. This is used to ensure a helpful error is thrown\n * for environments that don't define a global `File` yet.\n */\nexport function makeFile(\n  fileBits: BlobPart[],\n  fileName: string | undefined,\n  options?: FilePropertyBag,\n): File {\n  checkFileSupport();\n  return new File(fileBits as any, fileName ?? 'unknown_file', options);\n}\n\nexport function getName(value: any): string | undefined {\n  return (\n    (\n      (typeof value === 'object' &&\n        value !== null &&\n        (('name' in value && value.name && String(value.name)) ||\n          ('url' in value && value.url && String(value.url)) ||\n          ('filename' in value && value.filename && String(value.filename)) ||\n          ('path' in value && value.path && String(value.path)))) ||\n      ''\n    )\n      .split(/[\\\\/]/)\n      .pop() || undefined\n  );\n}\n\nexport const isAsyncIterable = (value: any): value is AsyncIterable<any> =>\n  value != null && typeof value === 'object' && typeof value[Symbol.asyncIterator] === 'function';\n\n/**\n * Returns a multipart/form-data request if any part of the given request body contains a File / Blob value.\n * Otherwise returns the request as is.\n */\nexport const maybeMultipartFormRequestOptions = async (\n  opts: RequestOptions,\n  fetch: Together | Fetch,\n): Promise<RequestOptions> => {\n  if (!hasUploadableValue(opts.body)) return opts;\n\n  return { ...opts, body: await createForm(opts.body, fetch) };\n};\n\ntype MultipartFormRequestOptions = Omit<RequestOptions, 'body'> & { body: unknown };\n\nexport const multipartFormRequestOptions = async (\n  opts: MultipartFormRequestOptions,\n  fetch: Together | Fetch,\n): Promise<RequestOptions> => {\n  return { ...opts, body: await createForm(opts.body, fetch) };\n};\n\nconst supportsFormDataMap = /* @__PURE__ */ new WeakMap<Fetch, Promise<boolean>>();\n\n/**\n * node-fetch doesn't support the global FormData object in recent node versions. Instead of sending\n * properly-encoded form data, it just stringifies the object, resulting in a request body of \"[object FormData]\".\n * This function detects if the fetch function provided supports the global FormData object to avoid\n * confusing error messages later on.\n */\nfunction supportsFormData(fetchObject: Together | Fetch): Promise<boolean> {\n  const fetch: Fetch = typeof fetchObject === 'function' ? fetchObject : (fetchObject as any).fetch;\n  const cached = supportsFormDataMap.get(fetch);\n  if (cached) return cached;\n  const promise = (async () => {\n    try {\n      const FetchResponse = (\n        'Response' in fetch ?\n          fetch.Response\n        : (await fetch('data:,')).constructor) as typeof Response;\n      const data = new FormData();\n      if (data.toString() === (await new FetchResponse(data).text())) {\n        return false;\n      }\n      return true;\n    } catch {\n      // avoid false negatives\n      return true;\n    }\n  })();\n  supportsFormDataMap.set(fetch, promise);\n  return promise;\n}\n\nexport const createForm = async <T = Record<string, unknown>>(\n  body: T | undefined,\n  fetch: Together | Fetch,\n): Promise<FormData> => {\n  if (!(await supportsFormData(fetch))) {\n    throw new TypeError(\n      'The provided fetch function does not support file uploads with the current global FormData class.',\n    );\n  }\n  const form = new FormData();\n  await Promise.all(Object.entries(body || {}).map(([key, value]) => addFormValue(form, key, value)));\n  return form;\n};\n\n// We check for Blob not File because Bun.File doesn't inherit from File,\n// but they both inherit from Blob and have a `name` property at runtime.\nconst isNamedBlob = (value: unknown) => value instanceof Blob && 'name' in value;\n\nconst isUploadable = (value: unknown) =>\n  typeof value === 'object' &&\n  value !== null &&\n  (value instanceof Response || isAsyncIterable(value) || isNamedBlob(value));\n\nconst hasUploadableValue = (value: unknown): boolean => {\n  if (isUploadable(value)) return true;\n  if (Array.isArray(value)) return value.some(hasUploadableValue);\n  if (value && typeof value === 'object') {\n    for (const k in value) {\n      if (hasUploadableValue((value as any)[k])) return true;\n    }\n  }\n  return false;\n};\n\nconst addFormValue = async (form: FormData, key: string, value: unknown): Promise<void> => {\n  if (value === undefined) return;\n  if (value == null) {\n    throw new TypeError(\n      `Received null for \"${key}\"; to pass null in FormData, you must use the string 'null'`,\n    );\n  }\n\n  // TODO: make nested formats configurable\n  if (typeof value === 'string' || typeof value === 'number' || typeof value === 'boolean') {\n    form.append(key, String(value));\n  } else if (value instanceof Response) {\n    form.append(key, makeFile([await value.blob()], getName(value)));\n  } else if (isAsyncIterable(value)) {\n    form.append(key, makeFile([await new Response(ReadableStreamFrom(value)).blob()], getName(value)));\n  } else if (isNamedBlob(value)) {\n    form.append(key, value, getName(value));\n  } else if (Array.isArray(value)) {\n    await Promise.all(value.map((entry) => addFormValue(form, key + '[]', entry)));\n  } else if (typeof value === 'object') {\n    await Promise.all(\n      Object.entries(value).map(([name, prop]) => addFormValue(form, `${key}[${name}]`, prop)),\n    );\n  } else {\n    throw new TypeError(\n      `Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${value} instead`,\n    );\n  }\n};\n","import { Together } from \"together-ai\";\n\nconst APP_NAME_HELICONE = \"receipthero\";\n\nconst baseSDKOptions: ConstructorParameters<typeof Together>[0] = {\n  apiKey: process.env.TOGETHER_API_KEY,\n};\n\nif (process.env.HELICONE_API_KEY) {\n  baseSDKOptions.baseURL = \"https://together.helicone.ai/v1\";\n  baseSDKOptions.defaultHeaders = {\n    \"Helicone-Auth\": `Bearer ${process.env.HELICONE_API_KEY}`,\n    \"Helicone-Property-Appname\": APP_NAME_HELICONE,\n  };\n}\n\nexport const togetheraiClient = new Together(baseSDKOptions);\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport type { Together } from '../client';\n\nexport abstract class APIResource {\n  protected _client: Together;\n\n  constructor(client: Together) {\n    this._client = client;\n  }\n}\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\n/**\n * This module provides internal shims and utility functions for environments where certain Node.js or global types may not be available.\n *\n * These are used to ensure we can provide a consistent behaviour between different JavaScript environments and good error\n * messages in cases where an environment isn't fully supported.\n */\n\nimport type { Fetch } from './builtin-types';\nimport type { ReadableStream } from './shim-types';\n\nexport function getDefaultFetch(): Fetch {\n  if (typeof fetch !== 'undefined') {\n    return fetch as any;\n  }\n\n  throw new Error(\n    '`fetch` is not defined as a global; Either pass `fetch` to the client, `new Together({ fetch })` or polyfill the global, `globalThis.fetch = fetch`',\n  );\n}\n\ntype ReadableStreamArgs = ConstructorParameters<typeof ReadableStream>;\n\nexport function makeReadableStream(...args: ReadableStreamArgs): ReadableStream {\n  const ReadableStream = (globalThis as any).ReadableStream;\n  if (typeof ReadableStream === 'undefined') {\n    // Note: All of the platforms / runtimes we officially support already define\n    // `ReadableStream` as a global, so this should only ever be hit on unsupported runtimes.\n    throw new Error(\n      '`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`',\n    );\n  }\n\n  return new ReadableStream(...args);\n}\n\nexport function ReadableStreamFrom<T>(iterable: Iterable<T> | AsyncIterable<T>): ReadableStream<T> {\n  let iter: AsyncIterator<T> | Iterator<T> =\n    Symbol.asyncIterator in iterable ? iterable[Symbol.asyncIterator]() : iterable[Symbol.iterator]();\n\n  return makeReadableStream({\n    start() {},\n    async pull(controller: any) {\n      const { done, value } = await iter.next();\n      if (done) {\n        controller.close();\n      } else {\n        controller.enqueue(value);\n      }\n    },\n    async cancel() {\n      await iter.return?.();\n    },\n  });\n}\n\n/**\n * Most browsers don't yet have async iterable support for ReadableStream,\n * and Node has a very different way of reading bytes from its \"ReadableStream\".\n *\n * This polyfill was pulled from https://github.com/MattiasBuelens/web-streams-polyfill/pull/122#issuecomment-1627354490\n */\nexport function ReadableStreamToAsyncIterable<T>(stream: any): AsyncIterableIterator<T> {\n  if (stream[Symbol.asyncIterator]) return stream;\n\n  const reader = stream.getReader();\n  return {\n    async next() {\n      try {\n        const result = await reader.read();\n        if (result?.done) reader.releaseLock(); // release lock when stream becomes closed\n        return result;\n      } catch (e) {\n        reader.releaseLock(); // release lock when stream becomes errored\n        throw e;\n      }\n    },\n    async return() {\n      const cancelPromise = reader.cancel();\n      reader.releaseLock();\n      await cancelPromise;\n      return { done: true, value: undefined };\n    },\n    [Symbol.asyncIterator]() {\n      return this;\n    },\n  };\n}\n\n/**\n * Cancels a ReadableStream we don't need to consume.\n * See https://undici.nodejs.org/#/?id=garbage-collection\n */\nexport async function CancelReadableStream(stream: any): Promise<void> {\n  if (stream === null || typeof stream !== 'object') return;\n\n  if (stream[Symbol.asyncIterator]) {\n    await stream[Symbol.asyncIterator]().return?.();\n    return;\n  }\n\n  const reader = stream.getReader();\n  const cancelPromise = reader.cancel();\n  reader.releaseLock();\n  await cancelPromise;\n}\n","import { RequestOptions } from '../internal/request-options';\nimport { TogetherError, APIUserAbortError } from '../error';\nimport {\n  Completions,\n  type ChatCompletion,\n  type ChatCompletionChunk,\n  type CompletionCreateParams,\n  type CompletionCreateParamsBase,\n} from '../resources/chat/completions';\nimport {\n  AbstractChatCompletionRunner,\n  type AbstractChatCompletionRunnerEvents,\n} from './AbstractChatCompletionRunner';\nimport { Stream } from '../streaming';\nimport { LogProbs } from '../resources';\n\nexport interface ChatCompletionStreamEvents extends AbstractChatCompletionRunnerEvents {\n  content: (contentDelta: string, contentSnapshot: string) => void;\n  chunk: (chunk: ChatCompletionChunk, snapshot: ChatCompletionSnapshot) => void;\n}\n\nexport type ChatCompletionStreamParams = Omit<CompletionCreateParamsBase, 'stream'> & {\n  stream?: true;\n};\n\nexport class ChatCompletionStream\n  extends AbstractChatCompletionRunner<ChatCompletionStreamEvents>\n  implements AsyncIterable<ChatCompletionChunk>\n{\n  #currentChatCompletionSnapshot: ChatCompletionSnapshot | undefined;\n\n  get currentChatCompletionSnapshot(): ChatCompletionSnapshot | undefined {\n    return this.#currentChatCompletionSnapshot;\n  }\n\n  /**\n   * Intended for use on the frontend, consuming a stream produced with\n   * `.toReadableStream()` on the backend.\n   *\n   * Note that messages sent to the model do not appear in `.on('message')`\n   * in this context.\n   */\n  static fromReadableStream(stream: ReadableStream): ChatCompletionStream {\n    const runner = new ChatCompletionStream();\n    runner._run(() => runner._fromReadableStream(stream));\n    return runner;\n  }\n\n  static createChatCompletion(\n    completions: Completions,\n    params: ChatCompletionStreamParams,\n    options?: RequestOptions,\n  ): ChatCompletionStream {\n    const runner = new ChatCompletionStream();\n    runner._run(() =>\n      runner._runChatCompletion(\n        completions,\n        { ...params, stream: true },\n        { ...options, headers: { ...options?.headers, 'X-Stainless-Helper-Method': 'stream' } },\n      ),\n    );\n    return runner;\n  }\n\n  #beginRequest() {\n    if (this.ended) return;\n    this.#currentChatCompletionSnapshot = undefined;\n  }\n  #addChunk(chunk: ChatCompletionChunk) {\n    if (this.ended) return;\n    const completion = this.#accumulateChatCompletion(chunk);\n    this._emit('chunk', chunk, completion);\n    const delta = chunk.choices[0]?.delta?.content;\n    const snapshot = completion.choices[0]?.message;\n    if (delta != null && snapshot?.role === 'assistant' && snapshot?.content) {\n      this._emit('content', delta, snapshot.content);\n    }\n  }\n  #endRequest(): ChatCompletion {\n    if (this.ended) {\n      throw new TogetherError(`stream has ended, this shouldn't happen`);\n    }\n    const snapshot = this.#currentChatCompletionSnapshot;\n    if (!snapshot) {\n      throw new TogetherError(`request ended without sending any chunks`);\n    }\n    this.#currentChatCompletionSnapshot = undefined;\n    return finalizeChatCompletion(snapshot);\n  }\n\n  protected override async _createChatCompletion(\n    completions: Completions,\n    params: CompletionCreateParams,\n    options?: RequestOptions,\n  ): Promise<ChatCompletion> {\n    const signal = options?.signal;\n    if (signal) {\n      if (signal.aborted) this.controller.abort();\n      signal.addEventListener('abort', () => this.controller.abort());\n    }\n    this.#beginRequest();\n    const stream = await completions.create(\n      { ...params, stream: true },\n      { ...options, signal: this.controller.signal },\n    );\n    this._connected();\n    for await (const chunk of stream) {\n      this.#addChunk(chunk);\n    }\n    if (stream.controller.signal?.aborted) {\n      throw new APIUserAbortError();\n    }\n    return this._addChatCompletion(this.#endRequest());\n  }\n\n  protected async _fromReadableStream(\n    readableStream: ReadableStream,\n    options?: RequestOptions,\n  ): Promise<ChatCompletion> {\n    const signal = options?.signal;\n    if (signal) {\n      if (signal.aborted) this.controller.abort();\n      signal.addEventListener('abort', () => this.controller.abort());\n    }\n    this.#beginRequest();\n    this._connected();\n    const stream = Stream.fromReadableStream<ChatCompletionChunk>(readableStream, this.controller);\n    let chatId;\n    for await (const chunk of stream) {\n      if (chatId && chatId !== chunk.id) {\n        // A new request has been made.\n        this._addChatCompletion(this.#endRequest());\n      }\n\n      this.#addChunk(chunk);\n      chatId = chunk.id;\n    }\n    if (stream.controller.signal?.aborted) {\n      throw new APIUserAbortError();\n    }\n    return this._addChatCompletion(this.#endRequest());\n  }\n\n  #accumulateChatCompletion(chunk: ChatCompletionChunk): ChatCompletionSnapshot {\n    let snapshot = this.#currentChatCompletionSnapshot;\n    const { choices, ...rest } = chunk;\n    if (!snapshot) {\n      snapshot = this.#currentChatCompletionSnapshot = {\n        ...rest,\n        choices: [],\n      };\n    } else {\n      Object.assign(snapshot, rest);\n    }\n\n    for (const { delta, finish_reason, index, logprobs = null, ...other } of chunk.choices) {\n      let choice = snapshot.choices[index];\n      if (!choice) {\n        choice = snapshot.choices[index] = {\n          finish_reason,\n          index,\n          message: {},\n          logprobs: { token_ids: [], token_logprobs: [], tokens: [] },\n          ...other,\n        };\n      }\n\n      if (logprobs) {\n        console.log({ logprobs });\n        if (!choice.logprobs) {\n          choice.logprobs = { token_ids: [], token_logprobs: [], tokens: [] };\n        }\n        choice.logprobs.token_ids ??= [];\n        choice.logprobs.token_ids.push(delta.token_id ?? null);\n        choice.logprobs.token_logprobs ??= [];\n        choice.logprobs.token_logprobs.push(logprobs ?? null);\n        choice.logprobs.tokens ??= [];\n        choice.logprobs.tokens.push(delta.content ?? null);\n      }\n\n      if (finish_reason) choice.finish_reason = finish_reason;\n      Object.assign(choice, other);\n\n      if (!delta) continue; // Shouldn't happen; just in case.\n      const { content, function_call, role, tool_calls, ...rest } = delta;\n      Object.assign(choice.message, rest);\n\n      if (content) choice.message.content = (choice.message.content || '') + content;\n      if (role) choice.message.role = role;\n      if (function_call) {\n        if (!choice.message.function_call) {\n          choice.message.function_call = function_call;\n        } else {\n          if (function_call.name) choice.message.function_call.name = function_call.name;\n          if (function_call.arguments) {\n            choice.message.function_call.arguments ??= '';\n            choice.message.function_call.arguments += function_call.arguments;\n          }\n        }\n      }\n      if (tool_calls) {\n        if (!choice.message.tool_calls) choice.message.tool_calls = [];\n        for (const { index, id, type, function: fn, ...rest } of tool_calls) {\n          const tool_call = (choice.message.tool_calls[index] ??= {});\n          Object.assign(tool_call, rest);\n          if (id) tool_call.id = id;\n          if (type) tool_call.type = type;\n          if (fn) tool_call.function ??= { arguments: '' };\n          if (fn?.name) tool_call.function!.name = fn.name;\n          if (fn?.arguments) tool_call.function!.arguments += fn.arguments;\n        }\n      }\n    }\n    return snapshot;\n  }\n\n  [Symbol.asyncIterator](): AsyncIterator<ChatCompletionChunk> {\n    const pushQueue: ChatCompletionChunk[] = [];\n    const readQueue: {\n      resolve: (chunk: ChatCompletionChunk | undefined) => void;\n      reject: (err: unknown) => void;\n    }[] = [];\n    let done = false;\n\n    this.on('chunk', (chunk) => {\n      const reader = readQueue.shift();\n      if (reader) {\n        reader.resolve(chunk);\n      } else {\n        pushQueue.push(chunk);\n      }\n    });\n\n    this.on('end', () => {\n      done = true;\n      for (const reader of readQueue) {\n        reader.resolve(undefined);\n      }\n      readQueue.length = 0;\n    });\n\n    this.on('abort', (err) => {\n      done = true;\n      for (const reader of readQueue) {\n        reader.reject(err);\n      }\n      readQueue.length = 0;\n    });\n\n    this.on('error', (err) => {\n      done = true;\n      for (const reader of readQueue) {\n        reader.reject(err);\n      }\n      readQueue.length = 0;\n    });\n\n    return {\n      next: async (): Promise<IteratorResult<ChatCompletionChunk>> => {\n        if (!pushQueue.length) {\n          if (done) {\n            return { value: undefined, done: true };\n          }\n          return new Promise<ChatCompletionChunk | undefined>((resolve, reject) =>\n            readQueue.push({ resolve, reject }),\n          ).then((chunk) => (chunk ? { value: chunk, done: false } : { value: undefined, done: true }));\n        }\n        const chunk = pushQueue.shift()!;\n        return { value: chunk, done: false };\n      },\n      return: async () => {\n        this.abort();\n        return { value: undefined, done: true };\n      },\n    };\n  }\n\n  toReadableStream(): ReadableStream {\n    const stream = new Stream(this[Symbol.asyncIterator].bind(this), this.controller);\n    return stream.toReadableStream();\n  }\n}\n\nfunction finalizeChatCompletion(snapshot: ChatCompletionSnapshot): ChatCompletion {\n  const { id, choices, created, model, system_fingerprint, ...rest } = snapshot;\n  return {\n    ...rest,\n    id,\n    choices: choices.map(\n      ({ message, finish_reason, index, logprobs, ...choiceRest }): ChatCompletion.Choice => {\n        if (!finish_reason) throw new TogetherError(`missing finish_reason for choice ${index}`);\n        const { content = null, function_call, tool_calls, ...messageRest } = message;\n        const role = message.role as 'assistant'; // this is what we expect; in theory it could be different which would make our types a slight lie but would be fine.\n        if (!role) throw new TogetherError(`missing role for choice ${index}`);\n        if (function_call) {\n          const { arguments: args, name } = function_call;\n          if (args == null) throw new TogetherError(`missing function_call.arguments for choice ${index}`);\n          if (!name) throw new TogetherError(`missing function_call.name for choice ${index}`);\n          return {\n            ...choiceRest,\n            message: { content, function_call: { arguments: args, name }, role },\n            finish_reason,\n            index,\n            logprobs,\n          };\n        }\n        if (tool_calls) {\n          return {\n            ...choiceRest,\n            index,\n            finish_reason,\n            logprobs,\n            message: {\n              ...messageRest,\n              role,\n              content,\n              // @ts-ignore\n              tool_calls: tool_calls.map((tool_call, i) => {\n                const { function: fn, type, id, ...toolRest } = tool_call;\n                const { arguments: args, name, ...fnRest } = fn || {};\n                if (id == null)\n                  throw new TogetherError(`missing choices[${index}].tool_calls[${i}].id\\n${str(snapshot)}`);\n                if (type == null)\n                  throw new TogetherError(\n                    `missing choices[${index}].tool_calls[${i}].type\\n${str(snapshot)}`,\n                  );\n                if (name == null)\n                  throw new TogetherError(\n                    `missing choices[${index}].tool_calls[${i}].function.name\\n${str(snapshot)}`,\n                  );\n                if (args == null)\n                  throw new TogetherError(\n                    `missing choices[${index}].tool_calls[${i}].function.arguments\\n${str(snapshot)}`,\n                  );\n\n                return { ...toolRest, id, type, function: { ...fnRest, name, arguments: args } };\n              }),\n            },\n          };\n        }\n        return {\n          ...choiceRest,\n          message: { ...messageRest, content, role },\n          finish_reason,\n          index,\n          logprobs,\n        };\n      },\n    ),\n    created,\n    model,\n    object: 'chat.completion',\n    ...(system_fingerprint ? { system_fingerprint } : {}),\n  };\n}\n\nfunction str(x: unknown) {\n  return JSON.stringify(x);\n}\n\n/**\n * Represents a streamed chunk of a chat completion response returned by model,\n * based on the provided input.\n */\nexport interface ChatCompletionSnapshot {\n  /**\n   * A unique identifier for the chat completion.\n   */\n  id: string;\n\n  /**\n   * A list of chat completion choices. Can be more than one if `n` is greater\n   * than 1.\n   */\n  choices: Array<ChatCompletionSnapshot.Choice>;\n\n  /**\n   * The Unix timestamp (in seconds) of when the chat completion was created.\n   */\n  created: number;\n\n  /**\n   * The model to generate the completion.\n   */\n  model: string;\n\n  // Note we do not include an \"object\" type on the snapshot,\n  // because the object is not a valid \"chat.completion\" until finalized.\n  // object: 'chat.completion';\n\n  /**\n   * This fingerprint represents the backend configuration that the model runs with.\n   *\n   * Can be used in conjunction with the `seed` request parameter to understand when\n   * backend changes have been made that might impact determinism.\n   */\n  system_fingerprint?: string;\n}\n\nexport namespace ChatCompletionSnapshot {\n  export interface Choice {\n    /**\n     * A chat completion delta generated by streamed model responses.\n     */\n    message: Choice.Message;\n\n    /**\n     * The reason the model stopped generating tokens. This will be `stop` if the model\n     * hit a natural stop point or a provided stop sequence, `length` if the maximum\n     * number of tokens specified in the request was reached, `content_filter` if\n     * content was omitted due to a flag from our content filters, or `function_call`\n     * if the model called a function.\n     */\n    finish_reason: ChatCompletion.Choice['finish_reason'] | null;\n\n    /**\n     * Log probability information for the choice.\n     */\n    logprobs: LogProbs | null;\n\n    /**\n     * The index of the choice in the list of choices.\n     */\n    index: number;\n  }\n\n  export namespace Choice {\n    /**\n     * A chat completion delta generated by streamed model responses.\n     */\n    export interface Message {\n      /**\n       * The contents of the chunk message.\n       */\n      content?: string | null;\n\n      /**\n       * The name and arguments of a function that should be called, as generated by the\n       * model.\n       */\n      function_call?: Message.FunctionCall;\n\n      tool_calls?: Array<Message.ToolCall>;\n\n      /**\n       * The role of the author of this message.\n       */\n      role?: 'system' | 'user' | 'assistant' | 'function' | 'tool';\n    }\n\n    export namespace Message {\n      export interface ToolCall {\n        /**\n         * The ID of the tool call.\n         */\n        id?: string;\n\n        function?: ToolCall.Function;\n\n        /**\n         * The type of the tool.\n         */\n        type?: 'function';\n      }\n\n      export namespace ToolCall {\n        export interface Function {\n          /**\n           * The arguments to call the function with, as generated by the model in JSON\n           * format. Note that the model does not always generate valid JSON, and may\n           * hallucinate parameters not defined by your function schema. Validate the\n           * arguments in your code before calling your function.\n           */\n          arguments?: string;\n\n          /**\n           * The name of the function to call.\n           */\n          name?: string;\n        }\n      }\n\n      /**\n       * The name and arguments of a function that should be called, as generated by the\n       * model.\n       */\n      export interface FunctionCall {\n        /**\n         * The arguments to call the function with, as generated by the model in JSON\n         * format. Note that the model does not always generate valid JSON, and may\n         * hallucinate parameters not defined by your function schema. Validate the\n         * arguments in your code before calling your function.\n         */\n        arguments?: string;\n\n        /**\n         * The name of the function to call.\n         */\n        name?: string;\n      }\n    }\n  }\n}\n","import { RequestOptions } from '../internal/request-options';\nimport {\n  type Completions,\n  type ChatCompletion,\n  type ChatCompletionMessage,\n  type ChatCompletionMessageParam,\n  type CompletionCreateParams,\n  type ChatCompletionTool,\n} from '../resources/chat/completions';\nimport { APIUserAbortError, TogetherError } from '../error';\nimport {\n  type RunnableFunction,\n  isRunnableFunctionWithParse,\n  type BaseFunctionsArgs,\n} from './RunnableFunction';\nimport { ChatCompletionFunctionRunnerParams, ChatCompletionToolRunnerParams } from './ChatCompletionRunner';\nimport {\n  ChatCompletionStreamingFunctionRunnerParams,\n  ChatCompletionStreamingToolRunnerParams,\n} from './ChatCompletionStreamingRunner';\nimport { isAssistantMessage, isFunctionMessage, isToolMessage } from './chatCompletionUtils';\nimport { ChatCompletionUsage } from '../resources/chat/completions';\n\nconst DEFAULT_MAX_CHAT_COMPLETIONS = 10;\nexport interface RunnerOptions extends RequestOptions {\n  /** How many requests to make before canceling. Default 10. */\n  maxChatCompletions?: number;\n}\n\nexport abstract class AbstractChatCompletionRunner<\n  Events extends CustomEvents<any> = AbstractChatCompletionRunnerEvents,\n> {\n  controller: AbortController = new AbortController();\n\n  #connectedPromise: Promise<void>;\n  #resolveConnectedPromise: () => void = () => {};\n  #rejectConnectedPromise: (error: TogetherError) => void = () => {};\n\n  #endPromise: Promise<void>;\n  #resolveEndPromise: () => void = () => {};\n  #rejectEndPromise: (error: TogetherError) => void = () => {};\n\n  #listeners: { [Event in keyof Events]?: ListenersForEvent<Events, Event> } = {};\n\n  protected _chatCompletions: ChatCompletion[] = [];\n  messages: ChatCompletionMessageParam[] = [];\n\n  #ended = false;\n  #errored = false;\n  #aborted = false;\n  #catchingPromiseCreated = false;\n\n  constructor() {\n    this.#connectedPromise = new Promise<void>((resolve, reject) => {\n      this.#resolveConnectedPromise = resolve;\n      this.#rejectConnectedPromise = reject;\n    });\n\n    this.#endPromise = new Promise<void>((resolve, reject) => {\n      this.#resolveEndPromise = resolve;\n      this.#rejectEndPromise = reject;\n    });\n\n    // Don't let these promises cause unhandled rejection errors.\n    // we will manually cause an unhandled rejection error later\n    // if the user hasn't registered any error listener or called\n    // any promise-returning method.\n    this.#connectedPromise.catch(() => {});\n    this.#endPromise.catch(() => {});\n  }\n\n  protected _run(executor: () => Promise<any>) {\n    // Unfortunately if we call `executor()` immediately we get runtime errors about\n    // references to `this` before the `super()` constructor call returns.\n    setTimeout(() => {\n      executor().then(() => {\n        this._emitFinal();\n        this._emit('end');\n      }, this.#handleError);\n    }, 0);\n  }\n\n  protected _addChatCompletion(chatCompletion: ChatCompletion): ChatCompletion {\n    this._chatCompletions.push(chatCompletion);\n    this._emit('chatCompletion', chatCompletion);\n    const message = chatCompletion.choices[0]?.message;\n    if (message) this._addMessage(message as ChatCompletionMessageParam);\n    return chatCompletion;\n  }\n\n  protected _addMessage(message: ChatCompletionMessageParam, emit = true) {\n    if (!('content' in message)) message.content = null;\n\n    this.messages.push(message);\n\n    if (emit) {\n      this._emit('message', message);\n      if ((isFunctionMessage(message) || isToolMessage(message)) && message.content) {\n        // Note, this assumes that {role: 'tool', content: } is always the result of a call of tool of type=function.\n        this._emit('functionCallResult', message.content as string);\n      } else if (isAssistantMessage(message) && message.function_call) {\n        this._emit('functionCall', message.function_call);\n      } else if (isAssistantMessage(message) && message.tool_calls) {\n        for (const tool_call of message.tool_calls) {\n          if (tool_call.type === 'function') {\n            this._emit('functionCall', tool_call.function);\n          }\n        }\n      }\n    }\n  }\n\n  protected _connected() {\n    if (this.ended) return;\n    this.#resolveConnectedPromise();\n    this._emit('connect');\n  }\n\n  get ended(): boolean {\n    return this.#ended;\n  }\n\n  get errored(): boolean {\n    return this.#errored;\n  }\n\n  get aborted(): boolean {\n    return this.#aborted;\n  }\n\n  abort() {\n    this.controller.abort();\n  }\n\n  /**\n   * Adds the listener function to the end of the listeners array for the event.\n   * No checks are made to see if the listener has already been added. Multiple calls passing\n   * the same combination of event and listener will result in the listener being added, and\n   * called, multiple times.\n   * @returns this ChatCompletionStream, so that calls can be chained\n   */\n  on<Event extends keyof Events>(event: Event, listener: ListenerForEvent<Events, Event>): this {\n    const listeners: ListenersForEvent<Events, Event> =\n      this.#listeners[event] || (this.#listeners[event] = []);\n    listeners.push({ listener });\n    return this;\n  }\n\n  /**\n   * Removes the specified listener from the listener array for the event.\n   * off() will remove, at most, one instance of a listener from the listener array. If any single\n   * listener has been added multiple times to the listener array for the specified event, then\n   * off() must be called multiple times to remove each instance.\n   * @returns this ChatCompletionStream, so that calls can be chained\n   */\n  off<Event extends keyof Events>(event: Event, listener: ListenerForEvent<Events, Event>): this {\n    const listeners = this.#listeners[event];\n    if (!listeners) return this;\n    const index = listeners.findIndex((l) => l.listener === listener);\n    if (index >= 0) listeners.splice(index, 1);\n    return this;\n  }\n\n  /**\n   * Adds a one-time listener function for the event. The next time the event is triggered,\n   * this listener is removed and then invoked.\n   * @returns this ChatCompletionStream, so that calls can be chained\n   */\n  once<Event extends keyof Events>(event: Event, listener: ListenerForEvent<Events, Event>): this {\n    const listeners: ListenersForEvent<Events, Event> =\n      this.#listeners[event] || (this.#listeners[event] = []);\n    listeners.push({ listener, once: true });\n    return this;\n  }\n\n  /**\n   * This is similar to `.once()`, but returns a Promise that resolves the next time\n   * the event is triggered, instead of calling a listener callback.\n   * @returns a Promise that resolves the next time given event is triggered,\n   * or rejects if an error is emitted.  (If you request the 'error' event,\n   * returns a promise that resolves with the error).\n   *\n   * Example:\n   *\n   *   const message = await stream.emitted('message') // rejects if the stream errors\n   */\n  emitted<Event extends keyof Events>(\n    event: Event,\n  ): Promise<\n    EventParameters<Events, Event> extends [infer Param] ? Param\n    : EventParameters<Events, Event> extends [] ? void\n    : EventParameters<Events, Event>\n  > {\n    return new Promise((resolve, reject) => {\n      this.#catchingPromiseCreated = true;\n      if (event !== 'error') this.once('error', reject);\n      this.once(event, resolve as any);\n    });\n  }\n\n  async done(): Promise<void> {\n    this.#catchingPromiseCreated = true;\n    await this.#endPromise;\n  }\n\n  /**\n   * @returns a promise that resolves with the final ChatCompletion, or rejects\n   * if an error occurred or the stream ended prematurely without producing a ChatCompletion.\n   */\n  async finalChatCompletion(): Promise<ChatCompletion> {\n    await this.done();\n    const completion = this._chatCompletions[this._chatCompletions.length - 1];\n    if (!completion) throw new TogetherError('stream ended without producing a ChatCompletion');\n    return completion;\n  }\n\n  #getFinalContent(): string | null {\n    return this.#getFinalMessage().content ?? null;\n  }\n\n  /**\n   * @returns a promise that resolves with the content of the final ChatCompletionMessage, or rejects\n   * if an error occurred or the stream ended prematurely without producing a ChatCompletionMessage.\n   */\n  async finalContent(): Promise<string | null> {\n    await this.done();\n    return this.#getFinalContent();\n  }\n\n  #getFinalMessage(): ChatCompletionMessage {\n    let i = this.messages.length;\n    while (i-- > 0) {\n      const message = this.messages[i];\n      if (isAssistantMessage(message)) {\n        return { ...message, content: message.content ?? null };\n      }\n    }\n    throw new TogetherError('stream ended without producing a ChatCompletionMessage with role=assistant');\n  }\n\n  /**\n   * @returns a promise that resolves with the the final assistant ChatCompletionMessage response,\n   * or rejects if an error occurred or the stream ended prematurely without producing a ChatCompletionMessage.\n   */\n  async finalMessage(): Promise<ChatCompletionMessage> {\n    await this.done();\n    return this.#getFinalMessage();\n  }\n\n  #getFinalFunctionCall(): ChatCompletionMessage.FunctionCall | undefined {\n    for (let i = this.messages.length - 1; i >= 0; i--) {\n      const message = this.messages[i];\n      if (isAssistantMessage(message) && message?.function_call) {\n        return message.function_call;\n      }\n      if (isAssistantMessage(message) && message?.tool_calls?.length) {\n        return message.tool_calls.at(-1)?.function;\n      }\n    }\n\n    return;\n  }\n\n  /**\n   * @returns a promise that resolves with the content of the final FunctionCall, or rejects\n   * if an error occurred or the stream ended prematurely without producing a ChatCompletionMessage.\n   */\n  async finalFunctionCall(): Promise<ChatCompletionMessage.FunctionCall | undefined> {\n    await this.done();\n    return this.#getFinalFunctionCall();\n  }\n\n  #getFinalFunctionCallResult(): string | undefined {\n    for (let i = this.messages.length - 1; i >= 0; i--) {\n      const message = this.messages[i];\n      if (isFunctionMessage(message) && message.content != null) {\n        return message.content;\n      }\n      if (\n        isToolMessage(message) &&\n        message.content != null &&\n        this.messages.some(\n          (x) =>\n            x.role === 'assistant' &&\n            x.tool_calls?.some((y) => y.type === 'function' && y.id === message.tool_call_id),\n        )\n      ) {\n        return message.content;\n      }\n    }\n\n    return;\n  }\n\n  async finalFunctionCallResult(): Promise<string | undefined> {\n    await this.done();\n    return this.#getFinalFunctionCallResult();\n  }\n\n  #calculateTotalUsage(): ChatCompletionUsage {\n    const total: ChatCompletionUsage = {\n      completion_tokens: 0,\n      prompt_tokens: 0,\n      total_tokens: 0,\n    };\n    for (const { usage } of this._chatCompletions) {\n      if (usage) {\n        total.completion_tokens += usage.completion_tokens;\n        total.prompt_tokens += usage.prompt_tokens;\n        total.total_tokens += usage.total_tokens;\n      }\n    }\n    return total;\n  }\n\n  async totalUsage(): Promise<ChatCompletionUsage> {\n    await this.done();\n    return this.#calculateTotalUsage();\n  }\n\n  allChatCompletions(): ChatCompletion[] {\n    return [...this._chatCompletions];\n  }\n\n  #handleError = (error: unknown) => {\n    this.#errored = true;\n    if (error instanceof Error && error.name === 'AbortError') {\n      error = new APIUserAbortError();\n    }\n    if (error instanceof APIUserAbortError) {\n      this.#aborted = true;\n      return this._emit('abort', error);\n    }\n    if (error instanceof TogetherError) {\n      return this._emit('error', error);\n    }\n    if (error instanceof Error) {\n      // @ts-ignore\n      const TogetherError: TogetherError = new TogetherError(error.message);\n      // @ts-ignore\n      TogetherError.cause = error;\n      return this._emit('error', TogetherError);\n    }\n    return this._emit('error', new TogetherError(String(error)));\n  };\n\n  protected _emit<Event extends keyof Events>(event: Event, ...args: EventParameters<Events, Event>) {\n    // make sure we don't emit any events after end\n    if (this.#ended) {\n      return;\n    }\n\n    if (event === 'end') {\n      this.#ended = true;\n      this.#resolveEndPromise();\n    }\n\n    const listeners: ListenersForEvent<Events, Event> | undefined = this.#listeners[event];\n    if (listeners) {\n      this.#listeners[event] = listeners.filter((l) => !l.once) as any;\n      listeners.forEach(({ listener }: any) => listener(...args));\n    }\n\n    if (event === 'abort') {\n      const error = args[0] as APIUserAbortError;\n      if (!this.#catchingPromiseCreated && !listeners?.length) {\n        Promise.reject(error);\n      }\n      this.#rejectConnectedPromise(error);\n      this.#rejectEndPromise(error);\n      this._emit('end');\n      return;\n    }\n\n    if (event === 'error') {\n      // NOTE: _emit('error', error) should only be called from #handleError().\n\n      const error = args[0] as TogetherError;\n      if (!this.#catchingPromiseCreated && !listeners?.length) {\n        // Trigger an unhandled rejection if the user hasn't registered any error handlers.\n        // If you are seeing stack traces here, make sure to handle errors via either:\n        // - runner.on('error', () => ...)\n        // - await runner.done()\n        // - await runner.finalChatCompletion()\n        // - etc.\n        Promise.reject(error);\n      }\n      this.#rejectConnectedPromise(error);\n      this.#rejectEndPromise(error);\n      this._emit('end');\n    }\n  }\n\n  protected _emitFinal() {\n    const completion = this._chatCompletions[this._chatCompletions.length - 1];\n    if (completion) this._emit('finalChatCompletion', completion);\n    const finalMessage = this.#getFinalMessage();\n    if (finalMessage) this._emit('finalMessage', finalMessage);\n    const finalContent = this.#getFinalContent();\n    if (finalContent) this._emit('finalContent', finalContent);\n\n    const finalFunctionCall = this.#getFinalFunctionCall();\n    if (finalFunctionCall) this._emit('finalFunctionCall', finalFunctionCall);\n\n    const finalFunctionCallResult = this.#getFinalFunctionCallResult();\n    if (finalFunctionCallResult != null) this._emit('finalFunctionCallResult', finalFunctionCallResult);\n\n    if (this._chatCompletions.some((c) => c.usage)) {\n      this._emit('totalUsage', this.#calculateTotalUsage());\n    }\n  }\n\n  #validateParams(params: CompletionCreateParams): void {\n    if (params.n != null && params.n > 1) {\n      throw new TogetherError(\n        'ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.',\n      );\n    }\n  }\n\n  protected async _createChatCompletion(\n    completions: Completions,\n    params: CompletionCreateParams,\n    options?: RequestOptions,\n  ): Promise<ChatCompletion> {\n    const signal = options?.signal;\n    if (signal) {\n      if (signal.aborted) this.controller.abort();\n      signal.addEventListener('abort', () => this.controller.abort());\n    }\n    this.#validateParams(params);\n\n    const chatCompletion = await completions.create(\n      { ...params, stream: false },\n      { ...options, signal: this.controller.signal },\n    );\n    this._connected();\n    return this._addChatCompletion(chatCompletion);\n  }\n\n  protected async _runChatCompletion(\n    completions: Completions,\n    params: CompletionCreateParams,\n    options?: RequestOptions,\n  ): Promise<ChatCompletion> {\n    for (const message of params.messages) {\n      this._addMessage(\n        // @ts-ignore\n        message,\n        false,\n      );\n    }\n    return await this._createChatCompletion(completions, params, options);\n  }\n\n  protected async _runFunctions<FunctionsArgs extends BaseFunctionsArgs>(\n    completions: Completions,\n    params:\n      | ChatCompletionFunctionRunnerParams<FunctionsArgs>\n      | ChatCompletionStreamingFunctionRunnerParams<FunctionsArgs>,\n    options?: RunnerOptions,\n  ) {\n    const role = 'function' as const;\n    const { function_call = 'auto', stream, ...restParams } = params;\n    const singleFunctionToCall = typeof function_call !== 'string' && function_call?.name;\n    const { maxChatCompletions = DEFAULT_MAX_CHAT_COMPLETIONS } = options || {};\n\n    const functionsByName: Record<string, RunnableFunction<any>> = {};\n    for (const f of params.functions) {\n      functionsByName[f.name || f.function.name] = f;\n    }\n\n    // @ts-ignore\n    const functions: CompletionCreateParams.Function[] = params.functions.map(\n      // @ts-ignore\n      (f): CompletionCreateParams.Function => ({\n        name: f.name || f.function.name,\n        parameters: f.parameters as Record<string, unknown>,\n        description: f.description,\n      }),\n    );\n\n    for (const message of params.messages) {\n      this._addMessage(\n        // @ts-ignore\n        message,\n        false,\n      );\n    }\n\n    for (let i = 0; i < maxChatCompletions; ++i) {\n      const chatCompletion: ChatCompletion = await this._createChatCompletion(\n        completions,\n        {\n          ...restParams,\n          function_call,\n          functions,\n          // @ts-ignore\n          messages: [...this.messages],\n        },\n        options,\n      );\n      const message = chatCompletion.choices[0]?.message;\n      if (!message) {\n        throw new TogetherError(`missing message in ChatCompletion response`);\n      }\n      if (!message.function_call) return;\n      const { name, arguments: args } = message.function_call;\n      const fn = functionsByName[name];\n      if (!fn) {\n        const content = `Invalid function_call: ${JSON.stringify(name)}. Available options are: ${functions\n          .map((f) => JSON.stringify(f.name))\n          .join(', ')}. Please try again`;\n\n        this._addMessage({ role, name, content });\n        continue;\n      } else if (singleFunctionToCall && singleFunctionToCall !== name) {\n        const content = `Invalid function_call: ${JSON.stringify(name)}. ${JSON.stringify(\n          singleFunctionToCall,\n        )} requested. Please try again`;\n\n        this._addMessage({ role, name, content });\n        continue;\n      }\n\n      let parsed;\n      try {\n        parsed = isRunnableFunctionWithParse(fn) ? await fn.parse(args) : args;\n      } catch (error) {\n        this._addMessage({\n          role,\n          name,\n          content: error instanceof Error ? error.message : String(error),\n        });\n        continue;\n      }\n\n      // @ts-expect-error it can't rule out `never` type.\n      const rawContent = await fn.function(parsed, this);\n      const content = this.#stringifyFunctionCallResult(rawContent);\n\n      this._addMessage({ role, name, content });\n\n      if (singleFunctionToCall) return;\n    }\n  }\n\n  protected async _runTools<FunctionsArgs extends BaseFunctionsArgs>(\n    completions: Completions,\n    params:\n      | ChatCompletionToolRunnerParams<FunctionsArgs>\n      | ChatCompletionStreamingToolRunnerParams<FunctionsArgs>,\n    options?: RunnerOptions,\n  ) {\n    const role = 'tool' as const;\n    const { tool_choice = 'auto', stream, ...restParams } = params;\n    const singleFunctionToCall = typeof tool_choice !== 'string' && tool_choice?.function?.name;\n    const { maxChatCompletions = DEFAULT_MAX_CHAT_COMPLETIONS } = options || {};\n\n    const functionsByName: Record<string, RunnableFunction<any>> = {};\n    for (const f of params.tools) {\n      if (f.type === 'function') {\n        functionsByName[f.function.name || f.function.function.name] = f.function;\n      }\n    }\n\n    const tools: ChatCompletionTool[] =\n      'tools' in params ?\n        params.tools.map((t) =>\n          t.type === 'function' ?\n            {\n              type: 'function',\n              function: {\n                name: t.function.name || t.function.function.name,\n                parameters: t.function.parameters as Record<string, unknown>,\n                description: t.function.description,\n              },\n            }\n          : (t as unknown as ChatCompletionTool),\n        )\n      : (undefined as any);\n\n    for (const message of params.messages) {\n      this._addMessage(\n        // @ts-ignore\n        message,\n        false,\n      );\n    }\n\n    for (let i = 0; i < maxChatCompletions; ++i) {\n      const chatCompletion: ChatCompletion = await this._createChatCompletion(\n        completions,\n        {\n          ...restParams,\n          tool_choice,\n          tools,\n          // @ts-ignore\n          messages: [...this.messages],\n        },\n        options,\n      );\n      const message = chatCompletion.choices[0]?.message;\n      if (!message) {\n        throw new TogetherError(`missing message in ChatCompletion response`);\n      }\n      if (!message.tool_calls) {\n        return;\n      }\n\n      for (const tool_call of message.tool_calls) {\n        if (tool_call.type !== 'function') continue;\n        const tool_call_id = tool_call.id;\n        const { name, arguments: args } = tool_call.function;\n        const fn = functionsByName[name];\n\n        if (!fn) {\n          const content = `Invalid tool_call: ${JSON.stringify(name)}. Available options are: ${tools\n            .map((f) => JSON.stringify(f.function.name))\n            .join(', ')}. Please try again`;\n\n          this._addMessage({ role, tool_call_id, content });\n          continue;\n        } else if (singleFunctionToCall && singleFunctionToCall !== name) {\n          const content = `Invalid tool_call: ${JSON.stringify(name)}. ${JSON.stringify(\n            singleFunctionToCall,\n          )} requested. Please try again`;\n\n          this._addMessage({ role, tool_call_id, content });\n          continue;\n        }\n\n        let parsed;\n        try {\n          parsed = isRunnableFunctionWithParse(fn) ? await fn.parse(args) : args;\n        } catch (error) {\n          const content = error instanceof Error ? error.message : String(error);\n          this._addMessage({ role, tool_call_id, content });\n          continue;\n        }\n\n        // @ts-expect-error it can't rule out `never` type.\n        const rawContent = await fn.function(parsed, this);\n        const content = this.#stringifyFunctionCallResult(rawContent);\n        this._addMessage({ role, tool_call_id, content });\n\n        if (singleFunctionToCall) {\n          return;\n        }\n      }\n    }\n\n    return;\n  }\n\n  #stringifyFunctionCallResult(rawContent: unknown): string {\n    return (\n      typeof rawContent === 'string' ? rawContent\n      : rawContent === undefined ? 'undefined'\n      : JSON.stringify(rawContent)\n    );\n  }\n}\n\ntype CustomEvents<Event extends string> = {\n  [k in Event]: k extends keyof AbstractChatCompletionRunnerEvents ? AbstractChatCompletionRunnerEvents[k]\n  : (...args: any[]) => void;\n};\n\ntype ListenerForEvent<Events extends CustomEvents<any>, Event extends keyof Events> = Event extends (\n  keyof AbstractChatCompletionRunnerEvents\n) ?\n  AbstractChatCompletionRunnerEvents[Event]\n: Events[Event];\n\ntype ListenersForEvent<Events extends CustomEvents<any>, Event extends keyof Events> = Array<{\n  listener: ListenerForEvent<Events, Event>;\n  once?: boolean;\n}>;\ntype EventParameters<Events extends CustomEvents<any>, Event extends keyof Events> = Parameters<\n  ListenerForEvent<Events, Event>\n>;\n\nexport interface AbstractChatCompletionRunnerEvents {\n  connect: () => void;\n  functionCall: (functionCall: ChatCompletionMessage.FunctionCall) => void;\n  message: (message: ChatCompletionMessageParam) => void;\n  chatCompletion: (completion: ChatCompletion) => void;\n  finalContent: (contentSnapshot: string) => void;\n  finalMessage: (message: ChatCompletionMessageParam) => void;\n  finalChatCompletion: (completion: ChatCompletion) => void;\n  finalFunctionCall: (functionCall: ChatCompletionMessage.FunctionCall) => void;\n  functionCallResult: (content: string) => void;\n  finalFunctionCallResult: (content: string) => void;\n  error: (error: TogetherError) => void;\n  abort: (error: APIUserAbortError) => void;\n  end: () => void;\n  totalUsage: (usage: ChatCompletionUsage) => void;\n}\n","import { concatBytes, decodeUTF8, encodeUTF8 } from '../utils/bytes';\n\nexport type Bytes = string | ArrayBuffer | Uint8Array | null | undefined;\n\n/**\n * A re-implementation of httpx's `LineDecoder` in Python that handles incrementally\n * reading lines from text.\n *\n * https://github.com/encode/httpx/blob/920333ea98118e9cf617f246905d7b202510941c/httpx/_decoders.py#L258\n */\nexport class LineDecoder {\n  // prettier-ignore\n  static NEWLINE_CHARS = new Set(['\\n', '\\r']);\n  static NEWLINE_REGEXP = /\\r\\n|[\\n\\r]/g;\n\n  #buffer: Uint8Array;\n  #carriageReturnIndex: number | null;\n\n  constructor() {\n    this.#buffer = new Uint8Array();\n    this.#carriageReturnIndex = null;\n  }\n\n  decode(chunk: Bytes): string[] {\n    if (chunk == null) {\n      return [];\n    }\n\n    const binaryChunk =\n      chunk instanceof ArrayBuffer ? new Uint8Array(chunk)\n      : typeof chunk === 'string' ? encodeUTF8(chunk)\n      : chunk;\n\n    this.#buffer = concatBytes([this.#buffer, binaryChunk]);\n\n    const lines: string[] = [];\n    let patternIndex;\n    while ((patternIndex = findNewlineIndex(this.#buffer, this.#carriageReturnIndex)) != null) {\n      if (patternIndex.carriage && this.#carriageReturnIndex == null) {\n        // skip until we either get a corresponding `\\n`, a new `\\r` or nothing\n        this.#carriageReturnIndex = patternIndex.index;\n        continue;\n      }\n\n      // we got double \\r or \\rtext\\n\n      if (\n        this.#carriageReturnIndex != null &&\n        (patternIndex.index !== this.#carriageReturnIndex + 1 || patternIndex.carriage)\n      ) {\n        lines.push(decodeUTF8(this.#buffer.subarray(0, this.#carriageReturnIndex - 1)));\n        this.#buffer = this.#buffer.subarray(this.#carriageReturnIndex);\n        this.#carriageReturnIndex = null;\n        continue;\n      }\n\n      const endIndex =\n        this.#carriageReturnIndex !== null ? patternIndex.preceding - 1 : patternIndex.preceding;\n\n      const line = decodeUTF8(this.#buffer.subarray(0, endIndex));\n      lines.push(line);\n\n      this.#buffer = this.#buffer.subarray(patternIndex.index);\n      this.#carriageReturnIndex = null;\n    }\n\n    return lines;\n  }\n\n  flush(): string[] {\n    if (!this.#buffer.length) {\n      return [];\n    }\n    return this.decode('\\n');\n  }\n}\n\n/**\n * This function searches the buffer for the end patterns, (\\r or \\n)\n * and returns an object with the index preceding the matched newline and the\n * index after the newline char. `null` is returned if no new line is found.\n *\n * ```ts\n * findNewLineIndex('abc\\ndef') -> { preceding: 2, index: 3 }\n * ```\n */\nfunction findNewlineIndex(\n  buffer: Uint8Array,\n  startIndex: number | null,\n): { preceding: number; index: number; carriage: boolean } | null {\n  const newline = 0x0a; // \\n\n  const carriage = 0x0d; // \\r\n\n  for (let i = startIndex ?? 0; i < buffer.length; i++) {\n    if (buffer[i] === newline) {\n      return { preceding: i, index: i + 1, carriage: false };\n    }\n\n    if (buffer[i] === carriage) {\n      return { preceding: i, index: i + 1, carriage: true };\n    }\n  }\n\n  return null;\n}\n\nexport function findDoubleNewlineIndex(buffer: Uint8Array): number {\n  // This function searches the buffer for the end patterns (\\r\\r, \\n\\n, \\r\\n\\r\\n)\n  // and returns the index right after the first occurrence of any pattern,\n  // or -1 if none of the patterns are found.\n  const newline = 0x0a; // \\n\n  const carriage = 0x0d; // \\r\n\n  for (let i = 0; i < buffer.length - 1; i++) {\n    if (buffer[i] === newline && buffer[i + 1] === newline) {\n      // \\n\\n\n      return i + 2;\n    }\n    if (buffer[i] === carriage && buffer[i + 1] === carriage) {\n      // \\r\\r\n      return i + 2;\n    }\n    if (\n      buffer[i] === carriage &&\n      buffer[i + 1] === newline &&\n      i + 3 < buffer.length &&\n      buffer[i + 2] === carriage &&\n      buffer[i + 3] === newline\n    ) {\n      // \\r\\n\\r\\n\n      return i + 4;\n    }\n  }\n\n  return -1;\n}\n","import { z } from \"zod\";\n\n// Schema for a processed receipt\nexport const ProcessedReceiptSchema = z.object({\n  id: z.string(),\n  fileName: z.string(),\n  date: z.string(),\n  vendor: z.string(),\n  category: z.string(),\n  paymentMethod: z.string(),\n  taxAmount: z.number(),\n  amount: z.number(),\n  currency: z.string().default('USD'),\n  originalAmount: z.number().optional(),\n  originalTaxAmount: z.number().optional(),\n  exchangeRate: z.number().optional(),\n  thumbnail: z.string(),\n  base64: z.string(),\n  mimeType: z.string(),\n});\n\n// Type exports\nexport type ProcessedReceipt = z.infer<typeof ProcessedReceiptSchema>;\n\n// Storage-optimized version without large base64 data\nexport interface StoredReceipt {\n  id: string;\n  fileName: string;\n  date: string;\n  vendor: string;\n  category: string;\n  paymentMethod: string;\n  taxAmount: number;\n  amount: number;\n  currency?: string;\n  originalAmount?: number;\n  originalTaxAmount?: number;\n  exchangeRate?: number;\n  mimeType: string;\n}\n\n// Status for uploaded files\nexport type FileStatus = 'processing' | 'receipt' | 'not-receipt' | 'error';\n\nexport interface UploadedFile {\n  id: string;\n  name: string;\n  file: File;\n  status: FileStatus;\n  receipt?: ProcessedReceipt;\n  /** Error message - only present when status === 'error' */\n  error?: string;\n  base64?: string;\n  mimeType?: string;\n}\n\nexport interface SpendingCategory {\n  name: string;\n  amount: number;\n  percentage: number;\n}\n\nexport interface SpendingBreakdown {\n  categories: SpendingCategory[];\n}","import { TogetherError } from './error';\nimport { type ReadableStream } from '../internal/shim-types';\nimport { makeReadableStream } from '../internal/shims';\nimport { findDoubleNewlineIndex, LineDecoder } from '../internal/decoders/line';\nimport { ReadableStreamToAsyncIterable } from '../internal/shims';\nimport { isAbortError } from '../internal/errors';\nimport { encodeUTF8 } from '../internal/utils/bytes';\nimport { loggerFor } from '../internal/utils/log';\nimport type { Together } from '../client';\n\nimport { APIError } from './error';\n\ntype Bytes = string | ArrayBuffer | Uint8Array | null | undefined;\n\nexport type ServerSentEvent = {\n  event: string | null;\n  data: string;\n  raw: string[];\n};\n\nexport class Stream<Item> implements AsyncIterable<Item> {\n  controller: AbortController;\n  #client: Together | undefined;\n\n  constructor(\n    private iterator: () => AsyncIterator<Item>,\n    controller: AbortController,\n    client?: Together,\n  ) {\n    this.controller = controller;\n    this.#client = client;\n  }\n\n  static fromSSEResponse<Item>(\n    response: Response,\n    controller: AbortController,\n    client?: Together,\n  ): Stream<Item> {\n    let consumed = false;\n    const logger = client ? loggerFor(client) : console;\n\n    async function* iterator(): AsyncIterator<Item, any, undefined> {\n      if (consumed) {\n        throw new TogetherError('Cannot iterate over a consumed stream, use `.tee()` to split the stream.');\n      }\n      consumed = true;\n      let done = false;\n      try {\n        for await (const sse of _iterSSEMessages(response, controller)) {\n          if (done) continue;\n\n          if (sse.data.startsWith('[DONE]')) {\n            done = true;\n            continue;\n          }\n\n          if (sse.event === null) {\n            let data;\n\n            try {\n              data = JSON.parse(sse.data);\n            } catch (e) {\n              logger.error(`Could not parse message into JSON:`, sse.data);\n              logger.error(`From chunk:`, sse.raw);\n              throw e;\n            }\n\n            if (data && data.error) {\n              throw new APIError(undefined, data.error, undefined, response.headers);\n            }\n\n            yield data;\n          }\n        }\n        done = true;\n      } catch (e) {\n        // If the user calls `stream.controller.abort()`, we should exit without throwing.\n        if (isAbortError(e)) return;\n        throw e;\n      } finally {\n        // If the user `break`s, abort the ongoing request.\n        if (!done) controller.abort();\n      }\n    }\n\n    return new Stream(iterator, controller, client);\n  }\n\n  /**\n   * Generates a Stream from a newline-separated ReadableStream\n   * where each item is a JSON value.\n   */\n  static fromReadableStream<Item>(\n    readableStream: ReadableStream,\n    controller: AbortController,\n    client?: Together,\n  ): Stream<Item> {\n    let consumed = false;\n\n    async function* iterLines(): AsyncGenerator<string, void, unknown> {\n      const lineDecoder = new LineDecoder();\n\n      const iter = ReadableStreamToAsyncIterable<Bytes>(readableStream);\n      for await (const chunk of iter) {\n        for (const line of lineDecoder.decode(chunk)) {\n          yield line;\n        }\n      }\n\n      for (const line of lineDecoder.flush()) {\n        yield line;\n      }\n    }\n\n    async function* iterator(): AsyncIterator<Item, any, undefined> {\n      if (consumed) {\n        throw new TogetherError('Cannot iterate over a consumed stream, use `.tee()` to split the stream.');\n      }\n      consumed = true;\n      let done = false;\n      try {\n        for await (const line of iterLines()) {\n          if (done) continue;\n          if (line) yield JSON.parse(line);\n        }\n        done = true;\n      } catch (e) {\n        // If the user calls `stream.controller.abort()`, we should exit without throwing.\n        if (isAbortError(e)) return;\n        throw e;\n      } finally {\n        // If the user `break`s, abort the ongoing request.\n        if (!done) controller.abort();\n      }\n    }\n\n    return new Stream(iterator, controller, client);\n  }\n\n  [Symbol.asyncIterator](): AsyncIterator<Item> {\n    return this.iterator();\n  }\n\n  /**\n   * Splits the stream into two streams which can be\n   * independently read from at different speeds.\n   */\n  tee(): [Stream<Item>, Stream<Item>] {\n    const left: Array<Promise<IteratorResult<Item>>> = [];\n    const right: Array<Promise<IteratorResult<Item>>> = [];\n    const iterator = this.iterator();\n\n    const teeIterator = (queue: Array<Promise<IteratorResult<Item>>>): AsyncIterator<Item> => {\n      return {\n        next: () => {\n          if (queue.length === 0) {\n            const result = iterator.next();\n            left.push(result);\n            right.push(result);\n          }\n          return queue.shift()!;\n        },\n      };\n    };\n\n    return [\n      new Stream(() => teeIterator(left), this.controller, this.#client),\n      new Stream(() => teeIterator(right), this.controller, this.#client),\n    ];\n  }\n\n  /**\n   * Converts this stream to a newline-separated ReadableStream of\n   * JSON stringified values in the stream\n   * which can be turned back into a Stream with `Stream.fromReadableStream()`.\n   */\n  toReadableStream(): ReadableStream {\n    const self = this;\n    let iter: AsyncIterator<Item>;\n\n    return makeReadableStream({\n      async start() {\n        iter = self[Symbol.asyncIterator]();\n      },\n      async pull(ctrl: any) {\n        try {\n          const { value, done } = await iter.next();\n          if (done) return ctrl.close();\n\n          const bytes = encodeUTF8(JSON.stringify(value) + '\\n');\n\n          ctrl.enqueue(bytes);\n        } catch (err) {\n          ctrl.error(err);\n        }\n      },\n      async cancel() {\n        await iter.return?.();\n      },\n    });\n  }\n}\n\nexport async function* _iterSSEMessages(\n  response: Response,\n  controller: AbortController,\n): AsyncGenerator<ServerSentEvent, void, unknown> {\n  if (!response.body) {\n    controller.abort();\n    if (\n      typeof (globalThis as any).navigator !== 'undefined' &&\n      (globalThis as any).navigator.product === 'ReactNative'\n    ) {\n      throw new TogetherError(\n        `The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api`,\n      );\n    }\n    throw new TogetherError(`Attempted to iterate over a response with no body`);\n  }\n\n  const sseDecoder = new SSEDecoder();\n  const lineDecoder = new LineDecoder();\n\n  const iter = ReadableStreamToAsyncIterable<Bytes>(response.body);\n  for await (const sseChunk of iterSSEChunks(iter)) {\n    for (const line of lineDecoder.decode(sseChunk)) {\n      const sse = sseDecoder.decode(line);\n      if (sse) yield sse;\n    }\n  }\n\n  for (const line of lineDecoder.flush()) {\n    const sse = sseDecoder.decode(line);\n    if (sse) yield sse;\n  }\n}\n\n/**\n * Given an async iterable iterator, iterates over it and yields full\n * SSE chunks, i.e. yields when a double new-line is encountered.\n */\nasync function* iterSSEChunks(iterator: AsyncIterableIterator<Bytes>): AsyncGenerator<Uint8Array> {\n  let data = new Uint8Array();\n\n  for await (const chunk of iterator) {\n    if (chunk == null) {\n      continue;\n    }\n\n    const binaryChunk =\n      chunk instanceof ArrayBuffer ? new Uint8Array(chunk)\n      : typeof chunk === 'string' ? encodeUTF8(chunk)\n      : chunk;\n\n    let newData = new Uint8Array(data.length + binaryChunk.length);\n    newData.set(data);\n    newData.set(binaryChunk, data.length);\n    data = newData;\n\n    let patternIndex;\n    while ((patternIndex = findDoubleNewlineIndex(data)) !== -1) {\n      yield data.slice(0, patternIndex);\n      data = data.slice(patternIndex);\n    }\n  }\n\n  if (data.length > 0) {\n    yield data;\n  }\n}\n\nclass SSEDecoder {\n  private data: string[];\n  private event: string | null;\n  private chunks: string[];\n\n  constructor() {\n    this.event = null;\n    this.data = [];\n    this.chunks = [];\n  }\n\n  decode(line: string) {\n    if (line.endsWith('\\r')) {\n      line = line.substring(0, line.length - 1);\n    }\n\n    if (!line) {\n      // empty line and we didn't previously encounter any messages\n      if (!this.event && !this.data.length) return null;\n\n      const sse: ServerSentEvent = {\n        event: this.event,\n        data: this.data.join('\\n'),\n        raw: this.chunks,\n      };\n\n      this.event = null;\n      this.data = [];\n      this.chunks = [];\n\n      return sse;\n    }\n\n    this.chunks.push(line);\n\n    if (line.startsWith(':')) {\n      return null;\n    }\n\n    let [fieldname, _, value] = partition(line, ':');\n\n    if (value.startsWith(' ')) {\n      value = value.substring(1);\n    }\n\n    if (fieldname === 'event') {\n      this.event = value;\n    } else if (fieldname === 'data') {\n      this.data.push(value);\n    }\n\n    return null;\n  }\n}\n\nfunction partition(str: string, delimiter: string): [string, string, string] {\n  const index = str.indexOf(delimiter);\n  if (index !== -1) {\n    return [str.substring(0, index), delimiter, str.substring(index + delimiter.length)];\n  }\n\n  return [str, '', ''];\n}\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport type { RequestInit, RequestInfo, BodyInit } from './internal/builtin-types';\nimport type { HTTPMethod, PromiseOrValue, MergedRequestInit, FinalizedRequestInit } from './internal/types';\nimport { uuid4 } from './internal/utils/uuid';\nimport { validatePositiveInteger, isAbsoluteURL, safeJSON } from './internal/utils/values';\nimport { sleep } from './internal/utils/sleep';\nexport type { Logger, LogLevel } from './internal/utils/log';\nimport { castToError, isAbortError } from './internal/errors';\nimport type { APIResponseProps } from './internal/parse';\nimport { getPlatformHeaders } from './internal/detect-platform';\nimport * as Shims from './internal/shims';\nimport * as Opts from './internal/request-options';\nimport { VERSION } from './version';\nimport * as Errors from './core/error';\nimport * as Uploads from './core/uploads';\nimport * as API from './resources/index';\nimport * as TopLevelAPI from './resources/top-level';\nimport { RerankParams, RerankResponse } from './resources/top-level';\nimport { APIPromise } from './core/api-promise';\nimport {\n  BatchCreateParams,\n  BatchCreateResponse,\n  BatchListResponse,\n  BatchRetrieveResponse,\n  Batches,\n} from './resources/batches';\nimport {\n  Completion,\n  CompletionChunk,\n  CompletionCreateParams,\n  CompletionCreateParamsNonStreaming,\n  CompletionCreateParamsStreaming,\n  Completions,\n  LogProbs,\n  ToolChoice,\n  Tools,\n} from './resources/completions';\nimport { Embedding, EmbeddingCreateParams, Embeddings } from './resources/embeddings';\nimport {\n  Autoscaling,\n  EndpointCreateParams,\n  EndpointCreateResponse,\n  EndpointListParams,\n  EndpointListResponse,\n  EndpointRetrieveResponse,\n  EndpointUpdateParams,\n  EndpointUpdateResponse,\n  Endpoints,\n} from './resources/endpoints';\nimport {\n  FileDeleteResponse,\n  FileListResponse,\n  FileObject,\n  FilePurpose,\n  FileRetrieveResponse,\n  FileType,\n  FileUploadParams,\n  FileUploadResponse,\n  Files,\n} from './resources/files';\nimport {\n  CosineLrSchedulerArgs,\n  FineTune,\n  FineTuneCancelResponse,\n  FineTuneCreateParams,\n  FineTuneCreateResponse,\n  FineTuneDownloadParams,\n  FineTuneDownloadResponse,\n  FineTuneEvent,\n  FineTuneListEventsResponse,\n  FineTuneListResponse,\n  FineTuneResource,\n  FineTuneRetrieveCheckpointsResponse,\n  FullTrainingType,\n  LinearLrSchedulerArgs,\n  LoRaTrainingType,\n  LrScheduler,\n  TrainingMethodDpo,\n  TrainingMethodSft,\n} from './resources/fine-tune';\nimport { Hardware, HardwareListParams, HardwareListResponse } from './resources/hardware';\nimport { ImageCreateParams, ImageDataB64, ImageDataURL, ImageFile, Images } from './resources/images';\nimport { JobListResponse, JobRetrieveResponse, Jobs } from './resources/jobs';\nimport { ModelListResponse, ModelUploadParams, ModelUploadResponse, Models } from './resources/models';\nimport {\n  Audio,\n  AudioCreateParams,\n  AudioCreateParamsNonStreaming,\n  AudioCreateParamsStreaming,\n  AudioFile,\n  AudioSpeechStreamChunk,\n} from './resources/audio/audio';\nimport { Chat } from './resources/chat/chat';\nimport {\n  CodeInterpreter,\n  CodeInterpreterExecuteParams,\n  ExecuteResponse,\n} from './resources/code-interpreter/code-interpreter';\nimport { type Fetch } from './internal/builtin-types';\nimport { HeadersLike, NullableHeaders, buildHeaders } from './internal/headers';\nimport { FinalRequestOptions, RequestOptions } from './internal/request-options';\nimport { readEnv } from './internal/utils/env';\nimport {\n  type LogLevel,\n  type Logger,\n  formatRequestDetails,\n  loggerFor,\n  parseLogLevel,\n} from './internal/utils/log';\nimport { isEmptyObj } from './internal/utils/values';\n\nexport interface ClientOptions {\n  /**\n   * Defaults to process.env['TOGETHER_API_KEY'].\n   */\n  apiKey?: string | undefined;\n\n  /**\n   * Override the default base URL for the API, e.g., \"https://api.example.com/v2/\"\n   *\n   * Defaults to process.env['TOGETHER_BASE_URL'].\n   */\n  baseURL?: string | null | undefined;\n\n  /**\n   * The maximum amount of time (in milliseconds) that the client should wait for a response\n   * from the server before timing out a single request.\n   *\n   * Note that request timeouts are retried by default, so in a worst-case scenario you may wait\n   * much longer than this timeout before the promise succeeds or fails.\n   *\n   * @unit milliseconds\n   */\n  timeout?: number | undefined;\n  /**\n   * Additional `RequestInit` options to be passed to `fetch` calls.\n   * Properties will be overridden by per-request `fetchOptions`.\n   */\n  fetchOptions?: MergedRequestInit | undefined;\n\n  /**\n   * Specify a custom `fetch` function implementation.\n   *\n   * If not provided, we expect that `fetch` is defined globally.\n   */\n  fetch?: Fetch | undefined;\n\n  /**\n   * The maximum number of times that the client will retry a request in case of a\n   * temporary failure, like a network error or a 5XX error from the server.\n   *\n   * @default 5\n   */\n  maxRetries?: number | undefined;\n\n  /**\n   * Default headers to include with every request to the API.\n   *\n   * These can be removed in individual requests by explicitly setting the\n   * header to `null` in request options.\n   */\n  defaultHeaders?: HeadersLike | undefined;\n\n  /**\n   * Default query parameters to include with every request to the API.\n   *\n   * These can be removed in individual requests by explicitly setting the\n   * param to `undefined` in request options.\n   */\n  defaultQuery?: Record<string, string | undefined> | undefined;\n\n  /**\n   * Set the log level.\n   *\n   * Defaults to process.env['TOGETHER_LOG'] or 'warn' if it isn't set.\n   */\n  logLevel?: LogLevel | undefined;\n\n  /**\n   * Set the logger.\n   *\n   * Defaults to globalThis.console.\n   */\n  logger?: Logger | undefined;\n}\n\n/**\n * API Client for interfacing with the Together API.\n */\nexport class Together {\n  apiKey: string;\n\n  baseURL: string;\n  maxRetries: number;\n  timeout: number;\n  logger: Logger | undefined;\n  logLevel: LogLevel | undefined;\n  fetchOptions: MergedRequestInit | undefined;\n\n  private fetch: Fetch;\n  #encoder: Opts.RequestEncoder;\n  protected idempotencyHeader?: string;\n  private _options: ClientOptions;\n\n  /**\n   * API Client for interfacing with the Together API.\n   *\n   * @param {string | undefined} [opts.apiKey=process.env['TOGETHER_API_KEY'] ?? undefined]\n   * @param {string} [opts.baseURL=process.env['TOGETHER_BASE_URL'] ?? https://api.together.xyz/v1] - Override the default base URL for the API.\n   * @param {number} [opts.timeout=1 minute] - The maximum amount of time (in milliseconds) the client will wait for a response before timing out.\n   * @param {MergedRequestInit} [opts.fetchOptions] - Additional `RequestInit` options to be passed to `fetch` calls.\n   * @param {Fetch} [opts.fetch] - Specify a custom `fetch` function implementation.\n   * @param {number} [opts.maxRetries=5] - The maximum number of times the client will retry a request.\n   * @param {HeadersLike} opts.defaultHeaders - Default headers to include with every request to the API.\n   * @param {Record<string, string | undefined>} opts.defaultQuery - Default query parameters to include with every request to the API.\n   */\n  constructor({\n    baseURL = readEnv('TOGETHER_BASE_URL'),\n    apiKey = readEnv('TOGETHER_API_KEY'),\n    ...opts\n  }: ClientOptions = {}) {\n    if (apiKey === undefined) {\n      throw new Errors.TogetherError(\n        \"The TOGETHER_API_KEY environment variable is missing or empty; either provide it, or instantiate the Together client with an apiKey option, like new Together({ apiKey: 'My API Key' }).\",\n      );\n    }\n\n    const options: ClientOptions = {\n      apiKey,\n      ...opts,\n      baseURL: baseURL || `https://api.together.xyz/v1`,\n    };\n\n    this.baseURL = options.baseURL!;\n    this.timeout = options.timeout ?? Together.DEFAULT_TIMEOUT /* 1 minute */;\n    this.logger = options.logger ?? console;\n    const defaultLogLevel = 'warn';\n    // Set default logLevel early so that we can log a warning in parseLogLevel.\n    this.logLevel = defaultLogLevel;\n    this.logLevel =\n      parseLogLevel(options.logLevel, 'ClientOptions.logLevel', this) ??\n      parseLogLevel(readEnv('TOGETHER_LOG'), \"process.env['TOGETHER_LOG']\", this) ??\n      defaultLogLevel;\n    this.fetchOptions = options.fetchOptions;\n    this.maxRetries = options.maxRetries ?? 5;\n    this.fetch = options.fetch ?? Shims.getDefaultFetch();\n    this.#encoder = Opts.FallbackEncoder;\n\n    this._options = options;\n\n    this.apiKey = apiKey;\n  }\n\n  /**\n   * Create a new client instance re-using the same options given to the current client with optional overriding.\n   */\n  withOptions(options: Partial<ClientOptions>): this {\n    const client = new (this.constructor as any as new (props: ClientOptions) => typeof this)({\n      ...this._options,\n      baseURL: this.baseURL,\n      maxRetries: this.maxRetries,\n      timeout: this.timeout,\n      logger: this.logger,\n      logLevel: this.logLevel,\n      fetch: this.fetch,\n      fetchOptions: this.fetchOptions,\n      apiKey: this.apiKey,\n      ...options,\n    });\n    return client;\n  }\n\n  /**\n   * Check whether the base URL is set to its default.\n   */\n  #baseURLOverridden(): boolean {\n    return this.baseURL !== 'https://api.together.xyz/v1';\n  }\n\n  /**\n   * Query a reranker model\n   *\n   * @example\n   * ```ts\n   * const response = await client.rerank({\n   *   documents: [\n   *     { title: 'bar', text: 'bar' },\n   *     { title: 'bar', text: 'bar' },\n   *     { title: 'bar', text: 'bar' },\n   *     { title: 'bar', text: 'bar' },\n   *   ],\n   *   model: 'Salesforce/Llama-Rank-V1',\n   *   query: 'What animals can I find near Peru?',\n   * });\n   * ```\n   */\n  rerank(body: TopLevelAPI.RerankParams, options?: RequestOptions): APIPromise<TopLevelAPI.RerankResponse> {\n    return this.post('/rerank', { body, ...options });\n  }\n\n  protected defaultQuery(): Record<string, string | undefined> | undefined {\n    return this._options.defaultQuery;\n  }\n\n  protected validateHeaders({ values, nulls }: NullableHeaders) {\n    return;\n  }\n\n  protected async authHeaders(opts: FinalRequestOptions): Promise<NullableHeaders | undefined> {\n    return buildHeaders([{ Authorization: `Bearer ${this.apiKey}` }]);\n  }\n\n  /**\n   * Basic re-implementation of `qs.stringify` for primitive types.\n   */\n  protected stringifyQuery(query: Record<string, unknown>): string {\n    return Object.entries(query)\n      .filter(([_, value]) => typeof value !== 'undefined')\n      .map(([key, value]) => {\n        if (typeof value === 'string' || typeof value === 'number' || typeof value === 'boolean') {\n          return `${encodeURIComponent(key)}=${encodeURIComponent(value)}`;\n        }\n        if (value === null) {\n          return `${encodeURIComponent(key)}=`;\n        }\n        throw new Errors.TogetherError(\n          `Cannot stringify type ${typeof value}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`,\n        );\n      })\n      .join('&');\n  }\n\n  private getUserAgent(): string {\n    return `${this.constructor.name}/JS ${VERSION}`;\n  }\n\n  protected defaultIdempotencyKey(): string {\n    return `stainless-node-retry-${uuid4()}`;\n  }\n\n  protected makeStatusError(\n    status: number,\n    error: Object,\n    message: string | undefined,\n    headers: Headers,\n  ): Errors.APIError {\n    return Errors.APIError.generate(status, error, message, headers);\n  }\n\n  buildURL(\n    path: string,\n    query: Record<string, unknown> | null | undefined,\n    defaultBaseURL?: string | undefined,\n  ): string {\n    const baseURL = (!this.#baseURLOverridden() && defaultBaseURL) || this.baseURL;\n    const url =\n      isAbsoluteURL(path) ?\n        new URL(path)\n      : new URL(baseURL + (baseURL.endsWith('/') && path.startsWith('/') ? path.slice(1) : path));\n\n    const defaultQuery = this.defaultQuery();\n    if (!isEmptyObj(defaultQuery)) {\n      query = { ...defaultQuery, ...query };\n    }\n\n    if (typeof query === 'object' && query && !Array.isArray(query)) {\n      url.search = this.stringifyQuery(query as Record<string, unknown>);\n    }\n\n    return url.toString();\n  }\n\n  /**\n   * Used as a callback for mutating the given `FinalRequestOptions` object.\n   */\n  protected async prepareOptions(options: FinalRequestOptions): Promise<void> {}\n\n  /**\n   * Used as a callback for mutating the given `RequestInit` object.\n   *\n   * This is useful for cases where you want to add certain headers based off of\n   * the request properties, e.g. `method` or `url`.\n   */\n  protected async prepareRequest(\n    request: RequestInit,\n    { url, options }: { url: string; options: FinalRequestOptions },\n  ): Promise<void> {}\n\n  get<Rsp>(path: string, opts?: PromiseOrValue<RequestOptions>): APIPromise<Rsp> {\n    return this.methodRequest('get', path, opts);\n  }\n\n  post<Rsp>(path: string, opts?: PromiseOrValue<RequestOptions>): APIPromise<Rsp> {\n    return this.methodRequest('post', path, opts);\n  }\n\n  patch<Rsp>(path: string, opts?: PromiseOrValue<RequestOptions>): APIPromise<Rsp> {\n    return this.methodRequest('patch', path, opts);\n  }\n\n  put<Rsp>(path: string, opts?: PromiseOrValue<RequestOptions>): APIPromise<Rsp> {\n    return this.methodRequest('put', path, opts);\n  }\n\n  delete<Rsp>(path: string, opts?: PromiseOrValue<RequestOptions>): APIPromise<Rsp> {\n    return this.methodRequest('delete', path, opts);\n  }\n\n  private methodRequest<Rsp>(\n    method: HTTPMethod,\n    path: string,\n    opts?: PromiseOrValue<RequestOptions>,\n  ): APIPromise<Rsp> {\n    return this.request(\n      Promise.resolve(opts).then((opts) => {\n        return { method, path, ...opts };\n      }),\n    );\n  }\n\n  request<Rsp>(\n    options: PromiseOrValue<FinalRequestOptions>,\n    remainingRetries: number | null = null,\n  ): APIPromise<Rsp> {\n    return new APIPromise(this, this.makeRequest(options, remainingRetries, undefined));\n  }\n\n  private async makeRequest(\n    optionsInput: PromiseOrValue<FinalRequestOptions>,\n    retriesRemaining: number | null,\n    retryOfRequestLogID: string | undefined,\n  ): Promise<APIResponseProps> {\n    const options = await optionsInput;\n    const maxRetries = options.maxRetries ?? this.maxRetries;\n    if (retriesRemaining == null) {\n      retriesRemaining = maxRetries;\n    }\n\n    await this.prepareOptions(options);\n\n    const { req, url, timeout } = await this.buildRequest(options, {\n      retryCount: maxRetries - retriesRemaining,\n    });\n\n    await this.prepareRequest(req, { url, options });\n\n    /** Not an API request ID, just for correlating local log entries. */\n    const requestLogID = 'log_' + ((Math.random() * (1 << 24)) | 0).toString(16).padStart(6, '0');\n    const retryLogStr = retryOfRequestLogID === undefined ? '' : `, retryOf: ${retryOfRequestLogID}`;\n    const startTime = Date.now();\n\n    loggerFor(this).debug(\n      `[${requestLogID}] sending request`,\n      formatRequestDetails({\n        retryOfRequestLogID,\n        method: options.method,\n        url,\n        options,\n        headers: req.headers,\n      }),\n    );\n\n    if (options.signal?.aborted) {\n      throw new Errors.APIUserAbortError();\n    }\n\n    const controller = new AbortController();\n    const response = await this.fetchWithTimeout(url, req, timeout, controller).catch(castToError);\n    const headersTime = Date.now();\n\n    if (response instanceof Error) {\n      const retryMessage = `retrying, ${retriesRemaining} attempts remaining`;\n      if (options.signal?.aborted) {\n        throw new Errors.APIUserAbortError();\n      }\n      // detect native connection timeout errors\n      // deno throws \"TypeError: error sending request for url (https://example/): client error (Connect): tcp connect error: Operation timed out (os error 60): Operation timed out (os error 60)\"\n      // undici throws \"TypeError: fetch failed\" with cause \"ConnectTimeoutError: Connect Timeout Error (attempted address: example:443, timeout: 1ms)\"\n      // others do not provide enough information to distinguish timeouts from other connection errors\n      const isTimeout =\n        isAbortError(response) ||\n        /timed? ?out/i.test(String(response) + ('cause' in response ? String(response.cause) : ''));\n      if (retriesRemaining) {\n        loggerFor(this).info(\n          `[${requestLogID}] connection ${isTimeout ? 'timed out' : 'failed'} - ${retryMessage}`,\n        );\n        loggerFor(this).debug(\n          `[${requestLogID}] connection ${isTimeout ? 'timed out' : 'failed'} (${retryMessage})`,\n          formatRequestDetails({\n            retryOfRequestLogID,\n            url,\n            durationMs: headersTime - startTime,\n            message: response.message,\n          }),\n        );\n        return this.retryRequest(options, retriesRemaining, retryOfRequestLogID ?? requestLogID);\n      }\n      loggerFor(this).info(\n        `[${requestLogID}] connection ${isTimeout ? 'timed out' : 'failed'} - error; no more retries left`,\n      );\n      loggerFor(this).debug(\n        `[${requestLogID}] connection ${isTimeout ? 'timed out' : 'failed'} (error; no more retries left)`,\n        formatRequestDetails({\n          retryOfRequestLogID,\n          url,\n          durationMs: headersTime - startTime,\n          message: response.message,\n        }),\n      );\n      if (isTimeout) {\n        throw new Errors.APIConnectionTimeoutError();\n      }\n      throw new Errors.APIConnectionError({ cause: response });\n    }\n\n    const responseInfo = `[${requestLogID}${retryLogStr}] ${req.method} ${url} ${\n      response.ok ? 'succeeded' : 'failed'\n    } with status ${response.status} in ${headersTime - startTime}ms`;\n\n    if (!response.ok) {\n      const shouldRetry = await this.shouldRetry(response);\n      if (retriesRemaining && shouldRetry) {\n        const retryMessage = `retrying, ${retriesRemaining} attempts remaining`;\n\n        // We don't need the body of this response.\n        await Shims.CancelReadableStream(response.body);\n        loggerFor(this).info(`${responseInfo} - ${retryMessage}`);\n        loggerFor(this).debug(\n          `[${requestLogID}] response error (${retryMessage})`,\n          formatRequestDetails({\n            retryOfRequestLogID,\n            url: response.url,\n            status: response.status,\n            headers: response.headers,\n            durationMs: headersTime - startTime,\n          }),\n        );\n        return this.retryRequest(\n          options,\n          retriesRemaining,\n          retryOfRequestLogID ?? requestLogID,\n          response.headers,\n        );\n      }\n\n      const retryMessage = shouldRetry ? `error; no more retries left` : `error; not retryable`;\n\n      loggerFor(this).info(`${responseInfo} - ${retryMessage}`);\n\n      const errText = await response.text().catch((err: any) => castToError(err).message);\n      const errJSON = safeJSON(errText);\n      const errMessage = errJSON ? undefined : errText;\n\n      loggerFor(this).debug(\n        `[${requestLogID}] response error (${retryMessage})`,\n        formatRequestDetails({\n          retryOfRequestLogID,\n          url: response.url,\n          status: response.status,\n          headers: response.headers,\n          message: errMessage,\n          durationMs: Date.now() - startTime,\n        }),\n      );\n\n      const err = this.makeStatusError(response.status, errJSON, errMessage, response.headers);\n      throw err;\n    }\n\n    loggerFor(this).info(responseInfo);\n    loggerFor(this).debug(\n      `[${requestLogID}] response start`,\n      formatRequestDetails({\n        retryOfRequestLogID,\n        url: response.url,\n        status: response.status,\n        headers: response.headers,\n        durationMs: headersTime - startTime,\n      }),\n    );\n\n    return { response, options, controller, requestLogID, retryOfRequestLogID, startTime };\n  }\n\n  async fetchWithTimeout(\n    url: RequestInfo,\n    init: RequestInit | undefined,\n    ms: number,\n    controller: AbortController,\n  ): Promise<Response> {\n    const { signal, method, ...options } = init || {};\n    if (signal) signal.addEventListener('abort', () => controller.abort());\n\n    const timeout = setTimeout(() => controller.abort(), ms);\n\n    const isReadableBody =\n      ((globalThis as any).ReadableStream && options.body instanceof (globalThis as any).ReadableStream) ||\n      (typeof options.body === 'object' && options.body !== null && Symbol.asyncIterator in options.body);\n\n    const fetchOptions: RequestInit = {\n      signal: controller.signal as any,\n      ...(isReadableBody ? { duplex: 'half' } : {}),\n      method: 'GET',\n      ...options,\n    };\n    if (method) {\n      // Custom methods like 'patch' need to be uppercased\n      // See https://github.com/nodejs/undici/issues/2294\n      fetchOptions.method = method.toUpperCase();\n    }\n\n    try {\n      // use undefined this binding; fetch errors if bound to something else in browser/cloudflare\n      return await this.fetch.call(undefined, url, fetchOptions);\n    } finally {\n      clearTimeout(timeout);\n    }\n  }\n\n  private async shouldRetry(response: Response): Promise<boolean> {\n    // Note this is not a standard header.\n    const shouldRetryHeader = response.headers.get('x-should-retry');\n\n    // If the server explicitly says whether or not to retry, obey.\n    if (shouldRetryHeader === 'true') return true;\n    if (shouldRetryHeader === 'false') return false;\n\n    // Retry on request timeouts.\n    if (response.status === 408) return true;\n\n    // Retry on lock timeouts.\n    if (response.status === 409) return true;\n\n    // Retry on rate limits.\n    if (response.status === 429) return true;\n\n    // Retry internal errors.\n    if (response.status >= 500) return true;\n\n    return false;\n  }\n\n  private async retryRequest(\n    options: FinalRequestOptions,\n    retriesRemaining: number,\n    requestLogID: string,\n    responseHeaders?: Headers | undefined,\n  ): Promise<APIResponseProps> {\n    let timeoutMillis: number | undefined;\n\n    // Note the `retry-after-ms` header may not be standard, but is a good idea and we'd like proactive support for it.\n    const retryAfterMillisHeader = responseHeaders?.get('retry-after-ms');\n    if (retryAfterMillisHeader) {\n      const timeoutMs = parseFloat(retryAfterMillisHeader);\n      if (!Number.isNaN(timeoutMs)) {\n        timeoutMillis = timeoutMs;\n      }\n    }\n\n    // About the Retry-After header: https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Retry-After\n    const retryAfterHeader = responseHeaders?.get('retry-after');\n    if (retryAfterHeader && !timeoutMillis) {\n      const timeoutSeconds = parseFloat(retryAfterHeader);\n      if (!Number.isNaN(timeoutSeconds)) {\n        timeoutMillis = timeoutSeconds * 1000;\n      } else {\n        timeoutMillis = Date.parse(retryAfterHeader) - Date.now();\n      }\n    }\n\n    // If the API asks us to wait a certain amount of time (and it's a reasonable amount),\n    // just do what it says, but otherwise calculate a default\n    if (!(timeoutMillis && 0 <= timeoutMillis && timeoutMillis < 60 * 1000)) {\n      const maxRetries = options.maxRetries ?? this.maxRetries;\n      timeoutMillis = this.calculateDefaultRetryTimeoutMillis(retriesRemaining, maxRetries);\n    }\n    await sleep(timeoutMillis);\n\n    return this.makeRequest(options, retriesRemaining - 1, requestLogID);\n  }\n\n  private calculateDefaultRetryTimeoutMillis(retriesRemaining: number, maxRetries: number): number {\n    const initialRetryDelay = 1.0;\n    const maxRetryDelay = 10.0;\n\n    const numRetries = maxRetries - retriesRemaining;\n\n    // Apply exponential backoff, but not more than the max.\n    const sleepSeconds = Math.min(initialRetryDelay * Math.pow(2, numRetries), maxRetryDelay);\n\n    // Apply some jitter, take up to at most 25 percent of the retry time.\n    const jitter = 1 - Math.random() * 0.25;\n\n    return sleepSeconds * jitter * 1000;\n  }\n\n  async buildRequest(\n    inputOptions: FinalRequestOptions,\n    { retryCount = 0 }: { retryCount?: number } = {},\n  ): Promise<{ req: FinalizedRequestInit; url: string; timeout: number }> {\n    const options = { ...inputOptions };\n    const { method, path, query, defaultBaseURL } = options;\n\n    const url = this.buildURL(path!, query as Record<string, unknown>, defaultBaseURL);\n    if ('timeout' in options) validatePositiveInteger('timeout', options.timeout);\n    options.timeout = options.timeout ?? this.timeout;\n    const { bodyHeaders, body } = this.buildBody({ options });\n    const reqHeaders = await this.buildHeaders({ options: inputOptions, method, bodyHeaders, retryCount });\n\n    const req: FinalizedRequestInit = {\n      method,\n      headers: reqHeaders,\n      ...(options.signal && { signal: options.signal }),\n      ...((globalThis as any).ReadableStream &&\n        body instanceof (globalThis as any).ReadableStream && { duplex: 'half' }),\n      ...(body && { body }),\n      ...((this.fetchOptions as any) ?? {}),\n      ...((options.fetchOptions as any) ?? {}),\n    };\n\n    return { req, url, timeout: options.timeout };\n  }\n\n  private async buildHeaders({\n    options,\n    method,\n    bodyHeaders,\n    retryCount,\n  }: {\n    options: FinalRequestOptions;\n    method: HTTPMethod;\n    bodyHeaders: HeadersLike;\n    retryCount: number;\n  }): Promise<Headers> {\n    let idempotencyHeaders: HeadersLike = {};\n    if (this.idempotencyHeader && method !== 'get') {\n      if (!options.idempotencyKey) options.idempotencyKey = this.defaultIdempotencyKey();\n      idempotencyHeaders[this.idempotencyHeader] = options.idempotencyKey;\n    }\n\n    const headers = buildHeaders([\n      idempotencyHeaders,\n      {\n        Accept: 'application/json',\n        'User-Agent': this.getUserAgent(),\n        'X-Stainless-Retry-Count': String(retryCount),\n        ...(options.timeout ? { 'X-Stainless-Timeout': String(Math.trunc(options.timeout / 1000)) } : {}),\n        ...getPlatformHeaders(),\n      },\n      await this.authHeaders(options),\n      this._options.defaultHeaders,\n      bodyHeaders,\n      options.headers,\n    ]);\n\n    this.validateHeaders(headers);\n\n    return headers.values;\n  }\n\n  private buildBody({ options: { body, headers: rawHeaders } }: { options: FinalRequestOptions }): {\n    bodyHeaders: HeadersLike;\n    body: BodyInit | undefined;\n  } {\n    if (!body) {\n      return { bodyHeaders: undefined, body: undefined };\n    }\n    const headers = buildHeaders([rawHeaders]);\n    if (\n      // Pass raw type verbatim\n      ArrayBuffer.isView(body) ||\n      body instanceof ArrayBuffer ||\n      body instanceof DataView ||\n      (typeof body === 'string' &&\n        // Preserve legacy string encoding behavior for now\n        headers.values.has('content-type')) ||\n      // `Blob` is superset of `File`\n      body instanceof Blob ||\n      // `FormData` -> `multipart/form-data`\n      body instanceof FormData ||\n      // `URLSearchParams` -> `application/x-www-form-urlencoded`\n      body instanceof URLSearchParams ||\n      // Send chunked stream (each chunk has own `length`)\n      ((globalThis as any).ReadableStream && body instanceof (globalThis as any).ReadableStream)\n    ) {\n      return { bodyHeaders: undefined, body: body as BodyInit };\n    } else if (\n      typeof body === 'object' &&\n      (Symbol.asyncIterator in body ||\n        (Symbol.iterator in body && 'next' in body && typeof body.next === 'function'))\n    ) {\n      return { bodyHeaders: undefined, body: Shims.ReadableStreamFrom(body as AsyncIterable<Uint8Array>) };\n    } else {\n      return this.#encoder({ body, headers });\n    }\n  }\n\n  static Together = this;\n  static DEFAULT_TIMEOUT = 60000; // 1 minute\n\n  static TogetherError = Errors.TogetherError;\n  static APIError = Errors.APIError;\n  static APIConnectionError = Errors.APIConnectionError;\n  static APIConnectionTimeoutError = Errors.APIConnectionTimeoutError;\n  static APIUserAbortError = Errors.APIUserAbortError;\n  static NotFoundError = Errors.NotFoundError;\n  static ConflictError = Errors.ConflictError;\n  static RateLimitError = Errors.RateLimitError;\n  static BadRequestError = Errors.BadRequestError;\n  static AuthenticationError = Errors.AuthenticationError;\n  static InternalServerError = Errors.InternalServerError;\n  static PermissionDeniedError = Errors.PermissionDeniedError;\n  static UnprocessableEntityError = Errors.UnprocessableEntityError;\n\n  static toFile = Uploads.toFile;\n\n  chat: API.Chat = new API.Chat(this);\n  completions: API.Completions = new API.Completions(this);\n  embeddings: API.Embeddings = new API.Embeddings(this);\n  files: API.Files = new API.Files(this);\n  fineTune: API.FineTuneResource = new API.FineTuneResource(this);\n  codeInterpreter: API.CodeInterpreter = new API.CodeInterpreter(this);\n  images: API.Images = new API.Images(this);\n  audio: API.Audio = new API.Audio(this);\n  models: API.Models = new API.Models(this);\n  jobs: API.Jobs = new API.Jobs(this);\n  endpoints: API.Endpoints = new API.Endpoints(this);\n  hardware: API.Hardware = new API.Hardware(this);\n  batches: API.Batches = new API.Batches(this);\n}\nTogether.Chat = Chat;\nTogether.Completions = Completions;\nTogether.Embeddings = Embeddings;\nTogether.Files = Files;\nTogether.FineTuneResource = FineTuneResource;\nTogether.CodeInterpreter = CodeInterpreter;\nTogether.Images = Images;\nTogether.Audio = Audio;\nTogether.Models = Models;\nTogether.Jobs = Jobs;\nTogether.Endpoints = Endpoints;\nTogether.Hardware = Hardware;\nTogether.Batches = Batches;\nexport declare namespace Together {\n  export type RequestOptions = Opts.RequestOptions;\n\n  export { type RerankResponse as RerankResponse, type RerankParams as RerankParams };\n\n  export { Chat as Chat };\n\n  export {\n    Completions as Completions,\n    type Completion as Completion,\n    type CompletionChunk as CompletionChunk,\n    type LogProbs as LogProbs,\n    type ToolChoice as ToolChoice,\n    type Tools as Tools,\n    type CompletionCreateParams as CompletionCreateParams,\n    type CompletionCreateParamsNonStreaming as CompletionCreateParamsNonStreaming,\n    type CompletionCreateParamsStreaming as CompletionCreateParamsStreaming,\n  };\n\n  export {\n    Embeddings as Embeddings,\n    type Embedding as Embedding,\n    type EmbeddingCreateParams as EmbeddingCreateParams,\n  };\n\n  export {\n    Files as Files,\n    type FileObject as FileObject,\n    type FilePurpose as FilePurpose,\n    type FileType as FileType,\n    type FileRetrieveResponse as FileRetrieveResponse,\n    type FileListResponse as FileListResponse,\n    type FileDeleteResponse as FileDeleteResponse,\n    type FileUploadResponse as FileUploadResponse,\n    type FileUploadParams as FileUploadParams,\n  };\n\n  export {\n    FineTuneResource as FineTuneResource,\n    type CosineLrSchedulerArgs as CosineLrSchedulerArgs,\n    type FineTune as FineTune,\n    type FineTuneEvent as FineTuneEvent,\n    type FullTrainingType as FullTrainingType,\n    type LinearLrSchedulerArgs as LinearLrSchedulerArgs,\n    type LoRaTrainingType as LoRaTrainingType,\n    type LrScheduler as LrScheduler,\n    type TrainingMethodDpo as TrainingMethodDpo,\n    type TrainingMethodSft as TrainingMethodSft,\n    type FineTuneCreateResponse as FineTuneCreateResponse,\n    type FineTuneListResponse as FineTuneListResponse,\n    type FineTuneCancelResponse as FineTuneCancelResponse,\n    type FineTuneDownloadResponse as FineTuneDownloadResponse,\n    type FineTuneListEventsResponse as FineTuneListEventsResponse,\n    type FineTuneRetrieveCheckpointsResponse as FineTuneRetrieveCheckpointsResponse,\n    type FineTuneCreateParams as FineTuneCreateParams,\n    type FineTuneDownloadParams as FineTuneDownloadParams,\n  };\n\n  export {\n    CodeInterpreter as CodeInterpreter,\n    type ExecuteResponse as ExecuteResponse,\n    type CodeInterpreterExecuteParams as CodeInterpreterExecuteParams,\n  };\n\n  export {\n    Images as Images,\n    type ImageDataB64 as ImageDataB64,\n    type ImageDataURL as ImageDataURL,\n    type ImageFile as ImageFile,\n    type ImageCreateParams as ImageCreateParams,\n  };\n\n  export {\n    Audio as Audio,\n    type AudioFile as AudioFile,\n    type AudioSpeechStreamChunk as AudioSpeechStreamChunk,\n    type AudioCreateParams as AudioCreateParams,\n    type AudioCreateParamsNonStreaming as AudioCreateParamsNonStreaming,\n    type AudioCreateParamsStreaming as AudioCreateParamsStreaming,\n  };\n\n  export {\n    Models as Models,\n    type ModelListResponse as ModelListResponse,\n    type ModelUploadResponse as ModelUploadResponse,\n    type ModelUploadParams as ModelUploadParams,\n  };\n\n  export {\n    Jobs as Jobs,\n    type JobRetrieveResponse as JobRetrieveResponse,\n    type JobListResponse as JobListResponse,\n  };\n\n  export {\n    Endpoints as Endpoints,\n    type Autoscaling as Autoscaling,\n    type EndpointCreateResponse as EndpointCreateResponse,\n    type EndpointRetrieveResponse as EndpointRetrieveResponse,\n    type EndpointUpdateResponse as EndpointUpdateResponse,\n    type EndpointListResponse as EndpointListResponse,\n    type EndpointCreateParams as EndpointCreateParams,\n    type EndpointUpdateParams as EndpointUpdateParams,\n    type EndpointListParams as EndpointListParams,\n  };\n\n  export {\n    Hardware as Hardware,\n    type HardwareListResponse as HardwareListResponse,\n    type HardwareListParams as HardwareListParams,\n  };\n\n  export {\n    Batches as Batches,\n    type BatchCreateResponse as BatchCreateResponse,\n    type BatchRetrieveResponse as BatchRetrieveResponse,\n    type BatchListResponse as BatchListResponse,\n    type BatchCreateParams as BatchCreateParams,\n  };\n}\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\n/**\n * https://stackoverflow.com/a/2117523\n */\nexport let uuid4 = function () {\n  const { crypto } = globalThis as any;\n  if (crypto?.randomUUID) {\n    uuid4 = crypto.randomUUID.bind(crypto);\n    return crypto.randomUUID();\n  }\n  const u8 = new Uint8Array(1);\n  const randomByte = crypto ? () => crypto.getRandomValues(u8)[0]! : () => (Math.random() * 0xff) & 0xff;\n  return '10000000-1000-4000-8000-100000000000'.replace(/[018]/g, (c) =>\n    (+c ^ (randomByte() & (15 >> (+c / 4)))).toString(16),\n  );\n};\n","import {\n  HttpClient,\n  Redis,\n  VERSION,\n  error_exports\n} from \"./chunk-2BA3VA6P.mjs\";\n\n// platforms/nodejs.ts\nif (typeof atob === \"undefined\") {\n  global.atob = (b64) => Buffer.from(b64, \"base64\").toString(\"utf8\");\n}\nvar Redis2 = class _Redis extends Redis {\n  /**\n   * Create a new redis client by providing a custom `Requester` implementation\n   *\n   * @example\n   * ```ts\n   *\n   * import { UpstashRequest, Requester, UpstashResponse, Redis } from \"@upstash/redis\"\n   *\n   *  const requester: Requester = {\n   *    request: <TResult>(req: UpstashRequest): Promise<UpstashResponse<TResult>> => {\n   *      // ...\n   *    }\n   *  }\n   *\n   * const redis = new Redis(requester)\n   * ```\n   */\n  constructor(configOrRequester) {\n    if (\"request\" in configOrRequester) {\n      super(configOrRequester);\n      return;\n    }\n    if (!configOrRequester.url) {\n      console.warn(\n        `[Upstash Redis] The 'url' property is missing or undefined in your Redis config.`\n      );\n    } else if (configOrRequester.url.startsWith(\" \") || configOrRequester.url.endsWith(\" \") || /\\r|\\n/.test(configOrRequester.url)) {\n      console.warn(\n        \"[Upstash Redis] The redis url contains whitespace or newline, which can cause errors!\"\n      );\n    }\n    if (!configOrRequester.token) {\n      console.warn(\n        `[Upstash Redis] The 'token' property is missing or undefined in your Redis config.`\n      );\n    } else if (configOrRequester.token.startsWith(\" \") || configOrRequester.token.endsWith(\" \") || /\\r|\\n/.test(configOrRequester.token)) {\n      console.warn(\n        \"[Upstash Redis] The redis token contains whitespace or newline, which can cause errors!\"\n      );\n    }\n    const client = new HttpClient({\n      baseUrl: configOrRequester.url,\n      retry: configOrRequester.retry,\n      headers: { authorization: `Bearer ${configOrRequester.token}` },\n      agent: configOrRequester.agent,\n      responseEncoding: configOrRequester.responseEncoding,\n      cache: configOrRequester.cache ?? \"no-store\",\n      signal: configOrRequester.signal,\n      keepAlive: configOrRequester.keepAlive,\n      readYourWrites: configOrRequester.readYourWrites\n    });\n    super(client, {\n      automaticDeserialization: configOrRequester.automaticDeserialization,\n      enableTelemetry: !process.env.UPSTASH_DISABLE_TELEMETRY,\n      latencyLogging: configOrRequester.latencyLogging,\n      enableAutoPipelining: configOrRequester.enableAutoPipelining\n    });\n    this.addTelemetry({\n      runtime: (\n        // @ts-expect-error to silence compiler\n        typeof EdgeRuntime === \"string\" ? \"edge-light\" : `node@${process.version}`\n      ),\n      platform: process.env.UPSTASH_CONSOLE ? \"console\" : process.env.VERCEL ? \"vercel\" : process.env.AWS_REGION ? \"aws\" : \"unknown\",\n      sdk: `@upstash/redis@${VERSION}`\n    });\n    if (this.enableAutoPipelining) {\n      return this.autoPipeline();\n    }\n  }\n  /**\n   * Create a new Upstash Redis instance from environment variables.\n   *\n   * Use this to automatically load connection secrets from your environment\n   * variables. For instance when using the Vercel integration.\n   *\n   * This tries to load `UPSTASH_REDIS_REST_URL` and `UPSTASH_REDIS_REST_TOKEN` from\n   * your environment using `process.env`.\n   */\n  static fromEnv(config) {\n    if (process.env === void 0) {\n      throw new TypeError(\n        '[Upstash Redis] Unable to get environment variables, `process.env` is undefined. If you are deploying to cloudflare, please import from \"@upstash/redis/cloudflare\" instead'\n      );\n    }\n    const url = process.env.UPSTASH_REDIS_REST_URL || process.env.KV_REST_API_URL;\n    if (!url) {\n      console.warn(\"[Upstash Redis] Unable to find environment variable: `UPSTASH_REDIS_REST_URL`\");\n    }\n    const token = process.env.UPSTASH_REDIS_REST_TOKEN || process.env.KV_REST_API_TOKEN;\n    if (!token) {\n      console.warn(\n        \"[Upstash Redis] Unable to find environment variable: `UPSTASH_REDIS_REST_TOKEN`\"\n      );\n    }\n    return new _Redis({ ...config, url, token });\n  }\n};\nexport {\n  Redis2 as Redis,\n  error_exports as errors\n};\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\nimport { type Together } from '../client';\n\nimport { type PromiseOrValue } from '../internal/types';\nimport { APIResponseProps, defaultParseResponse } from '../internal/parse';\n\n/**\n * A subclass of `Promise` providing additional helper methods\n * for interacting with the SDK.\n */\nexport class APIPromise<T> extends Promise<T> {\n  private parsedPromise: Promise<T> | undefined;\n  #client: Together;\n\n  constructor(\n    client: Together,\n    private responsePromise: Promise<APIResponseProps>,\n    private parseResponse: (\n      client: Together,\n      props: APIResponseProps,\n    ) => PromiseOrValue<T> = defaultParseResponse,\n  ) {\n    super((resolve) => {\n      // this is maybe a bit weird but this has to be a no-op to not implicitly\n      // parse the response body; instead .then, .catch, .finally are overridden\n      // to parse the response\n      resolve(null as any);\n    });\n    this.#client = client;\n  }\n\n  _thenUnwrap<U>(transform: (data: T, props: APIResponseProps) => U): APIPromise<U> {\n    return new APIPromise(this.#client, this.responsePromise, async (client, props) =>\n      transform(await this.parseResponse(client, props), props),\n    );\n  }\n\n  /**\n   * Gets the raw `Response` instance instead of parsing the response\n   * data.\n   *\n   * If you want to parse the response body but still get the `Response`\n   * instance, you can use {@link withResponse()}.\n   *\n   *  Getting the wrong TypeScript type for `Response`?\n   * Try setting `\"moduleResolution\": \"NodeNext\"` or add `\"lib\": [\"DOM\"]`\n   * to your `tsconfig.json`.\n   */\n  asResponse(): Promise<Response> {\n    return this.responsePromise.then((p) => p.response);\n  }\n\n  /**\n   * Gets the parsed response data and the raw `Response` instance.\n   *\n   * If you just want to get the raw `Response` instance without parsing it,\n   * you can use {@link asResponse()}.\n   *\n   *  Getting the wrong TypeScript type for `Response`?\n   * Try setting `\"moduleResolution\": \"NodeNext\"` or add `\"lib\": [\"DOM\"]`\n   * to your `tsconfig.json`.\n   */\n  async withResponse(): Promise<{ data: T; response: Response }> {\n    const [data, response] = await Promise.all([this.parse(), this.asResponse()]);\n    return { data, response };\n  }\n\n  private parse(): Promise<T> {\n    if (!this.parsedPromise) {\n      this.parsedPromise = this.responsePromise.then((data) => this.parseResponse(this.#client, data));\n    }\n    return this.parsedPromise;\n  }\n\n  override then<TResult1 = T, TResult2 = never>(\n    onfulfilled?: ((value: T) => TResult1 | PromiseLike<TResult1>) | undefined | null,\n    onrejected?: ((reason: any) => TResult2 | PromiseLike<TResult2>) | undefined | null,\n  ): Promise<TResult1 | TResult2> {\n    return this.parse().then(onfulfilled, onrejected);\n  }\n\n  override catch<TResult = never>(\n    onrejected?: ((reason: any) => TResult | PromiseLike<TResult>) | undefined | null,\n  ): Promise<T | TResult> {\n    return this.parse().catch(onrejected);\n  }\n\n  override finally(onfinally?: (() => void) | undefined | null): Promise<T> {\n    return this.parse().finally(onfinally);\n  }\n}\n","import { TogetherError } from '../../core/error';\n\n/**\n * Percent-encode everything that isn't safe to have in a path without encoding safe chars.\n *\n * Taken from https://datatracker.ietf.org/doc/html/rfc3986#section-3.3:\n * > unreserved  = ALPHA / DIGIT / \"-\" / \".\" / \"_\" / \"~\"\n * > sub-delims  = \"!\" / \"$\" / \"&\" / \"'\" / \"(\" / \")\" / \"*\" / \"+\" / \",\" / \";\" / \"=\"\n * > pchar       = unreserved / pct-encoded / sub-delims / \":\" / \"@\"\n */\nexport function encodeURIPath(str: string) {\n  return str.replace(/[^A-Za-z0-9\\-._~!$&'()*+,;=:@]+/g, encodeURIComponent);\n}\n\nconst EMPTY = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.create(null));\n\nexport const createPathTagFunction = (pathEncoder = encodeURIPath) =>\n  function path(statics: readonly string[], ...params: readonly unknown[]): string {\n    // If there are no params, no processing is needed.\n    if (statics.length === 1) return statics[0]!;\n\n    let postPath = false;\n    const invalidSegments = [];\n    const path = statics.reduce((previousValue, currentValue, index) => {\n      if (/[?#]/.test(currentValue)) {\n        postPath = true;\n      }\n      const value = params[index];\n      let encoded = (postPath ? encodeURIComponent : pathEncoder)('' + value);\n      if (\n        index !== params.length &&\n        (value == null ||\n          (typeof value === 'object' &&\n            // handle values from other realms\n            value.toString ===\n              Object.getPrototypeOf(Object.getPrototypeOf((value as any).hasOwnProperty ?? EMPTY) ?? EMPTY)\n                ?.toString))\n      ) {\n        encoded = value + '';\n        invalidSegments.push({\n          start: previousValue.length + currentValue.length,\n          length: encoded.length,\n          error: `Value of type ${Object.prototype.toString\n            .call(value)\n            .slice(8, -1)} is not a valid path parameter`,\n        });\n      }\n      return previousValue + currentValue + (index === params.length ? '' : encoded);\n    }, '');\n\n    const pathOnly = path.split(/[?#]/, 1)[0]!;\n    const invalidSegmentPattern = /(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)/gi;\n    let match;\n\n    // Find all invalid segments\n    while ((match = invalidSegmentPattern.exec(pathOnly)) !== null) {\n      invalidSegments.push({\n        start: match.index,\n        length: match[0].length,\n        error: `Value \"${match[0]}\" can\\'t be safely passed as a path parameter`,\n      });\n    }\n\n    invalidSegments.sort((a, b) => a.start - b.start);\n\n    if (invalidSegments.length > 0) {\n      let lastEnd = 0;\n      const underline = invalidSegments.reduce((acc, segment) => {\n        const spaces = ' '.repeat(segment.start - lastEnd);\n        const arrows = '^'.repeat(segment.length);\n        lastEnd = segment.start + segment.length;\n        return acc + spaces + arrows;\n      }, '');\n\n      throw new TogetherError(\n        `Path parameters result in path with invalid segments:\\n${invalidSegments\n          .map((e) => e.error)\n          .join('\\n')}\\n${path}\\n${underline}`,\n      );\n    }\n\n    return path;\n  };\n\n/**\n * URI-encodes path params and ensures no unsafe /./ or /../ path segments are introduced.\n */\nexport const path = /* @__PURE__ */ createPathTagFunction(encodeURIPath);\n","// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\n\n/**\n * Read an environment variable.\n *\n * Trims beginning and trailing whitespace.\n *\n * Will return undefined if the environment variable doesn't exist or cannot be accessed.\n */\nexport const readEnv = (env: string): string | undefined => {\n  if (typeof (globalThis as any).process !== 'undefined') {\n    return (globalThis as any).process.env?.[env]?.trim() ?? undefined;\n  }\n  if (typeof (globalThis as any).Deno !== 'undefined') {\n    return (globalThis as any).Deno.env?.get?.(env)?.trim();\n  }\n  return undefined;\n};\n"],"names":["CoreAnalytics","fixedWindowLimitScript","fixedWindowRemainingTokensScript","slidingWindowLimitScript","slidingWindowRemainingTokensScript","reset","requestId","current","RouteKind","fromNodeOutgoingHttpHeaders","workAsyncStorage","serverHooks","patchFetch","MINIMAL_MODE"],"mappings":"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","ignoreList":[0,18,19,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,59,60,61,62,63,65,66,67,68,69,70,71]}